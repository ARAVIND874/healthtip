<!DOCTYPE html>
<html lang="ta">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡ÆÜ‡Æ∞‡Øã‡Æï‡Øç‡Æï‡Æø‡ÆØ ‡Æ®‡Æ£‡Øç‡Æ™‡Æ©‡Øç - ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÜ‡Æ∞‡Øã‡Æï‡Øç‡Æï‡Æø‡ÆØ ‡Æµ‡Æ¥‡Æø‡Æï‡Ææ‡Æü‡Øç‡Æü‡Æø</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    <!-- Tone.js for sound generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #E6F7FF; /* Light Blue */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 1.5rem;
            color: #333333;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            box-sizing: border-box;
            transition: all 0.5s ease-in-out;
            overflow-y: auto; /* Allow scrolling for features */
        }

        body.main-content-active {
            min-height: auto;
            align-items: flex-start;
            padding-top: 2rem;
            padding-bottom: 2rem;
            overflow-y: auto;
        }

        .container {
            max-width: 640px;
            width: 100%;
            background-color: #ffffff;
            border-radius: 1.75rem;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.08);
            padding: 2.5rem;
            text-align: center;
            position: relative;
            animation: fadeIn 0.8s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .language-selector-wrapper {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
        }
        .input-wrapper {
            position: relative;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
        }
        .input-field {
            flex-grow: 1;
            padding: 1rem 1.25rem;
            padding-right: 3.5rem; /* Space for mic icon */
            border: 1px solid #D1D5DB;
            border-radius: 0.875rem;
            font-size: 1.05rem;
            box-sizing: border-box;
            outline: none;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }
        .input-field:focus {
            border-color: #87CEEB;
            box-shadow: 0 0 0 3px rgba(135, 206, 235, 0.4);
        }
        .mic-button {
            position: absolute;
            right: 1rem;
            background: none;
            border: none;
            color: #0000FF;
            padding: 0.5rem;
            border-radius: 50%;
            cursor: pointer;
            transition: color 0.3s ease, background-color 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }
        .mic-button:hover {
            color: #DC2626; /* Red */
            background-color: rgba(220, 38, 38, 0.1);
        }
        .mic-button.recording {
            color: #DC2626; /* Red */
            animation: pulse 1s infinite alternate;
        }
        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(1.1); opacity: 0.7); }
        }

        .generate-button, .action-button, .open-tracker-button, .ai-voice-button {
            background-color: #6A0DAD; /* Dark Violet */
            color: #ffffff;
            padding: 1rem 2rem;
            border-radius: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.1s ease, box-shadow 0.3s ease;
            box-shadow: 0 6px 15px rgba(106, 13, 173, 0.4);
            letter-spacing: 0.025em;
            margin-top: 1rem;
            border: none;
            display: inline-flex; /* Ensure flex behavior for centering icon/text */
            align-items: center;
            justify-content: center;
            gap: 0.5rem; /* Space between icon and text */
        }
        .generate-button:hover, .action-button:hover, .open-tracker-button:hover, .ai-voice-button:hover {
            background-color: #4B0A7B; /* Darker Violet */
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(106, 13, 173, 0.5);
        }
        .generate-button:active, .action-button:active, .open-tracker-button:active, .ai-voice-button:active {
            transform: translateY(0);
            box-shadow: 0 4px 10px rgba(106, 13, 173, 0.3);
        }
        .loading-indicator {
            display: none;
            margin-top: 2rem;
            font-size: 1.15rem;
            color: #6B7280;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
        }
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #6A0DAD;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .tip-box, .result-box { /* Unified style for all output boxes */
            background-color: #FFFFAA; /* Light Yellow */
            border: 1px solid #CCCC88; /* Darker Yellow */
            border-radius: 1.25rem;
            padding: 2rem;
            margin-top: 2rem;
            text-align: left;
            color: #333333;
            line-height: 1.7;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-style: italic;
            font-size: 1.05rem;
            transition: all 0.5s ease-in-out;
            word-break: break-word; /* Ensure long words break */
        }
        .tip-box p, .result-box p {
            margin: 0;
        }
        .text-red-600 {
            color: #DC2626; /* Red */
        }
        /* Responsive adjustments */
        @media (max-width: 640px) {
            body {
                padding: 1rem;
            }
            .container {
                padding: 1.5rem;
                border-radius: 1.25rem;
            }
            .generate-button, .action-button, .open-tracker-button, .ai-voice-button {
                width: 100%;
                padding: 0.9rem 1.5rem;
            }
            .flex.flex-wrap.justify-center.gap-4 {
                flex-direction: column;
                gap: 0.75rem;
            }
            .language-selector-wrapper {
                top: 0.75rem;
                right: 0.75rem;
            }
            .input-wrapper {
                flex-direction: row;
                justify-content: center;
            }
            .mic-button {
                position: absolute;
                right: 0.5rem;
            }
        }
        .splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #E6F7FF;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 1;
            transition: opacity 1s ease-out;
            overflow: hidden;
        }
        .splash-screen.fade-out {
            opacity: 0;
            pointer-events: none;
        }
        .splash-screen img {
            max-width: 25%;
            max-height: 25%;
            object-fit: contain;
        }

        /* Feature Button for Main Page */
        .features-toggle-button {
            font-size: 4rem; /* Even larger emoji size for the main toggle */
            cursor: pointer;
            padding: 1rem;
            border-radius: 1rem;
            transition: transform 0.3s ease, background-color 0.3s ease;
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            line-height: 1;
            margin-top: 2rem;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            background-color: #e0f2fe; /* Light blue background */
        }
        .features-toggle-button:hover {
            transform: scale(1.05);
            background-color: #bee3f8; /* Slightly darker blue hover */
        }
        .features-toggle-button span.label {
            font-size: 1rem;
            margin-top: 0.75rem;
            color: #333;
            font-weight: 600;
        }

        /* Feature Icons and Sections */
        .feature-icon-container {
            display: flex;
            justify-content: center;
            gap: 1.5rem; /* Space between icons */
            margin-top: 2rem;
            flex-wrap: wrap; /* Allow icons to wrap on smaller screens */
        }
        .feature-icon {
            font-size: 3rem; /* Larger emoji size */
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 0.75rem;
            transition: transform 0.2s ease, background-color 0.2s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            line-height: 1;
        }
        .feature-icon:hover {
            transform: translateY(-5px);
            background-color: rgba(135, 206, 235, 0.1); /* Light blue hover */
        }
        .feature-icon span.label {
            font-size: 0.8rem; /* Smaller text label */
            margin-top: 0.5rem;
            color: #555;
            font-weight: 500;
        }

        /* Feature sections (initially hidden, shown by JS) */
        .feature-section {
            display: none;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid #e5e7eb; /* Subtle separator */
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Specific feature section styles */
        .dropdown-menu {
            position: absolute;
            background-color: white;
            border: 1px solid #D1D5DB;
            border-radius: 0.75rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            z-index: 100;
            width: 100%;
            max-height: 200px;
            overflow-y: auto;
            text-align: left;
            padding: 0.5rem 0;
            top: calc(100% + 5px); /* Position below input */
            left: 0;
        }
        .dropdown-menu div {
            padding: 0.75rem 1.25rem;
            cursor: pointer;
        }
        .dropdown-menu div:hover {
            background-color: #F3F4F6;
        }
        .dropdown-menu div.selected {
            background-color: #e0f2fe; /* light blue */
            font-weight: 500;
        }
        
        .tts-voice-selector {
            padding: 0.75rem;
            border: 1px solid #D1D5DB;
            border-radius: 0.875rem;
            font-size: 0.95rem;
            background-color: white;
            margin-left: 1rem;
            flex-grow: 1;
        }
        .body-map-container {
            position: relative;
            width: 100%;
            max-width: 300px; /* Adjust as needed */
            margin: 0 auto;
            border: 1px solid #ccc;
            border-radius: 10px;
            overflow: hidden;
        }
        .body-map-image {
            width: 100%;
            height: auto;
            display: block;
        }
        .pain-dot {
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: red;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 0 5px rgba(0,0,0,0.5);
            transform: translate(-50%, -50%); /* Center the dot on the click */
        }
        .pain-dot.selected {
            background-color: darkred;
            border: 2px solid yellow;
        }
        /* Hide all feature sections by default */
        .feature-section {
            display: none;
        }
        /* Show the main view or a specific section */
        #initialView, #allFeatureIconsContainer.active, .feature-section.active {
            display: block;
        }
        .back-button {
            background: none;
            border: none;
            color: #6A0DAD;
            font-weight: 600;
            cursor: pointer;
            padding: 0.5rem 0;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            font-size: 1rem;
            transition: color 0.3s ease;
        }
        .back-button:hover {
            color: #4B0A7B;
        }

        /* Alarm Modal Styles */
        .alarm-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .alarm-modal.show {
            opacity: 1;
            visibility: visible;
        }
        .alarm-modal-content {
            background-color: #ffffff;
            padding: 2.5rem;
            border-radius: 1.5rem;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            max-width: 400px;
            width: 90%;
            transform: translateY(20px);
            transition: transform 0.3s ease;
        }
        .alarm-modal.show .alarm-modal-content {
            transform: translateY(0);
        }
        .alarm-modal-content h3 {
            font-size: 1.8rem;
            font-weight: 700;
            color: #6A0DAD;
            margin-bottom: 1rem;
        }
        .alarm-modal-content p {
            font-size: 1.1rem;
            color: #555;
            margin-bottom: 1.5rem;
        }
        .alarm-modal-content button {
            background-color: #6A0DAD;
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease;
            border: none;
        }
        .alarm-modal-content button:hover {
            background-color: #4B0A7B;
        }
    </style>
</head>
<body>
    <div id="splashScreen" class="splash-screen">
        <img src="https://placehold.co/150x150/E6F7FF/000000?text=Healthcare+Logo" alt="Healthcare related image">
    </div>

    <div class="container" id="mainContent" style="display: none;">
        <div class="language-selector-wrapper">
            <select id="languageSelect" aria-label="Select Language" class="p-2 border border-gray-300 rounded-md text-sm bg-white shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300">
                <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
                <option value="en">English</option>
            </select>
        </div>

        <div id="initialView">
            <h1 id="mainTitle" class="text-3xl font-bold text-gray-800 mb-4 lg:text-4xl"></h1>
            <p id="descriptionText" class="text-gray-600 mb-8 text-lg"></p>

            <h2 id="tipSectionTitle" class="text-2xl font-semibold text-gray-700 mb-4"></h2>
            <div class="input-wrapper">
                <input type="text" id="goalInput" class="input-field" aria-label="‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÜ‡Æ∞‡Øã‡Æï‡Øç‡Æï‡Æø‡ÆØ ‡Æá‡Æ≤‡Æï‡Øç‡Æï‡Øà ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç">
                <button id="micBtn" class="mic-button" title="‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æá‡Æ≤‡Æï‡Øç‡Æï‡Øà‡Æ™‡Øç ‡Æ™‡Øá‡Æö‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç" aria-label="‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÜ‡Æ∞‡Øã‡Æï‡Øç‡Æï‡Æø‡ÆØ ‡Æá‡Æ≤‡Æï‡Øç‡Æï‡Øà‡Æ™‡Øç ‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡Æµ‡ØÅ‡ÆÆ‡Øç">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-mic">
                        <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path>
                        <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                        <line x1="12" y1="19" y2="23"></line>
                        <line x1="8" y1="23" x2="16" y2="23"></line>
                    </svg>
                </button>
            </div>
            <div class="flex flex-wrap justify-center gap-4 mt-4">
                <button id="generateBtn" class="generate-button">‚ú® <span data-label-key="generateBtn"></span></button>
            </div>
            <div class="flex flex-wrap justify-center gap-4 mt-4">
                <button id="aiVoiceBtn" class="ai-voice-button" style="display: none;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-volume-2">
                        <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                        <path d="M19.07 4.93a10 10 0 0 1 0 14.14M23.31 1.69a16 16 0 0 1 0 20.62"></path>
                    </svg>
                </button>
                <select id="ttsVoiceSelect" class="tts-voice-selector" style="display: none;" aria-label="Select Voice"></select>
            </div>
            <div id="loading" class="loading-indicator" aria-live="polite">
                <div class="loading-spinner"></div>
                <p id="loadingText"></p>
            </div>
            <div id="tipOutput" class="tip-box" aria-live="polite"></div>

            <hr class="border-t border-gray-300 my-8">

            <h2 id="featuresTitle" class="text-2xl font-semibold text-gray-700 mb-4"></h2>
            <button id="toggleFeaturesBtn" class="features-toggle-button" title="‡ÆÖ‡Æ©‡Øà‡Æ§‡Øç‡Æ§‡ØÅ ‡ÆÖ‡ÆÆ‡Øç‡Æö‡Æô‡Øç‡Æï‡Æ≥‡Øà‡ÆØ‡ØÅ‡ÆÆ‡Øç ‡Æï‡Ææ‡Æ£‡Øç‡Æï">
                ‚ú®<span class="label" data-label-key="showFeaturesLabel"></span>
            </button>
        </div>

        <!-- This div will now contain both the list of icons and the individual feature sections -->
        <div id="featuresContainer" style="display: none;">
            <!-- This button takes you back to the initial view from the features section -->
            <button class="back-button" id="backToMainFromFeaturesContainer" style="display: none;">‚Üê <span data-label-key="backToMain"></span></button>
            <h1 id="featuresPageTitle" class="text-3xl font-bold text-gray-800 mb-6 mt-4 lg:text-4xl"></h1>

            <!-- All feature icons container -->
            <div id="allFeatureIconsContainer" class="feature-icon-container">
                <div id="iconStepTracker" class="feature-icon" data-section="stepTrackerSection" title="‡Æ™‡Æü‡Æø ‡Æü‡Æø‡Æ∞‡Ææ‡Æï‡Øç‡Æï‡Æ∞‡Øç">üëü<span class="label" data-label-key="stepTrackerLabel"></span></div>
                <div id="iconHeartRateTracker" class="feature-icon" data-section="heartRateTrackerSection" title="‡Æá‡Æ§‡ÆØ‡Æ§‡Øç ‡Æ§‡ØÅ‡Æü‡Æø‡Æ™‡Øç‡Æ™‡ØÅ ‡Æü‡Æø‡Æ∞‡Ææ‡Æï‡Øç‡Æï‡Æ∞‡Øç">üíì<span class="label" data-label-key="heartRateTrackerLabel"></span></div>
                <div id="iconWaterTracker" class="feature-icon" data-section="waterTrackerSection" title="‡Æ§‡Æ£‡Øç‡Æ£‡ØÄ‡Æ∞‡Øç ‡Æü‡Æø‡Æ∞‡Ææ‡Æï‡Øç‡Æï‡Æ∞‡Øç">üíß<span class="label" data-label-key="waterTrackerLabel"></span></div>
                <div id="iconJournal" class="feature-icon" data-section="journalSection" title="‡ÆÆ‡Æ©‡Æ®‡Æø‡Æ≤‡Øà & ‡Æ®‡Æ©‡Øç‡Æ±‡Æø‡ÆØ‡ØÅ‡Æ£‡Æ∞‡Øç‡Æµ‡ØÅ ‡Æú‡Æ∞‡Øç‡Æ©‡Æ≤‡Øç">üìù<span class="label" data-label-key="journalLabel"></span></div>
                <div id="iconLocalTips" class="feature-icon" data-section="localTipsSection" title="‡Æâ‡Æ≥‡Øç‡Æ≥‡ØÇ‡Æ∞‡Øç ‡ÆÜ‡Æ∞‡Øã‡Æï‡Øç‡Æï‡Æø‡ÆØ ‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡ØÅ‡Æï‡Æ≥‡Øç">üå±<span class="label" data-label-key="localTipsLabel"></span></div>
                <div id="iconMealPlan" class="feature-icon" data-section="mealPlanSection" title="‡Æâ‡Æ£‡Æµ‡ØÅ‡Æ§‡Øç ‡Æ§‡Æø‡Æü‡Øç‡Æü‡Æ™‡Øç ‡Æ™‡Æ∞‡Æø‡Æ®‡Øç‡Æ§‡ØÅ‡Æ∞‡Øà‡Æï‡Æ≥‡Øç">üçΩÔ∏è<span class="label" data-label-key="mealPlanLabel"></span></div>
                <div id="iconMoodAnalysis" class="feature-icon" data-section="moodAnalysisSection" title="‡Æâ‡Æ£‡Æ∞‡Øç‡Æµ‡ØÅ‡Æ™‡Øç ‡Æ™‡Æ§‡Æø‡Æµ‡Øá‡Æü‡ØÅ ‡Æ™‡Æï‡ØÅ‡Æ™‡Øç‡Æ™‡Ææ‡ÆØ‡Øç‡Æµ‡ØÅ">üß†<span class="label" data-label-key="moodAnalysisLabel"></span></div>
                <div id="iconExerciseYoga" class="feature-icon" data-section="exerciseYogaSection" title="‡Æâ‡Æü‡Æ±‡Øç‡Æ™‡ÆØ‡Æø‡Æ±‡Øç‡Æö‡Æø & ‡ÆØ‡Øã‡Æï‡Ææ">ü§∏‚Äç‚ôÄÔ∏è<span class="label" data-label-key="exerciseYogaLabel"></span></div>
                <div id="iconDiseasePrevention" class="feature-icon" data-section="diseasePreventionSection" title="‡Æ®‡Øã‡ÆØ‡Øç ‡Æ§‡Æü‡ØÅ‡Æ™‡Øç‡Æ™‡ØÅ">üõ°Ô∏è<span class="label" data-label-key="diseasePreventionLabel"></span></div>
                <div id="iconWellnessChallenge" class="feature-icon" data-section="wellnessChallengeSection" title="‡ÆÜ‡Æ∞‡Øã‡Æï‡Øç‡Æï‡Æø‡ÆØ ‡Æö‡Æµ‡Ææ‡Æ≤‡Øç‡Æï‡Æ≥‡Øç">üèÖ<span class="label" data-label-key="wellnessChallengeLabel"></span></div>
                <div id="iconMedicationReminder" class="feature-icon" data-section="medicationReminderSection" title="‡ÆÆ‡Æ∞‡ØÅ‡Æ®‡Øç‡Æ§‡ØÅ ‡Æ®‡Æø‡Æ©‡Øà‡Æµ‡ØÇ‡Æü‡Øç‡Æü‡Æ≤‡Øç">‚è∞<span class="label" data-label-key="medicationReminderLabel"></span></div>
                <div id="iconBodyPainMapping" class="feature-icon" data-section="bodyPainMappingSection" title="‡Æâ‡Æü‡Æ≤‡Øç ‡Æµ‡Æ≤‡Æø ‡ÆÆ‡Øá‡Æ™‡Øç‡Æ™‡Æø‡Æô‡Øç">üìç<span class="label" data-label-key="bodyPainMappingLabel"></span></div>
                <div id="iconFirstAidEmergency" class="feature-icon" data-section="firstAidEmergencySection" title="‡ÆÆ‡ØÅ‡Æ§‡Æ≤‡ØÅ‡Æ§‡Æµ‡Æø & ‡ÆÖ‡Æµ‡Æö‡Æ∞ ‡Æâ‡Æ§‡Æµ‡Æø">üÜò<span class="label" data-label-key="firstAidEmergencyLabel"></span></div>
                <!-- New Symptom Checker Icon -->
                <div id="iconSymptomChecker" class="feature-icon" data-section="symptomCheckerSection" title="‡ÆÖ‡Æ±‡Æø‡Æï‡ØÅ‡Æ±‡Æø ‡Æö‡Æ∞‡Æø‡Æ™‡Ææ‡Æ∞‡Øç‡Æ™‡Øç‡Æ™‡ØÅ">ü©∫<span class="label" data-label-key="symptomCheckerLabel"></span></div>
            </div>

            <!-- All feature sections are now children of featuresContainer -->
            <div id="stepTrackerSection" class="feature-section">
                <!-- Data target for back button now points to the icons container -->
                <button class="back-button" data-target="allFeatureIconsContainer">‚Üê <span data-label-key="backToFeatures"></span></button>
                <h2 id="stepSectionTitle" class="text-2xl font-semibold text-gray-700 mb-4 mt-4"></h2>
                <div class="input-wrapper">
                    <label for="currentStepsDisplay" class="sr-only">‡Æ§‡Æ±‡Øç‡Æ™‡Øã‡Æ§‡Øà‡ÆØ ‡Æ™‡Æü‡Æø‡Æï‡Æ≥‡Øç</label>
                    <input type="text" id="currentStepsDisplay" class="input-field" value="0" readonly aria-atomic="true">
                </div>
                <div class="flex flex-wrap justify-center gap-4 mt-4">
                    <button id="addOneStepBtn" class="action-button"></button>
                    <button id="addSingleStepBtn" class="action-button"></button> <!-- New button for single step -->
                    <button id="toggleTrackingBtn" class="action-button"></button>
                    <button id="resetStepsBtn" class="action-button"></button>
                </div>
                <div class="flex flex-wrap justify-center gap-4 mt-4">
                    <button id="stepTipAiVoiceBtn" class="ai-voice-button" style="display: none;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-volume-2">
                            <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                            <path d="M19.07 4.93a10 10 0 0 1 0 14.14M23.31 1.69a16 16 0 0 1 0 20.62"></path>
                        </svg>
                    </button>
                    <select id="stepTipTtsVoiceSelect" class="tts-voice-selector" style="display: none;" aria-label="Select Voice"></select>
                </div>
                <div id="stepResultOutput" class="result-box" aria-live="polite"></div>
                <div id="stepTipOutput" class="tip-box" aria-live="polite"></div> <!-- Dedicated tip output -->
            </div>

            <div id="heartRateTrackerSection" class="feature-section">
                <button class="back-button" data-target="allFeatureIconsContainer">‚Üê <span data-label-key="backToFeatures"></span></button>
                <h2 id="heartRateSectionTitle" class="text-2xl font-semibold text-gray-700 mb-4 mt-4"></h2>
                <div class="input-wrapper">
                    <label for="currentHeartRateDisplay" class="sr-only">‡Æ§‡Æ±‡Øç‡Æ™‡Øã‡Æ§‡Øà‡ÆØ ‡Æá‡Æ§‡ÆØ‡Æ§‡Øç ‡Æ§‡ØÅ‡Æü‡Æø‡Æ™‡Øç‡Æ™‡ØÅ</label>
                    <input type="text" id="currentHeartRateDisplay" class="input-field" value="0" readonly aria-atomic="true">
                </div>
                <div class="flex flex-wrap justify-center gap-4 mt-4">
                    <button id="simulateHeartRateBtn" class="action-button"></button>
                    <button id="resetHeartRateBtn" class="action-button"></button>
                </div>
                <div class="flex flex-wrap justify-center gap-4 mt-4">
                    <button id="heartRateTipAiVoiceBtn" class="ai-voice-button" style="display: none;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-volume-2">
                            <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                            <path d="M19.07 4.93a10 10 0 0 1 0 14.14M23.31 1.69a16 16 0 0 1 0 20.62"></path>
                        </svg>
                    </button>
                    <select id="heartRateTipTtsVoiceSelect" class="tts-voice-selector" style="display: none;" aria-label="Select Voice"></select>
                </div>
                <div id="heartRateResultOutput" class="result-box" aria-live="polite"></div>
                <div id="heartRateTipOutput" class="tip-box" aria-live="polite"></div> <!-- Dedicated tip output -->
            </div>

            <div id="waterTrackerSection" class="feature-section">
                <button class="back-button" data-target="allFeatureIconsContainer">‚Üê <span data-label-key="backToFeatures"></span></button>
                <h2 id="waterSectionTitle" class="text-2xl font-semibold text-gray-700 mb-4 mt-4"></h2>
                <div class="input-wrapper">
                    <label for="waterIntakeDisplay" class="sr-only">‡Æ§‡Æ±‡Øç‡Æ™‡Øã‡Æ§‡Øà‡ÆØ ‡Æ§‡Æ£‡Øç‡Æ£‡ØÄ‡Æ∞‡Øç ‡Æâ‡Æü‡Øç‡Æï‡Øä‡Æ≥‡Øç‡Æ≥‡Æ≤‡Øç</label>
                    <input type="text" id="waterIntakeDisplay" class="input-field" value="0 ml" readonly aria-atomic="true">
                </div>
                <div class="flex flex-wrap justify-center gap-4 mt-4">
                    <button id="addWaterBtn" class="action-button"></button>
                    <button id="resetWaterBtn" class="action-button"></button>
                </div>
                <div class="flex flex-wrap justify-center gap-4 mt-4">
                    <button id="waterTipAiVoiceBtn" class="ai-voice-button" style="display: none;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-volume-2">
                            <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                            <path d="M19.07 4.93a10 10 0 0 1 0 14.14M23.31 1.69a16 16 0 0 1 0 20.62"></path>
                        </svg>
                    </button>
                    <select id="waterTipTtsVoiceSelect" class="tts-voice-selector" style="display: none;" aria-label="Select Voice"></select>
                </div>
                <div id="waterResultOutput" class="result-box" aria-live="polite"></div>
                <div id="waterTipOutput" class="tip-box" aria-live="polite"></div> <!-- Dedicated tip output -->
            </div>

            <div id="journalSection" class="feature-section">
                <button class="back-button" data-target="allFeatureIconsContainer">‚Üê <span data-label-key="backToFeatures"></span></button>
                <h2 id="journalSectionTitle" class="text-2xl font-semibold text-gray-700 mb-4 mt-4"></h2>
                <p id="journalDescription" class="text-gray-600 mb-4 text-lg"></p>
                <div class="input-wrapper flex-col items-stretch">
                    <label for="moodSelect" class="sr-only">‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÆ‡Æ©‡Æ®‡Æø‡Æ≤‡Øà‡ÆØ‡Øà‡Æ§‡Øç ‡Æ§‡Øá‡Æ∞‡Øç‡Æ®‡Øç‡Æ§‡ØÜ‡Æü‡ØÅ‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç</label>
                    <select id="moodSelect" class="input-field mb-4" aria-label="‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÆ‡Æ©‡Æ®‡Æø‡Æ≤‡Øà‡ÆØ‡Øà‡Æ§‡Øç ‡Æ§‡Øá‡Æ∞‡Øç‡Æ®‡Øç‡Æ§‡ØÜ‡Æü‡ØÅ‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç">
                        <option value="">‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÆ‡Æ©‡Æ®‡Æø‡Æ≤‡Øà‡ÆØ‡Øà‡Æ§‡Øç ‡Æ§‡Øá‡Æ∞‡Øç‡Æ®‡Øç‡Æ§‡ØÜ‡Æü‡ØÅ‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç</option>
                        <option value="happy">‡ÆÆ‡Æï‡Æø‡Æ¥‡Øç‡Æö‡Øç‡Æö‡Æø üòÑ</option>
                        <option value="neutral">‡Æö‡Ææ‡Æ§‡Ææ‡Æ∞‡Æ£‡ÆÆ‡Øç üòê</option>
                        <option value="sad">‡Æö‡Øã‡Æï‡ÆÆ‡Øç üòî</option>
                        <option value="stressed">‡ÆÆ‡Æ© ‡ÆÖ‡Æ¥‡ØÅ‡Æ§‡Øç‡Æ§‡ÆÆ‡Øç üò©</option>
                        <option value="energetic">‡ÆÜ‡Æ±‡Øç‡Æ±‡Æ≤‡Øç üí™</option>
                    </select>
                    <label for="gratitudeInput" class="sr-only">‡Æ®‡ØÄ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ®‡Æ©‡Øç‡Æ±‡Æø‡ÆØ‡ØÅ‡Æ≥‡Øç‡Æ≥ ‡Æí‡Æ∞‡ØÅ ‡Æµ‡Æø‡Æ∑‡ÆØ‡Æ§‡Øç‡Æ§‡Øà ‡Æé‡Æ¥‡ØÅ‡Æ§‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç</label>
                    <textarea id="gratitudeInput" class="input-field min-h-[100px]" placeholder="‡Æ®‡ØÄ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ®‡Æ©‡Øç‡Æ±‡Æø‡ÆØ‡ØÅ‡Æ≥‡Øç‡Æ≥ ‡Æí‡Æ∞‡ØÅ ‡Æµ‡Æø‡Æ∑‡ÆØ‡Æ§‡Øç‡Æ§‡Øà ‡Æé‡Æ¥‡ØÅ‡Æ§‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç..." aria-label="‡Æ®‡ØÄ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ®‡Æ©‡Øç‡Æ±‡Æø‡ÆØ‡ØÅ‡Æ≥‡Øç‡Æ≥ ‡Æí‡Æ∞‡ØÅ ‡Æµ‡Æø‡Æ∑‡ÆØ‡Æ§‡Øç‡Æ§‡Øà ‡Æé‡Æ¥‡ØÅ‡Æ§‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç"></textarea>
                </div>
                <button id="saveJournalEntryBtn" class="action-button mt-4"></button>
                <div id="journalEntriesOutput" class="result-box mt-4 text-left"></div>
                <button id="analyzeMoodJournalBtn" class="action-button mt-4">‚ú® <span data-label-key="analyzeMoodJournalBtn"></span></button>
                <div class="flex flex-wrap justify-center gap-4 mt-4">
                    <button id="moodAnalysisAiVoiceBtn" class="ai-voice-button mt-4" style="display: none;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-volume-2">
                            <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                            <path d="M19.07 4.93a10 10 0 0 1 0 14.14M23.31 1.69a16 16 0 0 1 0 20.62"></path>
                        </svg>
                    </button>
                    <select id="moodAnalysisTtsVoiceSelect" class="tts-voice-selector" style="display: none;" aria-label="Select Voice"></select>
                </div>
                <div id="moodAnalysisOutput" class="result-box mt-4 text-left" aria-live="polite"></div>
            </div>

            <div id="localTipsSection" class="feature-section">
                <button class="back-button" data-target="allFeatureIconsContainer">‚Üê <span data-label-key="backToFeatures"></span></button>
                <h2 id="localTipsSectionTitle" class="text-2xl font-semibold text-gray-700 mb-4 mt-4"></h2>
                <p id="localTipsDescription" class="text-gray-600 mb-4 text-lg"></p>
                <div class="input-wrapper mb-4"> <!-- Nested input-wrapper for mic -->
                    <input type="text" id="localTipCategory" class="input-field" aria-label="‡Æâ‡Æ§‡Æµ‡Æø‡Æï‡Øç‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡ØÅ ‡Æµ‡Æï‡Øà‡ÆØ‡Øà ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç" placeholder="‡Æé.‡Æï‡Ææ. ‡ÆÆ‡Æû‡Øç‡Æö‡Æ≥‡Øç, ‡ÆÆ‡ØÅ‡Æ∞‡ØÅ‡Æô‡Øç‡Æï‡Øà, ‡Æ§‡Æø‡ÆØ‡Ææ‡Æ©‡ÆÆ‡Øç...">
                    <button id="localTipMicBtn" class="mic-button" title="‡Æâ‡Æ§‡Æµ‡Æø‡Æï‡Øç‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡ØÅ ‡Æµ‡Æï‡Øà‡ÆØ‡Øà ‡Æ™‡Øá‡Æö‡Æµ‡ØÅ‡ÆÆ‡Øç" aria-label="‡Æâ‡Æ§‡Æµ‡Æø‡Æï‡Øç‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡ØÅ ‡Æµ‡Æï‡Øà‡ÆØ‡Øà‡Æ™‡Øç ‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡Æµ‡ØÅ‡ÆÆ‡Øç">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-mic">
                            <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path>
                            <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                            <line x1="12" y1="19" y2="23"></line>
                            <line x1="8" y1="23" x2="16" y2="23"></line>
                        </svg>
                    </button>
                    <div id="localTipCategoryDropdown" class="dropdown-menu hidden mt-2 top-full left-0"></div>
                </div>
                <button id="getLocalTipBtn" class="generate-button">‚ú® <span data-label-key="getLocalTipBtn"></span></button>
                <div class="flex flex-wrap justify-center gap-4 mt-4">
                    <button id="localTipAiVoiceBtn" class="ai-voice-button" style="display: none;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-volume-2">
                            <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                            <path d="M19.07 4.93a10 10 0 0 1 0 14.14M23.31 1.69a16 16 0 0 1 0 20.62"></path>
                        </svg>
                    </button>
                    <select id="localTipTtsVoiceSelect" class="tts-voice-selector" style="display: none;" aria-label="Select Voice"></select>
                </div>
                <div id="localTipOutput" class="result-box" aria-live="polite"></div>
            </div>

            <div id="mealPlanSection" class="feature-section">
                <button class="back-button" data-target="allFeatureIconsContainer">‚Üê <span data-label-key="backToFeatures"></span></button>
                <h2 id="mealPlanSectionTitle" class="text-2xl font-semibold text-gray-700 mb-4 mt-4"></h2>
                <p id="mealPlanDescription" class="text-gray-600 mb-4 text-lg"></p>
                <div class="input-wrapper mb-4">
                    <input type="text" id="dietaryPreferences" class="input-field" aria-label="‡Æâ‡Æ£‡Æµ‡ØÅ ‡Æµ‡Æø‡Æ∞‡ØÅ‡Æ™‡Øç‡Æ™‡Æô‡Øç‡Æï‡Æ≥‡Øà ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç" placeholder="‡Æé.‡Æï‡Ææ. ‡Æö‡Øà‡Æµ ‡Æâ‡Æ£‡Æµ‡ØÅ, ‡Æï‡ØÅ‡Æ±‡Øà‡Æ®‡Øç‡Æ§ ‡Æï‡Ææ‡Æ∞‡Øç‡Æ™‡Øç...">
                    <button id="dietaryPreferencesMicBtn" class="mic-button" title="‡Æâ‡Æ£‡Æµ‡ØÅ ‡Æµ‡Æø‡Æ∞‡ØÅ‡Æ™‡Øç‡Æ™‡Æô‡Øç‡Æï‡Æ≥‡Øà ‡Æ™‡Øá‡Æö‡Æµ‡ØÅ‡ÆÆ‡Øç" aria-label="‡Æâ‡Æ£‡Æµ‡ØÅ ‡Æµ‡Æø‡Æ∞‡ØÅ‡Æ™‡Øç‡Æ™‡Æô‡Øç‡Æï‡Æ≥‡Øà‡Æ™‡Øç ‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡Æµ‡ØÅ‡ÆÆ‡Øç">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-mic">
                            <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path>
                            <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                            <line x1="12" y1="19" y2="23"></line>
                            <line x1="8" y1="23" x2="16" y2="23"></line>
                        </svg>
                    </button>
                </div>
                <button id="generateMealPlanBtn" class="generate-button">‚ú® <span data-label-key="generateMealPlanBtn"></span></button>
                <div class="flex flex-wrap justify-center gap-4 mt-4">
                    <button id="mealPlanAiVoiceBtn" class="ai-voice-button" style="display: none;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-volume-2">
                            <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                            <path d="M19.07 4.93a10 10 0 0 1 0 14.14M23.31 1.69a16 16 0 0 1 0 20.62"></path>
                        </svg>
                    </button>
                    <select id="mealPlanTtsVoiceSelect" class="tts-voice-selector" style="display: none;" aria-label="Select Voice"></select>
                </div>
                <div id="mealPlanOutput" class="result-box" aria-live="polite"></div>
            </div>

            <div id="moodAnalysisSection" class="feature-section">
                <button class="back-button" data-target="allFeatureIconsContainer">‚Üê <span data-label-key="backToFeatures"></span></button>
                <h2 id="moodAnalysisSectionTitle" class="text-2xl font-semibold text-gray-700 mb-4 mt-4"></h2>
                <p id="moodAnalysisDescription" class="text-gray-600 mb-4 text-lg"></p>
                <button id="triggerMoodAnalysisBtn" class="action-button">‚ú® <span data-label-key="triggerMoodAnalysisBtn"></span></button>
                <div class="flex flex-wrap justify-center gap-4 mt-4">
                    <button id="moodAnalysisAiVoiceBtn" class="ai-voice-button" style="display: none;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-volume-2">
                            <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                            <path d="M19.07 4.93a10 10 0 0 1 0 14.14M23.31 1.69a16 16 0 0 1 0 20.62"></path>
                        </svg>
                    </button>
                    <select id="moodAnalysisTtsVoiceSelect" class="tts-voice-selector" style="display: none;" aria-label="Select Voice"></select>
                </div>
                <div id="moodAnalysisOutput" class="result-box" aria-live="polite"></div>
            </div>

            <div id="exerciseYogaSection" class="feature-section">
                <button class="back-button" data-target="allFeatureIconsContainer">‚Üê <span data-label-key="backToFeatures"></span></button>
                <h2 id="exerciseYogaSectionTitle" class="text-2xl font-semibold text-gray-700 mb-4 mt-4"></h2>
                <p id="exerciseYogaDescription" class="text-gray-600 mb-4 text-lg"></p>
                <div class="input-wrapper mb-4">
                    <input type="text" id="exerciseGoalInput" class="input-field" aria-label="‡Æâ‡Æü‡Æ±‡Øç‡Æ™‡ÆØ‡Æø‡Æ±‡Øç‡Æö‡Æø ‡Æá‡Æ≤‡Æï‡Øç‡Æï‡Øà ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç" placeholder="‡Æé.‡Æï‡Ææ. ‡Æé‡Æü‡Øà ‡Æï‡ØÅ‡Æ±‡Øà‡Æ™‡Øç‡Æ™‡ØÅ, ‡Æ®‡ØÜ‡Æï‡Æø‡Æ¥‡Øç‡Æµ‡ØÅ‡Æ§‡Øç‡Æ§‡Æ©‡Øç‡ÆÆ‡Øà...">
                    <button id="exerciseGoalMicBtn" class="mic-button" title="‡Æâ‡Æü‡Æ±‡Øç‡Æ™‡ÆØ‡Æø‡Æ±‡Øç‡Æö‡Æø ‡Æá‡Æ≤‡Æï‡Øç‡Æï‡Øà ‡Æ™‡Øá‡Æö‡Æµ‡ØÅ‡ÆÆ‡Øç" aria-label="‡Æâ‡Æü‡Æ±‡Øç‡Æ™‡ÆØ‡Æø‡Æ±‡Øç‡Æö‡Æø ‡Æá‡Æ≤‡Æï‡Øç‡Æï‡Øà‡Æ™‡Øç ‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡Æµ‡ØÅ‡ÆÆ‡Øç">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-mic">
                            <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path>
                            <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                            <line x1="12" y1="19" y2="23"></line>
                            <line x1="8" y1="23" x2="16" y2="23"></line>
                        </svg>
                    </button>
                </div>
                <button id="generateExercisePlanBtn" class="generate-button">‚ú® <span data-label-key="generateExercisePlanBtn"></span></button>
                <div class="flex flex-wrap justify-center gap-4 mt-4">
                    <button id="exercisePlanAiVoiceBtn" class="ai-voice-button" style="display: none;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-volume-2">
                            <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                            <path d="M19.07 4.93a10 10 0 0 1 0 14.14M23.31 1.69a16 16 0 0 1 0 20.62"></path>
                        </svg>
                    </button>
                    <select id="exercisePlanTtsVoiceSelect" class="tts-voice-selector" style="display: none;" aria-label="Select Voice"></select>
                </div>
                <div id="exercisePlanOutput" class="result-box" aria-live="polite"></div>
            </div>

            <div id="diseasePreventionSection" class="feature-section">
                <button class="back-button" data-target="allFeatureIconsContainer">‚Üê <span data-label-key="backToFeatures"></span></button>
                <h2 id="diseasePreventionSectionTitle" class="text-2xl font-semibold text-gray-700 mb-4 mt-4"></h2>
                <p id="diseasePreventionDescription" class="text-gray-600 mb-4 text-lg"></p>
                <div class="input-wrapper mb-4">
                    <input type="text" id="diseaseQueryInput" class="input-field" aria-label="‡Æ®‡Øã‡ÆØ‡Øç ‡ÆÖ‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ ‡Æ§‡Æü‡ØÅ‡Æ™‡Øç‡Æ™‡ØÅ ‡Æ™‡Æ±‡Øç‡Æ±‡Æø ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç" placeholder="‡Æé.‡Æï‡Ææ. ‡Æ®‡ØÄ‡Æ∞‡Æø‡Æ¥‡Æø‡Æµ‡ØÅ ‡Æ§‡Æü‡ØÅ‡Æ™‡Øç‡Æ™‡ØÅ, ‡Æâ‡ÆØ‡Æ∞‡Øç ‡Æá‡Æ∞‡Æ§‡Øç‡Æ§ ‡ÆÖ‡Æ¥‡ØÅ‡Æ§‡Øç‡Æ§‡ÆÆ‡Øç...">
                    <button id="diseaseQueryMicBtn" class="mic-button" title="‡Æ®‡Øã‡ÆØ‡Øç ‡ÆÖ‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ ‡Æ§‡Æü‡ØÅ‡Æ™‡Øç‡Æ™‡ØÅ ‡Æ™‡Æ±‡Øç‡Æ±‡Æø ‡Æ™‡Øá‡Æö‡Æµ‡ØÅ‡ÆÆ‡Øç" aria-label="‡Æ®‡Øã‡ÆØ‡Øç ‡ÆÖ‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ ‡Æ§‡Æü‡ØÅ‡Æ™‡Øç‡Æ™‡ØÅ ‡Æ™‡Æ±‡Øç‡Æ±‡Æø ‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡Æµ‡ØÅ‡ÆÆ‡Øç">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-mic">
                            <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path>
                            <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                            <line x1="12" y1="19" y2="23"></line>
                            <line x1="8" y1="23" x2="16" y2="23"></line>
                        </svg>
                    </button>
                </div>
                <button id="getPreventionInfoBtn" class="generate-button">‚ú® <span data-label-key="getPreventionInfoBtn"></span></button>
                <div class="flex flex-wrap justify-center gap-4 mt-4">
                    <button id="preventionInfoAiVoiceBtn" class="ai-voice-button" style="display: none;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-volume-2">
                            <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                            <path d="M19.07 4.93a10 10 0 0 1 0 14.14M23.31 1.69a16 16 0 0 1 0 20.62"></path>
                        </svg>
                    </button>
                    <select id="preventionInfoTtsVoiceSelect" class="tts-voice-selector" style="display: none;" aria-label="Select Voice"></select>
                </div>
                <div id="preventionInfoOutput" class="result-box" aria-live="polite"></div>
            </div>

            <div id="wellnessChallengeSection" class="feature-section">
                <button class="back-button" data-target="allFeatureIconsContainer">‚Üê <span data-label-key="backToFeatures"></span></button>
                <h2 id="wellnessChallengeSectionTitle" class="text-2xl font-semibold text-gray-700 mb-4 mt-4"></h2>
                <p id="wellnessChallengeDescription" class="text-gray-600 mb-4 text-lg"></p>
                <div class="input-wrapper mb-4">
                    <input type="text" id="challengeGoalInput" class="input-field" aria-label="‡Æö‡Æµ‡Ææ‡Æ≤‡Øç ‡Æá‡Æ≤‡Æï‡Øç‡Æï‡Øà ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç" placeholder="‡Æé.‡Æï‡Ææ. 30 ‡Æ®‡Ææ‡Æ≥‡Øç ‡Æ®‡Æü‡Øà‡Æ™‡ÆØ‡Æø‡Æ±‡Øç‡Æö‡Æø ‡Æö‡Æµ‡Ææ‡Æ≤‡Øç, ‡Æ®‡ØÄ‡Æ∞‡Øç ‡Æö‡Æµ‡Ææ‡Æ≤‡Øç...">
                    <button id="challengeGoalMicBtn" class="mic-button" title="‡Æö‡Æµ‡Ææ‡Æ≤‡Øç ‡Æá‡Æ≤‡Æï‡Øç‡Æï‡Øà ‡Æ™‡Øá‡Æö‡Æµ‡ØÅ‡ÆÆ‡Øç" aria-label="‡Æö‡Æµ‡Ææ‡Æ≤‡Øç ‡Æá‡Æ≤‡Æï‡Øç‡Æï‡Øà‡Æ™‡Øç ‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡Æµ‡ØÅ‡ÆÆ‡Øç">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-mic">
                            <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path>
                            <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                            <line x1="12" y1="19" y2="23"></line>
                            <line x1="8" y1="23" x2="16" y2="23"></line>
                        </svg>
                    </button>
                </div>
                <button id="generateChallengeBtn" class="generate-button">‚ú® <span data-label-key="generateChallengeBtn"></span></button>
                <div class="flex flex-wrap justify-center gap-4 mt-4">
                    <button id="challengeAiVoiceBtn" class="ai-voice-button" style="display: none;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-volume-2">
                            <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                            <path d="M19.07 4.93a10 10 0 0 1 0 14.14M23.31 1.69a16 16 0 0 1 0 20.62"></path>
                        </svg>
                    </button>
                    <select id="challengeTtsVoiceSelect" class="tts-voice-selector" style="display: none;" aria-label="Select Voice"></select>
                </div>
                <div id="challengeOutput" class="result-box" aria-live="polite"></div>
            </div>

            <div id="medicationReminderSection" class="feature-section">
                <button class="back-button" data-target="allFeatureIconsContainer">‚Üê <span data-label-key="backToFeatures"></span></button>
                <h2 id="medicationReminderSectionTitle" class="text-2xl font-semibold text-gray-700 mb-4 mt-4"></h2>
                <div class="input-wrapper flex-col items-stretch">
                    <label for="medicationName" class="sr-only">‡ÆÆ‡Æ∞‡ØÅ‡Æ®‡Øç‡Æ§‡Æø‡Æ©‡Øç ‡Æ™‡ØÜ‡ÆØ‡Æ∞‡Øç</label>
                    <input type="text" id="medicationName" class="input-field mb-4" placeholder="‡ÆÆ‡Æ∞‡ØÅ‡Æ®‡Øç‡Æ§‡Æø‡Æ©‡Øç ‡Æ™‡ØÜ‡ÆØ‡Æ∞‡Øç" aria-label="‡ÆÆ‡Æ∞‡ØÅ‡Æ®‡Øç‡Æ§‡Æø‡Æ©‡Øç ‡Æ™‡ØÜ‡ÆØ‡Æ∞‡Øç">
                    <label for="medicationTime" class="sr-only">‡Æ®‡Øá‡Æ∞‡ÆÆ‡Øç</label>
                    <input type="time" id="medicationTime" class="input-field mb-4" aria-label="‡Æ®‡Øá‡Æ∞‡ÆÆ‡Øç">
                    <label for="medicationFrequency" class="sr-only">‡ÆÖ‡Æ§‡Æø‡Æ∞‡Øç‡Æµ‡ØÜ‡Æ£‡Øç</label>
                    <input type="text" id="medicationFrequency" class="input-field mb-4" placeholder="‡ÆÖ‡Æ§‡Æø‡Æ∞‡Øç‡Æµ‡ØÜ‡Æ£‡Øç (‡Æé.‡Æï‡Ææ. ‡Æ§‡Æø‡Æ©‡ÆÆ‡ØÅ‡ÆÆ‡Øç, ‡Æµ‡Ææ‡Æ∞‡Ææ‡Æ®‡Øç‡Æ§‡Æø‡Æ∞‡ÆÆ‡Øç)" aria-label="‡ÆÖ‡Æ§‡Æø‡Æ∞‡Øç‡Æµ‡ØÜ‡Æ£‡Øç">
                </div>
                <button id="addMedicationReminderBtn" class="action-button mt-4"></button>
                <div id="medicationRemindersList" class="result-box mt-4 text-left"></div>
            </div>

            <div id="bodyPainMappingSection" class="feature-section">
                <button class="back-button" data-target="allFeatureIconsContainer">‚Üê <span data-label-key="backToFeatures"></span></button>
                <h2 id="bodyPainMappingSectionTitle" class="text-2xl font-semibold text-gray-700 mb-4 mt-4"></h2>
                <div class="body-map-container" id="bodyMapContainer">
                    <img src="https://placehold.co/300x500/ADD8E6/000000?text=Body+Map" alt="Human Body Map" class="body-map-image">
                </div>
                <p id="painPointInstructions" class="text-gray-600 mt-4 mb-4 text-lg"></p>
                <div class="input-wrapper mb-4">
                    <input type="text" id="painDescriptionInput" class="input-field" placeholder="‡Æµ‡Æ≤‡Æø ‡Æµ‡Æø‡Æ≥‡Æï‡Øç‡Æï‡ÆÆ‡Øç (‡Æé.‡Æï‡Ææ. ‡Æï‡ØÇ‡Æ∞‡Øç‡ÆÆ‡Øà‡ÆØ‡Ææ‡Æ© ‡Æµ‡Æ≤‡Æø, ‡ÆÆ‡Æ®‡Øç‡Æ§‡ÆÆ‡Ææ‡Æ© ‡Æµ‡Æ≤‡Æø)" aria-label="‡Æµ‡Æ≤‡Æø ‡Æµ‡Æø‡Æ≥‡Æï‡Øç‡Æï‡ÆÆ‡Øç">
                </div>
                <button id="addPainPointBtn" class="action-button"></button>
                <button id="clearPainPointsBtn" class="action-button"></button>
                <div id="painPointsList" class="result-box mt-4 text-left"></div>
            </div>

            <div id="firstAidEmergencySection" class="feature-section">
                <button class="back-button" data-target="allFeatureIconsContainer">‚Üê <span data-label-key="backToFeatures"></span></button>
                <h2 id="firstAidEmergencySectionTitle" class="text-2xl font-semibold text-gray-700 mb-4 mt-4"></h2>
                <p id="firstAidEmergencyDescription" class="text-gray-600 mb-4 text-lg"></p>
                <div class="input-wrapper mb-4">
                    <input type="text" id="emergencyQueryInput" class="input-field" aria-label="‡ÆÖ‡Æµ‡Æö‡Æ∞ ‡Æï‡Øá‡Æ≥‡Øç‡Æµ‡Æø ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç" placeholder="‡Æé.‡Æï‡Ææ. ‡ÆÆ‡ØÇ‡Æö‡Øç‡Æö‡ØÅ‡Æ§‡Øç ‡Æ§‡Æø‡Æ£‡Æ±‡Æ≤‡Øç, ‡Æ§‡ØÄ‡Æï‡Øç‡Æï‡Ææ‡ÆØ‡ÆÆ‡Øç...">
                    <button id="emergencyQueryMicBtn" class="mic-button" title="‡ÆÖ‡Æµ‡Æö‡Æ∞ ‡Æï‡Øá‡Æ≥‡Øç‡Æµ‡Æø‡ÆØ‡Øà‡Æ™‡Øç ‡Æ™‡Øá‡Æö‡Æµ‡ØÅ‡ÆÆ‡Øç" aria-label="‡ÆÖ‡Æµ‡Æö‡Æ∞ ‡Æï‡Øá‡Æ≥‡Øç‡Æµ‡Æø‡ÆØ‡Øà‡Æ™‡Øç ‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡Æµ‡ØÅ‡ÆÆ‡Øç">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-mic">
                            <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path>
                            <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                            <line x1="12" y1="19" y2="23"></line>
                            <line x1="8" y1="23" x2="16" y2="23"></line>
                        </svg>
                    </button>
                </div>
                <button id="getEmergencyAdviceBtn" class="generate-button">‚ú® <span data-label-key="getEmergencyAdviceBtn"></span></button>
                <div class="flex flex-wrap justify-center gap-4 mt-4">
                    <button id="emergencyAdviceAiVoiceBtn" class="ai-voice-button" style="display: none;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-volume-2">
                            <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                            <path d="M19.07 4.93a10 10 0 0 1 0 14.14M23.31 1.69a16 16 0 0 1 0 20.62"></path>
                        </svg>
                    </button>
                    <select id="emergencyAdviceTtsVoiceSelect" class="tts-voice-selector" style="display: none;" aria-label="Select Voice"></select>
                </div>
                <div id="emergencyAdviceOutput" class="result-box" aria-live="polite"></div>
            </div>

            <!-- New Symptom Checker Section -->
            <div id="symptomCheckerSection" class="feature-section">
                <button class="back-button" data-target="allFeatureIconsContainer">‚Üê <span data-label-key="backToFeatures"></span></button>
                <h2 id="symptomCheckerSectionTitle" class="text-2xl font-semibold text-gray-700 mb-4 mt-4"></h2>
                <p id="symptomCheckerDescription" class="text-gray-600 mb-4 text-lg"></p>
                <div class="input-wrapper mb-4">
                    <textarea id="symptomInput" class="input-field min-h-[100px]" placeholder="‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÖ‡Æ±‡Æø‡Æï‡ØÅ‡Æ±‡Æø‡Æï‡Æ≥‡Øà ‡ÆÖ‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ ‡ÆÜ‡Æ∞‡Øã‡Æï‡Øç‡Æï‡Æø‡ÆØ ‡Æï‡Øá‡Æ≥‡Øç‡Æµ‡Æø‡Æï‡Æ≥‡Øà ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç..." aria-label="‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÖ‡Æ±‡Æø‡Æï‡ØÅ‡Æ±‡Æø‡Æï‡Æ≥‡Øà ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç"></textarea>
                    <button id="symptomMicBtn" class="mic-button" title="‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÖ‡Æ±‡Æø‡Æï‡ØÅ‡Æ±‡Æø‡Æï‡Æ≥‡Øà ‡Æ™‡Øá‡Æö‡Æµ‡ØÅ‡ÆÆ‡Øç" aria-label="‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÖ‡Æ±‡Æø‡Æï‡ØÅ‡Æ±‡Æø‡Æï‡Æ≥‡Øà‡Æ™‡Øç ‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡Æµ‡ØÅ‡ÆÆ‡Øç">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-mic">
                            <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path>
                            <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                            <line x1="12" y1="19" y2="23"></line>
                            <line x1="8" y1="23" x2="16" y2="23"></line>
                        </svg>
                    </button>
                </div>
                <button id="generateSymptomAdviceBtn" class="generate-button">‚ú® <span data-label-key="generateSymptomAdviceBtn"></span></button>
                <div class="flex flex-wrap justify-center gap-4 mt-4">
                    <button id="symptomAiVoiceBtn" class="ai-voice-button" style="display: none;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-volume-2">
                            <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                            <path d="M19.07 4.93a10 10 0 0 1 0 14.14M23.31 1.69a16 16 0 0 1 0 20.62"></path>
                        </svg>
                    </button>
                    <select id="symptomTtsVoiceSelect" class="tts-voice-selector" style="display: none;" aria-label="Select Voice"></select>
                </div>
                <div id="symptomResultOutput" class="result-box" aria-live="polite"></div>
            </div>

        </div>
    </div>

    <!-- Alarm Modal -->
    <div id="alarmModal" class="alarm-modal">
        <div class="alarm-modal-content">
            <h3 id="alarmModalTitle"></h3>
            <p id="alarmModalMessage"></p>
            <button id="closeAlarmModalBtn"></button>
        </div>
    </div>

    <script>
        // Global variables for API Key and App ID (if needed for other services)
        const apiKey = ""; // If you want to use models other than gemini-2.0-flash or imagen-3.0-generate-002, provide an API key here. Otherwise, leave this as-is.
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';

        // Translations object
        const translations = {
            'ta': {
                mainTitle: "‡ÆÜ‡Æ∞‡Øã‡Æï‡Øç‡Æï‡Æø‡ÆØ ‡Æ®‡Æ£‡Øç‡Æ™‡Æ©‡Øç",
                descriptionText: "‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÜ‡Æ∞‡Øã‡Æï‡Øç‡Æï‡Æø‡ÆØ ‡Æá‡Æ≤‡Æï‡Øç‡Æï‡ØÅ‡Æï‡Æ≥‡Øà ‡ÆÖ‡Æü‡Øà‡ÆØ‡Æµ‡ØÅ‡ÆÆ‡Øç, ‡ÆÜ‡Æ∞‡Øã‡Æï‡Øç‡Æï‡Æø‡ÆØ‡ÆÆ‡Ææ‡Æ© ‡Æµ‡Ææ‡Æ¥‡Øç‡Æï‡Øç‡Æï‡Øà ‡ÆÆ‡ØÅ‡Æ±‡Øà‡ÆØ‡Øà ‡Æµ‡Ææ‡Æ¥‡Æµ‡ØÅ‡ÆÆ‡Øç ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡ØÅ‡Æï‡Øç‡Æï‡ØÅ ‡Æâ‡Æ§‡Æµ‡ØÅ‡ÆÆ‡Øç ‡Æí‡Æ∞‡ØÅ ‡Æ§‡Æ©‡Æø‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü AI ‡Æµ‡Æ¥‡Æø‡Æï‡Ææ‡Æü‡Øç‡Æü‡Æø.",
                tipSectionTitle: "‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÜ‡Æ∞‡Øã‡Æï‡Øç‡Æï‡Æø‡ÆØ ‡Æá‡Æ≤‡Æï‡Øç‡Æï‡Øà ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç",
                generateBtn: "‡ÆÜ‡Æ∞‡Øã‡Æï‡Øç‡Æï‡Æø‡ÆØ ‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡ØÅ‡Æï‡Æ≥‡Øà ‡Æâ‡Æ∞‡ØÅ‡Æµ‡Ææ‡Æï‡Øç‡Æï‡ØÅ",
                loadingText: "‡Æâ‡Æ∞‡ØÅ‡Æµ‡Ææ‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡Æï‡Æø‡Æ±‡Æ§‡ØÅ...",
                aiVoiceBtn: "AI ‡Æï‡ØÅ‡Æ∞‡Æ≤‡Øà‡Æï‡Øç ‡Æï‡Øá‡Æü‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç",
                showFeaturesLabel: "‡ÆÖ‡ÆÆ‡Øç‡Æö‡Æô‡Øç‡Æï‡Æ≥‡Øç",
                backToMain: "‚Üê ‡ÆÆ‡ØÅ‡Æï‡Æ™‡Øç‡Æ™‡ØÅ‡Æï‡Øç‡Æï‡ØÅ‡Æ§‡Øç ‡Æ§‡Æø‡Æ∞‡ØÅ‡ÆÆ‡Øç‡Æ™‡ØÅ",
                backToFeatures: "‚Üê ‡ÆÖ‡ÆÆ‡Øç‡Æö‡Æô‡Øç‡Æï‡Æ≥‡ØÅ‡Æï‡Øç‡Æï‡ØÅ‡Æ§‡Øç ‡Æ§‡Æø‡Æ∞‡ØÅ‡ÆÆ‡Øç‡Æ™‡ØÅ",
                featuresPageTitle: "‡ÆÜ‡Æ∞‡Øã‡Æï‡Øç‡Æï‡Æø‡ÆØ ‡Æ®‡Æ£‡Øç‡Æ™‡Æ©‡Øç ‡ÆÖ‡ÆÆ‡Øç‡Æö‡Æô‡Øç‡Æï‡Æ≥‡Øç",
                stepTrackerLabel: "‡Æ™‡Æü‡Æø ‡Æü‡Æø‡Æ∞‡Ææ‡Æï‡Øç‡Æï‡Æ∞‡Øç",
                heartRateTrackerLabel: "‡Æá‡Æ§‡ÆØ‡Æ§‡Øç ‡Æ§‡ØÅ‡Æü‡Æø‡Æ™‡Øç‡Æ™‡ØÅ ‡Æü‡Æø‡Æ∞‡Ææ‡Æï‡Øç‡Æï‡Æ∞‡Øç",
                waterTrackerLabel: "‡Æ§‡Æ£‡Øç‡Æ£‡ØÄ‡Æ∞‡Øç ‡Æü‡Æø‡Æ∞‡Ææ‡Æï‡Øç‡Æï‡Æ∞‡Øç",
                journalLabel: "‡Æ§‡Æø‡Æ©‡Æö‡Æ∞‡Æø ‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡ØÅ",
                localTipsLabel: "‡Æâ‡Æ≥‡Øç‡Æ≥‡ØÇ‡Æ∞‡Øç ‡ÆÜ‡Æ∞‡Øã‡Æï‡Øç‡Æï‡Æø‡ÆØ ‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡ØÅ‡Æï‡Æ≥‡Øç",
                mealPlanLabel: "‡Æâ‡Æ£‡Æµ‡ØÅ‡Æ§‡Øç ‡Æ§‡Æø‡Æü‡Øç‡Æü‡Æ™‡Øç ‡Æ™‡Æ∞‡Æø‡Æ®‡Øç‡Æ§‡ØÅ‡Æ∞‡Øà‡Æï‡Æ≥‡Øç",
                moodAnalysisLabel: "‡Æâ‡Æ£‡Æ∞‡Øç‡Æµ‡ØÅ‡Æ™‡Øç ‡Æ™‡Æ§‡Æø‡Æµ‡Øá‡Æü‡ØÅ ‡Æ™‡Æï‡ØÅ‡Æ™‡Øç‡Æ™‡Ææ‡ÆØ‡Øç‡Æµ‡ØÅ",
                exerciseYogaLabel: "‡Æâ‡Æü‡Æ±‡Øç‡Æ™‡ÆØ‡Æø‡Æ±‡Øç‡Æö‡Æø & ‡ÆØ‡Øã‡Æï‡Ææ",
                diseasePreventionLabel: "‡Æ®‡Øã‡ÆØ‡Øç ‡Æ§‡Æü‡ØÅ‡Æ™‡Øç‡Æ™‡ØÅ",
                wellnessChallengeLabel: "‡ÆÜ‡Æ∞‡Øã‡Æï‡Øç‡Æï‡Æø‡ÆØ ‡Æö‡Æµ‡Ææ‡Æ≤‡Øç‡Æï‡Æ≥‡Øç",
                medicationReminderLabel: "‡ÆÆ‡Æ∞‡ØÅ‡Æ®‡Øç‡Æ§‡ØÅ ‡Æ®‡Æø‡Æ©‡Øà‡Æµ‡ØÇ‡Æü‡Øç‡Æü‡Æ≤‡Øç",
                bodyPainMappingLabel: "‡Æâ‡Æü‡Æ≤‡Øç ‡Æµ‡Æ≤‡Æø ‡ÆÆ‡Øá‡Æ™‡Øç‡Æ™‡Æø‡Æô‡Øç",
                firstAidEmergencyLabel: "‡ÆÆ‡ØÅ‡Æ§‡Æ≤‡ØÅ‡Æ§‡Æµ‡Æø & ‡ÆÖ‡Æµ‡Æö‡Æ∞ ‡Æâ‡Æ§‡Æµ‡Æø",
                symptomCheckerLabel: "‡ÆÖ‡Æ±‡Æø‡Æï‡ØÅ‡Æ±‡Æø ‡Æö‡Æ∞‡Æø‡Æ™‡Ææ‡Æ∞‡Øç‡Æ™‡Øç‡Æ™‡ØÅ", // New
                symptomCheckerSectionTitle: "‡ÆÖ‡Æ±‡Æø‡Æï‡ØÅ‡Æ±‡Æø ‡Æö‡Æ∞‡Æø‡Æ™‡Ææ‡Æ∞‡Øç‡Æ™‡Øç‡Æ™‡ØÅ", // New
                symptomCheckerDescription: "‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÖ‡Æ±‡Æø‡Æï‡ØÅ‡Æ±‡Æø‡Æï‡Æ≥‡Øà ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç ‡ÆÖ‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ ‡Æ™‡Øä‡Æ§‡ØÅ‡Æµ‡Ææ‡Æ© ‡ÆÜ‡Æ∞‡Øã‡Æï‡Øç‡Æï‡Æø‡ÆØ ‡Æï‡Øá‡Æ≥‡Øç‡Æµ‡Æø‡Æï‡Æ≥‡Øà‡Æï‡Øç ‡Æï‡Øá‡Æü‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç. ‡Æú‡ØÜ‡ÆÆ‡Æø‡Æ©‡Æø AI ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡ØÅ‡Æï‡Øç‡Æï‡ØÅ ‡Æö‡Ææ‡Æ§‡Øç‡Æ§‡Æø‡ÆØ‡ÆÆ‡Ææ‡Æ© ‡Æ§‡Æï‡Æµ‡Æ≤‡Øç‡Æï‡Æ≥‡Øà‡ÆØ‡ØÅ‡ÆÆ‡Øç ‡Æ™‡Øä‡Æ§‡ØÅ‡Æµ‡Ææ‡Æ© ‡ÆÜ‡Æ≤‡Øã‡Æö‡Æ©‡Øà‡Æï‡Æ≥‡Øà‡ÆØ‡ØÅ‡ÆÆ‡Øç ‡Æµ‡Æ¥‡Æô‡Øç‡Æï‡ØÅ‡ÆÆ‡Øç. ‡Æá‡Æ§‡ØÅ ‡ÆÆ‡Æ∞‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ‡Æµ ‡ÆÜ‡Æ≤‡Øã‡Æö‡Æ©‡Øà‡Æï‡Øç‡Æï‡ØÅ ‡ÆÆ‡Ææ‡Æ±‡Øç‡Æ±‡Ææ‡Æï‡Ææ‡Æ§‡ØÅ.", // New
                symptomInputPlaceholder: "‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÖ‡Æ±‡Æø‡Æï‡ØÅ‡Æ±‡Æø‡Æï‡Æ≥‡Øà ‡ÆÖ‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ ‡ÆÜ‡Æ∞‡Øã‡Æï‡Øç‡Æï‡Æø‡ÆØ ‡Æï‡Øá‡Æ≥‡Øç‡Æµ‡Æø‡Æï‡Æ≥‡Øà ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç...", // New
                generateSymptomAdviceBtn: "‡ÆÜ‡Æ≤‡Øã‡Æö‡Æ©‡Øà‡ÆØ‡Øà‡Æ™‡Øç ‡Æ™‡ØÜ‡Æ±‡ØÅ", // New
                symptomLoadingText: "‡ÆÖ‡Æ±‡Æø‡Æï‡ØÅ‡Æ±‡Æø‡Æï‡Æ≥‡Øà ‡Æ™‡Æï‡ØÅ‡Æ™‡Øç‡Æ™‡Ææ‡ÆØ‡Øç‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡Æï‡Æø‡Æ±‡Æ§‡ØÅ...", // New

                // Existing feature titles and descriptions (updated for clarity)
                stepSectionTitle: "‡Æ™‡Æü‡Æø ‡Æü‡Æø‡Æ∞‡Ææ‡Æï‡Øç‡Æï‡Æ∞‡Øç",
                addOneStepBtn: "+1 ‡Æ™‡Æü‡Æø",
                addSingleStepBtn: "+1 ‡Æ™‡Æü‡Æø",
                toggleTrackingBtn: "‡Æ§‡Øä‡Æü‡Æô‡Øç‡Æï‡ØÅ / ‡Æ®‡Æø‡Æ±‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ",
                resetStepsBtn: "‡ÆÆ‡ØÄ‡Æü‡Øç‡Æü‡ÆÆ‡Øà",
                heartRateSectionTitle: "‡Æá‡Æ§‡ÆØ‡Æ§‡Øç ‡Æ§‡ØÅ‡Æü‡Æø‡Æ™‡Øç‡Æ™‡ØÅ ‡Æü‡Æø‡Æ∞‡Ææ‡Æï‡Øç‡Æï‡Æ∞‡Øç",
                simulateHeartRateBtn: "‡Æá‡Æ§‡ÆØ‡Æ§‡Øç ‡Æ§‡ØÅ‡Æü‡Æø‡Æ™‡Øç‡Æ™‡Øà ‡Æâ‡Æ∞‡ØÅ‡Æµ‡Æï‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ",
                resetHeartRateBtn: "‡ÆÆ‡ØÄ‡Æü‡Øç‡Æü‡ÆÆ‡Øà",
                waterSectionTitle: "‡Æ§‡Æ£‡Øç‡Æ£‡ØÄ‡Æ∞‡Øç ‡Æü‡Æø‡Æ∞‡Ææ‡Æï‡Øç‡Æï‡Æ∞‡Øç",
                addWaterBtn: "+250 ‡ÆÆ‡Æø‡Æ≤‡Æø",
                resetWaterBtn: "‡ÆÆ‡ØÄ‡Æü‡Øç‡Æü‡ÆÆ‡Øà",
                journalSectionTitle: "‡ÆÆ‡Æ©‡Æ®‡Æø‡Æ≤‡Øà & ‡Æ®‡Æ©‡Øç‡Æ±‡Æø‡ÆØ‡ØÅ‡Æ£‡Æ∞‡Øç‡Æµ‡ØÅ ‡Æú‡Æ∞‡Øç‡Æ©‡Æ≤‡Øç",
                journalDescription: "‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÆ‡Æ©‡Æ®‡Æø‡Æ≤‡Øà‡ÆØ‡Øà‡ÆØ‡ØÅ‡ÆÆ‡Øç, ‡Æ®‡ØÄ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ®‡Æ©‡Øç‡Æ±‡Æø‡ÆØ‡ØÅ‡Æ≥‡Øç‡Æ≥ ‡Æµ‡Æø‡Æ∑‡ÆØ‡Æô‡Øç‡Æï‡Æ≥‡Øà‡ÆØ‡ØÅ‡ÆÆ‡Øç ‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç.",
                saveJournalEntryBtn: "‡Æ™‡Æ§‡Æø‡Æµ‡Øà‡Æö‡Øç ‡Æö‡Øá‡ÆÆ‡Æø",
                analyzeMoodJournalBtn: "‡ÆÆ‡Æ©‡Æ®‡Æø‡Æ≤‡Øà‡ÆØ‡Øà ‡Æ™‡Æï‡ØÅ‡Æ™‡Øç‡Æ™‡Ææ‡ÆØ‡Øç‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç",
                localTipsSectionTitle: "‡Æâ‡Æ≥‡Øç‡Æ≥‡ØÇ‡Æ∞‡Øç ‡ÆÜ‡Æ∞‡Øã‡Æï‡Øç‡Æï‡Æø‡ÆØ ‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡ØÅ‡Æï‡Æ≥‡Øç",
                localTipsDescription: "‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ™‡Æï‡ØÅ‡Æ§‡Æø‡Æï‡Øç‡Æï‡ØÅ ‡Æè‡Æ±‡Øç‡Æ± ‡ÆÜ‡Æ∞‡Øã‡Æï‡Øç‡Æï‡Æø‡ÆØ ‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡ØÅ‡Æï‡Æ≥‡Øà‡Æ™‡Øç ‡Æ™‡ØÜ‡Æ±‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç.",
                getLocalTipBtn: "‡Æâ‡Æ§‡Æµ‡Æø‡Æï‡Øç‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡Øà‡Æ™‡Øç ‡Æ™‡ØÜ‡Æ±‡ØÅ",
                mealPlanSectionTitle: "‡Æâ‡Æ£‡Æµ‡ØÅ‡Æ§‡Øç ‡Æ§‡Æø‡Æü‡Øç‡Æü‡Æ™‡Øç ‡Æ™‡Æ∞‡Æø‡Æ®‡Øç‡Æ§‡ØÅ‡Æ∞‡Øà‡Æï‡Æ≥‡Øç",
                mealPlanDescription: "‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æâ‡Æ£‡Æµ‡ØÅ ‡Æµ‡Æø‡Æ∞‡ØÅ‡Æ™‡Øç‡Æ™‡Æô‡Øç‡Æï‡Æ≥‡ØÅ‡Æï‡Øç‡Æï‡ØÅ ‡Æè‡Æ±‡Øç‡Æ™ ‡Æ§‡Æ©‡Æø‡Æ™‡Øç‡Æ™‡ÆØ‡Æ©‡Ææ‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü ‡Æâ‡Æ£‡Æµ‡ØÅ‡Æ§‡Øç ‡Æ§‡Æø‡Æü‡Øç‡Æü‡Æô‡Øç‡Æï‡Æ≥‡Øà‡Æ™‡Øç ‡Æ™‡ØÜ‡Æ±‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç.",
                generateMealPlanBtn: "‡Æâ‡Æ£‡Æµ‡ØÅ‡Æ§‡Øç ‡Æ§‡Æø‡Æü‡Øç‡Æü‡Æ§‡Øç‡Æ§‡Øà ‡Æâ‡Æ∞‡ØÅ‡Æµ‡Ææ‡Æï‡Øç‡Æï‡ØÅ",
                moodAnalysisSectionTitle: "‡Æâ‡Æ£‡Æ∞‡Øç‡Æµ‡ØÅ‡Æ™‡Øç ‡Æ™‡Æ§‡Æø‡Æµ‡Øá‡Æü‡ØÅ ‡Æ™‡Æï‡ØÅ‡Æ™‡Øç‡Æ™‡Ææ‡ÆØ‡Øç‡Æµ‡ØÅ",
                moodAnalysisDescription: "‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æú‡Æ∞‡Øç‡Æ©‡Æ≤‡Øç ‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ‡Æï‡Æ≥‡Æø‡Æ©‡Øç ‡ÆÖ‡Æü‡Æø‡Æ™‡Øç‡Æ™‡Æü‡Øà‡ÆØ‡Æø‡Æ≤‡Øç ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÆ‡Æ©‡Æ®‡Æø‡Æ≤‡Øà‡ÆØ‡Øà ‡Æ™‡Æï‡ØÅ‡Æ™‡Øç‡Æ™‡Ææ‡ÆØ‡Øç‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç.",
                triggerMoodAnalysisBtn: "‡Æ™‡Æï‡ØÅ‡Æ™‡Øç‡Æ™‡Ææ‡ÆØ‡Øç‡Æµ‡Øà‡Æ§‡Øç ‡Æ§‡ØÇ‡Æ£‡Øç‡Æü‡ØÅ",
                exerciseYogaSectionTitle: "‡Æâ‡Æü‡Æ±‡Øç‡Æ™‡ÆØ‡Æø‡Æ±‡Øç‡Æö‡Æø & ‡ÆØ‡Øã‡Æï‡Ææ",
                exerciseYogaDescription: "‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æá‡Æ≤‡Æï‡Øç‡Æï‡ØÅ‡Æï‡Æ≥‡ØÅ‡Æï‡Øç‡Æï‡ØÅ ‡Æè‡Æ±‡Øç‡Æ™ ‡Æâ‡Æü‡Æ±‡Øç‡Æ™‡ÆØ‡Æø‡Æ±‡Øç‡Æö‡Æø ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡ÆØ‡Øã‡Æï‡Ææ ‡Æ§‡Æø‡Æü‡Øç‡Æü‡Æô‡Øç‡Æï‡Æ≥‡Øà‡Æ™‡Øç ‡Æ™‡ØÜ‡Æ±‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç.",
                generateExercisePlanBtn: "‡Æ§‡Æø‡Æü‡Øç‡Æü‡Æ§‡Øç‡Æ§‡Øà ‡Æâ‡Æ∞‡ØÅ‡Æµ‡Ææ‡Æï‡Øç‡Æï‡ØÅ",
                diseasePreventionSectionTitle: "‡Æ®‡Øã‡ÆØ‡Øç ‡Æ§‡Æü‡ØÅ‡Æ™‡Øç‡Æ™‡ØÅ",
                diseasePreventionDescription: "‡Æ™‡Øä‡Æ§‡ØÅ‡Æµ‡Ææ‡Æ© ‡Æ®‡Øã‡ÆØ‡Øç‡Æï‡Æ≥‡Øà‡Æ§‡Øç ‡Æ§‡Æü‡ØÅ‡Æ™‡Øç‡Æ™‡Æ§‡Æ±‡Øç‡Æï‡Ææ‡Æ© ‡Æ§‡Æï‡Æµ‡Æ≤‡Øç‡Æï‡Æ≥‡Øà‡Æ™‡Øç ‡Æ™‡ØÜ‡Æ±‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç.",
                getPreventionInfoBtn: "‡Æ§‡Æï‡Æµ‡Æ≤‡Øà‡Æ™‡Øç ‡Æ™‡ØÜ‡Æ±‡ØÅ",
                wellnessChallengeSectionTitle: "‡ÆÜ‡Æ∞‡Øã‡Æï‡Øç‡Æï‡Æø‡ÆØ ‡Æö‡Æµ‡Ææ‡Æ≤‡Øç‡Æï‡Æ≥‡Øç",
                wellnessChallengeDescription: "‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÜ‡Æ∞‡Øã‡Æï‡Øç‡Æï‡Æø‡ÆØ‡Æ§‡Øç‡Æ§‡Øà ‡ÆÆ‡Øá‡ÆÆ‡Øç‡Æ™‡Æü‡ØÅ‡Æ§‡Øç‡Æ§ ‡Æö‡Æµ‡Ææ‡Æ≤‡Øç‡Æï‡Æ≥‡Øà‡Æ§‡Øç ‡Æ§‡Øä‡Æü‡Æô‡Øç‡Æï‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç.",
                generateChallengeBtn: "‡Æö‡Æµ‡Ææ‡Æ≤‡Øà ‡Æâ‡Æ∞‡ØÅ‡Æµ‡Ææ‡Æï‡Øç‡Æï‡ØÅ",
                medicationReminderLabel: "‡ÆÆ‡Æ∞‡ØÅ‡Æ®‡Øç‡Æ§‡ØÅ ‡Æ®‡Æø‡Æ©‡Øà‡Æµ‡ØÇ‡Æü‡Øç‡Æü‡Æ≤‡Øç",
                bodyPainMappingLabel: "‡Æâ‡Æü‡Æ≤‡Øç ‡Æµ‡Æ≤‡Æø ‡ÆÆ‡Øá‡Æ™‡Øç‡Æ™‡Æø‡Æô‡Øç",
                firstAidEmergencyLabel: "‡ÆÆ‡ØÅ‡Æ§‡Æ≤‡ØÅ‡Æ§‡Æµ‡Æø & ‡ÆÖ‡Æµ‡Æö‡Æ∞ ‡Æâ‡Æ§‡Æµ‡Æø",
                alarmModalTitle: "‡ÆÆ‡Æ∞‡ØÅ‡Æ®‡Øç‡Æ§‡ØÅ ‡Æ®‡Æø‡Æ©‡Øà‡Æµ‡ØÇ‡Æü‡Øç‡Æü‡Æ≤‡Øç",
                alarmModalMessage: "‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÆ‡Æ∞‡ØÅ‡Æ®‡Øç‡Æ§‡Øà ‡Æâ‡Æü‡Øç‡Æï‡Øä‡Æ≥‡Øç‡Æ≥ ‡Æµ‡Øá‡Æ£‡Øç‡Æü‡Æø‡ÆØ ‡Æ®‡Øá‡Æ∞‡ÆÆ‡Øç!",
                closeAlarmModalBtn: "‡Æö‡Æ∞‡Æø"
            },
            'en': {
                mainTitle: "Health Buddy",
                descriptionText: "Your personal AI guide to help you achieve your health goals and live a healthier lifestyle.",
                tipSectionTitle: "Enter your health goal",
                generateBtn: "Generate Health Tips",
                loadingText: "Generating...",
                aiVoiceBtn: "Listen to AI Voice",
                showFeaturesLabel: "Features",
                backToMain: "‚Üê Back to Home",
                backToFeatures: "‚Üê Back to Features",
                featuresPageTitle: "Health Buddy Features",
                stepTrackerLabel: "Step Tracker",
                heartRateTrackerLabel: "Heart Rate Tracker",
                waterTrackerLabel: "Water Tracker",
                journalLabel: "Daily Journal",
                localTipsLabel: "Local Health Tips",
                mealPlanLabel: "Meal Plan Suggestions",
                moodAnalysisLabel: "Mood Journal Analysis",
                exerciseYogaLabel: "Exercise & Yoga",
                diseasePreventionLabel: "Disease Prevention",
                wellnessChallengeLabel: "Wellness Challenges",
                medicationReminderLabel: "Medication Reminder",
                bodyPainMappingLabel: "Body Pain Mapping",
                firstAidEmergencyLabel: "First Aid & Emergency",
                symptomCheckerLabel: "Symptom Checker", // New
                symptomCheckerSectionTitle: "Symptom Checker", // New
                symptomCheckerDescription: "Enter your symptoms or general health questions. Gemini AI will provide potential information and general advice. This is not a substitute for medical advice.", // New
                symptomInputPlaceholder: "Enter your symptoms or health questions...", // New
                generateSymptomAdviceBtn: "Get Advice", // New
                symptomLoadingText: "Analyzing symptoms...", // New

                // Existing feature titles and descriptions
                stepSectionTitle: "Step Tracker",
                addOneStepBtn: "+1 Step",
                addSingleStepBtn: "+1 Step",
                toggleTrackingBtn: "Start / Stop",
                resetStepsBtn: "Reset",
                heartRateSectionTitle: "Heart Rate Tracker",
                simulateHeartRateBtn: "Simulate Heart Rate",
                resetHeartRateBtn: "Reset",
                waterSectionTitle: "Water Tracker",
                addWaterBtn: "+250 ml",
                resetWaterBtn: "Reset",
                journalSectionTitle: "Mood & Gratitude Journal",
                journalDescription: "Record your mood and what you're grateful for.",
                saveJournalEntryBtn: "Save Entry",
                analyzeMoodJournalBtn: "Analyze Mood",
                localTipsSectionTitle: "Local Health Tips",
                localTipsDescription: "Get health tips relevant to your local area.",
                getLocalTipBtn: "Get Tip",
                mealPlanSectionTitle: "Meal Plan Suggestions",
                mealPlanDescription: "Get personalized meal plans based on your dietary preferences.",
                generateMealPlanBtn: "Generate Meal Plan",
                moodAnalysisSectionTitle: "Mood Journal Analysis",
                moodAnalysisDescription: "Analyze your mood based on your journal entries.",
                triggerMoodAnalysisBtn: "Trigger Analysis",
                exerciseYogaSectionTitle: "Exercise & Yoga",
                exerciseYogaDescription: "Get exercise and yoga plans tailored to your goals.",
                generateExercisePlanBtn: "Generate Plan",
                diseasePreventionSectionTitle: "Disease Prevention",
                diseasePreventionDescription: "Get information on preventing common diseases.",
                getPreventionInfoBtn: "Get Info",
                wellnessChallengeSectionTitle: "Wellness Challenges",
                wellnessChallengeDescription: "Embark on challenges to boost your well-being.",
                generateChallengeBtn: "Generate Challenge",
                medicationReminderLabel: "Medication Reminder",
                bodyPainMappingLabel: "Body Pain Mapping",
                firstAidEmergencyLabel: "First Aid & Emergency",
                alarmModalTitle: "Medication Reminder",
                alarmModalMessage: "It's time to take your medication!",
                closeAlarmModalBtn: "OK"
            }
        };

        let currentLanguage = 'ta'; // Default language
        let recognition; // SpeechRecognition instance
        let synth = window.speechSynthesis; // SpeechSynthesis instance
        let currentUtterance = null; // To keep track of the current speech utterance
        let availableVoices = []; // To store available TTS voices

        // --- Utility Functions ---

        // Function to update text content based on current language
        function updateContent() {
            const elements = document.querySelectorAll('[data-label-key]');
            elements.forEach(element => {
                const key = element.dataset.labelKey;
                if (translations[currentLanguage] && translations[currentLanguage][key]) {
                    element.textContent = translations[currentLanguage][key];
                }
            });

            // Update specific elements directly
            document.getElementById('mainTitle').textContent = translations[currentLanguage].mainTitle;
            document.getElementById('descriptionText').textContent = translations[currentLanguage].descriptionText;
            document.getElementById('tipSectionTitle').textContent = translations[currentLanguage].tipSectionTitle;
            document.getElementById('featuresTitle').textContent = translations[currentLanguage].featuresTitle;
            document.getElementById('featuresPageTitle').textContent = translations[currentLanguage].featuresPageTitle;

            // Update placeholders
            document.getElementById('goalInput').placeholder = translations[currentLanguage].tipSectionTitle;
            document.getElementById('gratitudeInput').placeholder = translations[currentLanguage].journalDescription;
            document.getElementById('localTipCategory').placeholder = "‡Æé.‡Æï‡Ææ. ‡ÆÆ‡Æû‡Øç‡Æö‡Æ≥‡Øç, ‡ÆÆ‡ØÅ‡Æ∞‡ØÅ‡Æô‡Øç‡Æï‡Øà, ‡Æ§‡Æø‡ÆØ‡Ææ‡Æ©‡ÆÆ‡Øç..."; // Example placeholder
            document.getElementById('dietaryPreferences').placeholder = "‡Æé.‡Æï‡Ææ. ‡Æö‡Øà‡Æµ ‡Æâ‡Æ£‡Æµ‡ØÅ, ‡Æï‡ØÅ‡Æ±‡Øà‡Æ®‡Øç‡Æ§ ‡Æï‡Ææ‡Æ∞‡Øç‡Æ™‡Øç..."; // Example placeholder
            document.getElementById('exerciseGoalInput').placeholder = "‡Æé.‡Æï‡Ææ. ‡Æé‡Æü‡Øà ‡Æï‡ØÅ‡Æ±‡Øà‡Æ™‡Øç‡Æ™‡ØÅ, ‡Æ®‡ØÜ‡Æï‡Æø‡Æ¥‡Øç‡Æµ‡ØÅ‡Æ§‡Øç‡Æ§‡Æ©‡Øç‡ÆÆ‡Øà..."; // Example placeholder
            document.getElementById('diseaseQueryInput').placeholder = "‡Æé.‡Æï‡Ææ. ‡Æ®‡ØÄ‡Æ∞‡Æø‡Æ¥‡Æø‡Æµ‡ØÅ ‡Æ§‡Æü‡ØÅ‡Æ™‡Øç‡Æ™‡ØÅ, ‡Æâ‡ÆØ‡Æ∞‡Øç ‡Æá‡Æ∞‡Æ§‡Øç‡Æ§ ‡ÆÖ‡Æ¥‡ØÅ‡Æ§‡Øç‡Æ§‡ÆÆ‡Øç..."; // Example placeholder
            document.getElementById('challengeGoalInput').placeholder = "‡Æé.‡Æï‡Ææ. 30 ‡Æ®‡Ææ‡Æ≥‡Øç ‡Æ®‡Æü‡Øà‡Æ™‡ÆØ‡Æø‡Æ±‡Øç‡Æö‡Æø ‡Æö‡Æµ‡Ææ‡Æ≤‡Øç, ‡Æ®‡ØÄ‡Æ∞‡Øç ‡Æö‡Æµ‡Ææ‡Æ≤‡Øç..."; // Example placeholder
            document.getElementById('medicationName').placeholder = translations[currentLanguage].medicationReminderLabel.split(' ')[0]; // "Medication"
            document.getElementById('medicationFrequency').placeholder = "‡ÆÖ‡Æ§‡Æø‡Æ∞‡Øç‡Æµ‡ØÜ‡Æ£‡Øç (‡Æé.‡Æï‡Ææ. ‡Æ§‡Æø‡Æ©‡ÆÆ‡ØÅ‡ÆÆ‡Øç, ‡Æµ‡Ææ‡Æ∞‡Ææ‡Æ®‡Øç‡Æ§‡Æø‡Æ∞‡ÆÆ‡Øç)";
            document.getElementById('painDescriptionInput').placeholder = "‡Æµ‡Æ≤‡Æø ‡Æµ‡Æø‡Æ≥‡Æï‡Øç‡Æï‡ÆÆ‡Øç (‡Æé.‡Æï‡Ææ. ‡Æï‡ØÇ‡Æ∞‡Øç‡ÆÆ‡Øà‡ÆØ‡Ææ‡Æ© ‡Æµ‡Æ≤‡Æø, ‡ÆÆ‡Æ®‡Øç‡Æ§‡ÆÆ‡Ææ‡Æ© ‡Æµ‡Æ≤‡Æø)";
            document.getElementById('emergencyQueryInput').placeholder = "‡Æé.‡Æï‡Ææ. ‡ÆÆ‡ØÇ‡Æö‡Øç‡Æö‡ØÅ‡Æ§‡Øç ‡Æ§‡Æø‡Æ£‡Æ±‡Æ≤‡Øç, ‡Æ§‡ØÄ‡Æï‡Øç‡Æï‡Ææ‡ÆØ‡ÆÆ‡Øç...";
            document.getElementById('symptomInput').placeholder = translations[currentLanguage].symptomInputPlaceholder; // New symptom placeholder

            // Update section titles
            document.getElementById('stepSectionTitle').textContent = translations[currentLanguage].stepTrackerLabel;
            document.getElementById('heartRateSectionTitle').textContent = translations[currentLanguage].heartRateTrackerLabel;
            document.getElementById('waterSectionTitle').textContent = translations[currentLanguage].waterTrackerLabel;
            document.getElementById('journalSectionTitle').textContent = translations[currentLanguage].journalLabel;
            document.getElementById('journalDescription').textContent = translations[currentLanguage].journalDescription;
            document.getElementById('localTipsSectionTitle').textContent = translations[currentLanguage].localTipsLabel;
            document.getElementById('localTipsDescription').textContent = translations[currentLanguage].localTipsDescription;
            document.getElementById('mealPlanSectionTitle').textContent = translations[currentLanguage].mealPlanLabel;
            document.getElementById('mealPlanDescription').textContent = translations[currentLanguage].mealPlanDescription;
            document.getElementById('moodAnalysisSectionTitle').textContent = translations[currentLanguage].moodAnalysisLabel;
            document.getElementById('moodAnalysisDescription').textContent = translations[currentLanguage].moodAnalysisDescription;
            document.getElementById('exerciseYogaSectionTitle').textContent = translations[currentLanguage].exerciseYogaLabel;
            document.getElementById('exerciseYogaDescription').textContent = translations[currentLanguage].exerciseYogaDescription;
            document.getElementById('diseasePreventionSectionTitle').textContent = translations[currentLanguage].diseasePreventionLabel;
            document.getElementById('diseasePreventionDescription').textContent = translations[currentLanguage].diseasePreventionDescription;
            document.getElementById('wellnessChallengeSectionTitle').textContent = translations[currentLanguage].wellnessChallengeLabel;
            document.getElementById('wellnessChallengeDescription').textContent = translations[currentLanguage].wellnessChallengeDescription;
            document.getElementById('medicationReminderSectionTitle').textContent = translations[currentLanguage].medicationReminderLabel;
            document.getElementById('bodyPainMappingSectionTitle').textContent = translations[currentLanguage].bodyPainMappingLabel;
            document.getElementById('painPointInstructions').textContent = translations[currentLanguage].painPointInstructions;
            document.getElementById('firstAidEmergencySectionTitle').textContent = translations[currentLanguage].firstAidEmergencyLabel;
            document.getElementById('firstAidEmergencyDescription').textContent = translations[currentLanguage].firstAidEmergencyDescription;
            document.getElementById('symptomCheckerSectionTitle').textContent = translations[currentLanguage].symptomCheckerLabel; // New
            document.getElementById('symptomCheckerDescription').textContent = translations[currentLanguage].symptomCheckerDescription; // New

            // Alarm Modal
            document.getElementById('alarmModalTitle').textContent = translations[currentLanguage].alarmModalTitle;
            document.getElementById('alarmModalMessage').textContent = translations[currentLanguage].alarmModalMessage;
            document.getElementById('closeAlarmModalBtn').textContent = translations[currentLanguage].closeAlarmModalBtn;

            // Explicitly set the initial text for the toggle tracking button
            const toggleBtn = document.getElementById('toggleTrackingBtn');
            if (toggleBtn) {
                // Set initial text to the "Start" part of the translation
                toggleBtn.textContent = translations[currentLanguage].toggleTrackingBtn.split('/')[0].trim();
            }
        }

        // Function to show loading indicator
        function showLoading(textElementId, spinnerElementId, message) {
            document.getElementById(textElementId).textContent = message;
            document.getElementById(spinnerElementId).style.display = 'flex';
        }

        // Function to hide loading indicator
        function hideLoading(spinnerElementId) {
            document.getElementById(spinnerElementId).style.display = 'none';
        }

        // Function to speak text using Web Speech API
        function speakText(text, voiceSelectElement, aiVoiceButtonElement) {
            if (synth.speaking) {
                synth.cancel();
                if (currentUtterance) {
                    aiVoiceButtonElement.classList.remove('recording');
                }
                return;
            }

            if (text) {
                currentUtterance = new SpeechSynthesisUtterance(text);
                const selectedVoiceURI = voiceSelectElement.value;
                const voice = availableVoices.find(v => v.voiceURI === selectedVoiceURI);
                if (voice) {
                    currentUtterance.voice = voice;
                } else {
                    // Fallback to a default voice if the selected one isn't found
                    const defaultVoice = availableVoices.find(v => v.lang.startsWith(currentLanguage));
                    if (defaultVoice) {
                        currentUtterance.voice = defaultVoice;
                    }
                }
                currentUtterance.lang = currentLanguage === 'ta' ? 'ta-IN' : 'en-US'; // Set language for utterance

                currentUtterance.onstart = () => {
                    aiVoiceButtonElement.classList.add('recording');
                };
                currentUtterance.onend = () => {
                    aiVoiceButtonElement.classList.remove('recording');
                };
                currentUtterance.onerror = (event) => {
                    console.error('SpeechSynthesisUtterance.onerror', event);
                    aiVoiceButtonElement.classList.remove('recording');
                };
                synth.speak(currentUtterance);
            }
        }

        // Function to populate TTS voices
        function populateVoiceList(voiceSelectElement, defaultLang) {
            availableVoices = synth.getVoices();
            voiceSelectElement.innerHTML = ''; // Clear existing options

            const filteredVoices = availableVoices.filter(voice => voice.lang.startsWith(defaultLang));

            filteredVoices.forEach(voice => {
                const option = document.createElement('option');
                option.textContent = `${voice.name} (${voice.lang})`;
                option.value = voice.voiceURI;
                voiceSelectElement.appendChild(option);
            });

            // Set a default selected voice if available
            if (filteredVoices.length > 0) {
                voiceSelectElement.value = filteredVoices[0].voiceURI;
                voiceSelectElement.style.display = 'inline-block'; // Show the selector
                // Also show the AI voice button if voices are available
                const aiVoiceButtonId = voiceSelectElement.id.replace('TtsVoiceSelect', 'AiVoiceBtn');
                const aiVoiceButton = document.getElementById(aiVoiceButtonId);
                if (aiVoiceButton) {
                    aiVoiceButton.style.display = 'inline-flex';
                }
            } else {
                voiceSelectElement.style.display = 'none';
                const aiVoiceButtonId = voiceSelectElement.id.replace('TtsVoiceSelect', 'AiVoiceBtn');
                const aiVoiceButton = document.getElementById(aiVoiceButtonId);
                if (aiVoiceButton) {
                    aiVoiceButton.style.display = 'none';
                }
            }
        }

        // --- Core Functions ---

        // Function to switch between main view and feature sections
        function switchActiveSection(sectionId) {
            const initialView = document.getElementById('initialView');
            const featuresContainer = document.getElementById('featuresContainer');
            const allFeatureIconsContainer = document.getElementById('allFeatureIconsContainer');
            const backToMainButton = document.getElementById('backToMainFromFeaturesContainer');

            // Hide all feature sections first
            document.querySelectorAll('.feature-section').forEach(section => {
                section.classList.remove('active');
                section.style.display = 'none';
            });

            if (sectionId === 'featuresContainer') {
                initialView.style.display = 'none';
                featuresContainer.style.display = 'block';
                allFeatureIconsContainer.classList.add('active');
                backToMainButton.style.display = 'inline-flex';
                document.body.classList.add('main-content-active'); // Adjust body styling for scrolling
            } else if (sectionId === 'initialView') {
                initialView.style.display = 'block';
                featuresContainer.style.display = 'none';
                allFeatureIconsContainer.classList.remove('active');
                backToMainButton.style.display = 'none';
                document.body.classList.remove('main-content-active'); // Reset body styling
            } else {
                // Show a specific feature section
                allFeatureIconsContainer.classList.remove('active');
                allFeatureIconsContainer.style.display = 'none'; // Hide icons when a specific feature is active
                const targetSection = document.getElementById(sectionId);
                if (targetSection) {
                    targetSection.classList.add('active');
                    targetSection.style.display = 'block';
                    // Show back button for specific feature sections
                    const backButton = targetSection.querySelector('.back-button');
                    if (backButton) {
                        backButton.style.display = 'inline-flex';
                    }
                }
            }
        }

        // Function to handle back buttons within feature sections
        function setupBackButtons() {
            document.querySelectorAll('.feature-section .back-button').forEach(button => {
                button.addEventListener('click', (event) => {
                    const targetContainerId = event.currentTarget.dataset.target;
                    // Hide the current active feature section
                    event.currentTarget.closest('.feature-section').classList.remove('active');
                    event.currentTarget.closest('.feature-section').style.display = 'none';
                    // Show the allFeatureIconsContainer
                    document.getElementById(targetContainerId).classList.add('active');
                    document.getElementById(targetContainerId).style.display = 'flex'; // Use flex for icon layout
                });
            });
        }

        // Function to handle the main AI tip generation
        async function generateHealthTip() {
            const goalInput = document.getElementById('goalInput').value;
            const tipOutput = document.getElementById('tipOutput');
            const loading = document.getElementById('loading');
            const aiVoiceBtn = document.getElementById('aiVoiceBtn');
            const ttsVoiceSelect = document.getElementById('ttsVoiceSelect');

            if (!goalInput.trim()) {
                tipOutput.innerHTML = `<p class="text-red-600">${translations[currentLanguage]['tipSectionTitle']}!</p>`;
                return;
            }

            showLoading('loadingText', 'loading', translations[currentLanguage].loadingText);
            tipOutput.textContent = ''; // Clear previous output
            aiVoiceBtn.style.display = 'none';
            ttsVoiceSelect.style.display = 'none';

            try {
                const prompt = `Provide a concise health tip in ${currentLanguage === 'ta' ? 'Tamil' : 'English'} related to the goal: "${goalInput}". Keep it encouraging and actionable.`;
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = { contents: chatHistory };

                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    tipOutput.textContent = text;
                    aiVoiceBtn.style.display = 'inline-flex';
                    populateVoiceList(ttsVoiceSelect, currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                } else {
                    tipOutput.innerHTML = `<p class="text-red-600">‡Æâ‡Æ§‡Æµ‡Æø‡Æï‡Øç‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡Øà ‡Æâ‡Æ∞‡ØÅ‡Æµ‡Ææ‡Æï‡Øç‡Æï ‡ÆÆ‡ØÅ‡Æü‡Æø‡ÆØ‡Æµ‡Æø‡Æ≤‡Øç‡Æ≤‡Øà. ‡ÆÆ‡ØÄ‡Æ£‡Øç‡Æü‡ØÅ‡ÆÆ‡Øç ‡ÆÆ‡ØÅ‡ÆØ‡Æ±‡Øç‡Æö‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç.</p>`;
                }
            } catch (error) {
                console.error('Error generating health tip:', error);
                tipOutput.innerHTML = `<p class="text-red-600">‡Æâ‡Æ§‡Æµ‡Æø‡Æï‡Øç‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡Øà ‡Æâ‡Æ∞‡ØÅ‡Æµ‡Ææ‡Æï‡Øç‡Æï‡ØÅ‡Æµ‡Æ§‡Æø‡Æ≤‡Øç ‡Æ™‡Æø‡Æ¥‡Øà ‡Æè‡Æ±‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ: ${error.message}</p>`;
            } finally {
                hideLoading('loading');
            }
        }

        // --- Feature Specific Functions ---

        // Step Tracker
        let currentSteps = 0;
        let stepTrackingInterval = null;

        function updateStepDisplay() {
            document.getElementById('currentStepsDisplay').value = currentSteps;
        }

        function addSteps(count) {
            currentSteps += count;
            updateStepDisplay();
        }

        function toggleStepTracking() {
            const toggleBtn = document.getElementById('toggleTrackingBtn');
            if (stepTrackingInterval) {
                clearInterval(stepTrackingInterval);
                stepTrackingInterval = null;
                toggleBtn.textContent = translations[currentLanguage].toggleTrackingBtn.split('/')[0].trim(); // "Start"
            } else {
                stepTrackingInterval = setInterval(() => {
                    addSteps(1); // Simulate adding 1 step every second
                }, 1000);
                toggleBtn.textContent = translations[currentLanguage].toggleTrackingBtn.split('/')[1].trim(); // "Stop"
            }
        }

        function resetSteps() {
            currentSteps = 0;
            updateStepDisplay();
            if (stepTrackingInterval) {
                clearInterval(stepTrackingInterval);
                stepTrackingInterval = null;
                document.getElementById('toggleTrackingBtn').textContent = translations[currentLanguage].toggleTrackingBtn.split('/')[0].trim();
            }
        }

        // Heart Rate Tracker (Simplified Simulation)
        let currentHeartRate = 70; // bpm
        let heartRateInterval = null;

        function updateHeartRateDisplay() {
            document.getElementById('currentHeartRateDisplay').value = `${currentHeartRate} bpm`;
        }

        function simulateHeartRate() {
            if (heartRateInterval) {
                clearInterval(heartRateInterval);
                heartRateInterval = null;
            }
            heartRateInterval = setInterval(() => {
                const fluctuation = Math.floor(Math.random() * 10) - 5; // -5 to +4
                currentHeartRate = Math.max(50, Math.min(120, currentHeartRate + fluctuation)); // Keep within a reasonable range
                updateHeartRateDisplay();
            }, 1000);
        }

        function resetHeartRate() {
            if (heartRateInterval) {
                clearInterval(heartRateInterval);
                heartRateInterval = null;
            }
            currentHeartRate = 70;
            updateHeartRateDisplay();
        }

        // Water Tracker
        let currentWaterIntake = 0; // in ml

        function updateWaterDisplay() {
            document.getElementById('waterIntakeDisplay').value = `${currentWaterIntake} ml`;
        }

        function addWater(amount) {
            currentWaterIntake += amount;
            updateWaterDisplay();
        }

        function resetWater() {
            currentWaterIntake = 0;
            updateWaterDisplay();
        }

        // Journal
        let journalEntries = [];

        function saveJournalEntry() {
            const mood = document.getElementById('moodSelect').value;
            const gratitude = document.getElementById('gratitudeInput').value;

            if (!mood && !gratitude.trim()) {
                document.getElementById('journalEntriesOutput').innerHTML = `<p class="text-red-600">‡ÆÆ‡Æ©‡Æ®‡Æø‡Æ≤‡Øà‡ÆØ‡Øà‡ÆØ‡Øã ‡ÆÖ‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ ‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡Øà‡ÆØ‡Øã ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç.</p>`;
                return;
            }

            const entry = {
                mood: mood,
                gratitude: gratitude.trim(),
                timestamp: new Date().toLocaleString()
            };
            journalEntries.push(entry);
            renderJournalEntries();
            document.getElementById('moodSelect').value = '';
            document.getElementById('gratitudeInput').value = '';
        }

        function renderJournalEntries() {
            const outputDiv = document.getElementById('journalEntriesOutput');
            outputDiv.innerHTML = '';
            if (journalEntries.length === 0) {
                outputDiv.innerHTML = `<p class="text-gray-600">${translations[currentLanguage].journalDescription}</p>`;
                return;
            }
            journalEntries.forEach((entry, index) => {
                const entryDiv = document.createElement('div');
                entryDiv.className = 'p-3 bg-gray-50 rounded-md shadow-sm flex justify-between items-start mb-2';
                entryDiv.innerHTML = `
                    <div>
                        <p class="text-gray-800"><strong>${entry.mood ? translations[currentLanguage][entry.mood] || entry.mood : ''}</strong> ${entry.gratitude ? `- ${entry.gratitude}` : ''}</p>
                        <p class="text-sm text-gray-500 mt-1">${entry.timestamp}</p>
                    </div>
                    <button class="ml-4 text-red-500 hover:text-red-700 transition duration-200" onclick="deleteJournalEntry(${index})">&times;</button>
                `;
                outputDiv.appendChild(entryDiv);
            });
        }

        function deleteJournalEntry(index) {
            journalEntries.splice(index, 1);
            renderJournalEntries();
        }

        async function analyzeMoodJournal() {
            const moodAnalysisOutput = document.getElementById('moodAnalysisOutput');
            const moodAnalysisLoading = document.getElementById('loading'); // Reusing main loading
            const moodAnalysisAiVoiceBtn = document.getElementById('moodAnalysisResultAiVoiceBtn');
            const moodAnalysisTtsVoiceSelect = document.getElementById('moodAnalysisResultTtsVoiceSelect');

            if (journalEntries.length === 0) {
                moodAnalysisOutput.innerHTML = `<p class="text-red-600">‡Æ™‡Æï‡ØÅ‡Æ™‡Øç‡Æ™‡Ææ‡ÆØ‡Øç‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ ‡Æ§‡Æø‡Æ©‡Æö‡Æ∞‡Æø ‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡ØÅ‡Æï‡Æ≥‡Øç ‡Æé‡Æ§‡ØÅ‡Æµ‡ØÅ‡ÆÆ‡Øç ‡Æá‡Æ≤‡Øç‡Æ≤‡Øà.</p>`;
                return;
            }

            showLoading('loadingText', 'loading', translations[currentLanguage].symptomLoadingText); // Reusing symptom loading text for now
            moodAnalysisOutput.textContent = '';
            moodAnalysisAiVoiceBtn.style.display = 'none';
            moodAnalysisTtsVoiceSelect.style.display = 'none';

            try {
                const journalText = journalEntries.map(entry => `${entry.timestamp}: Mood - ${entry.mood}, Gratitude - ${entry.gratitude}`).join('\n');
                const prompt = `Analyze the following journal entries in ${currentLanguage === 'ta' ? 'Tamil' : 'English'} and provide a summary of the user's overall mood and any recurring themes or insights. Also, suggest actionable tips based on the analysis:\n\n${journalText}`;
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = { contents: chatHistory };

                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    moodAnalysisOutput.textContent = text;
                    moodAnalysisAiVoiceBtn.style.display = 'inline-flex';
                    populateVoiceList(moodAnalysisTtsVoiceSelect, currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                } else {
                    moodAnalysisOutput.innerHTML = `<p class="text-red-600">‡ÆÆ‡Æ©‡Æ®‡Æø‡Æ≤‡Øà‡ÆØ‡Øà ‡Æ™‡Æï‡ØÅ‡Æ™‡Øç‡Æ™‡Ææ‡ÆØ‡Øç‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ ‡ÆÆ‡ØÅ‡Æü‡Æø‡ÆØ‡Æµ‡Æø‡Æ≤‡Øç‡Æ≤‡Øà. ‡ÆÆ‡ØÄ‡Æ£‡Øç‡Æü‡ØÅ‡ÆÆ‡Øç ‡ÆÆ‡ØÅ‡ÆØ‡Æ±‡Øç‡Æö‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç.</p>`;
                }
            } catch (error) {
                console.error('Error analyzing mood:', error);
                moodAnalysisOutput.innerHTML = `<p class="text-red-600">‡ÆÆ‡Æ©‡Æ®‡Æø‡Æ≤‡Øà‡ÆØ‡Øà ‡Æ™‡Æï‡ØÅ‡Æ™‡Øç‡Æ™‡Ææ‡ÆØ‡Øç‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡Æµ‡Æ§‡Æø‡Æ≤‡Øç ‡Æ™‡Æø‡Æ¥‡Øà ‡Æè‡Æ±‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ: ${error.message}</p>`;
            } finally {
                hideLoading('loading');
            }
        }

        // Local Tips (using Gemini AI)
        async function getLocalTip() {
            const localTipCategory = document.getElementById('localTipCategory').value;
            const localTipOutput = document.getElementById('localTipOutput');
            const localTipLoading = document.getElementById('loading'); // Reusing main loading
            const localTipAiVoiceBtn = document.getElementById('localTipAiVoiceBtn');
            const localTipTtsVoiceSelect = document.getElementById('localTipTtsVoiceSelect');

            if (!localTipCategory.trim()) {
                localTipOutput.innerHTML = `<p class="text-red-600">‡Æâ‡Æ§‡Æµ‡Æø‡Æï‡Øç‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡ØÅ ‡Æµ‡Æï‡Øà‡ÆØ‡Øà ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç!</p>`;
                return;
            }

            showLoading('loadingText', 'loading', translations[currentLanguage].symptomLoadingText); // Reusing symptom loading text
            localTipOutput.textContent = '';
            localTipAiVoiceBtn.style.display = 'none';
            localTipTtsVoiceSelect.style.display = 'none';

            try {
                const prompt = `Provide a concise local health tip in ${currentLanguage === 'ta' ? 'Tamil' : 'English'} related to "${localTipCategory}" for someone living in Coimbatore, Tamil Nadu, India. Focus on traditional or easily accessible remedies/practices.`;
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = { contents: chatHistory };

                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    localTipOutput.textContent = text;
                    localTipAiVoiceBtn.style.display = 'inline-flex';
                    populateVoiceList(localTipTtsVoiceSelect, currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                } else {
                    localTipOutput.innerHTML = `<p class="text-red-600">‡Æâ‡Æ≥‡Øç‡Æ≥‡ØÇ‡Æ∞‡Øç ‡Æâ‡Æ§‡Æµ‡Æø‡Æï‡Øç‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡Øà ‡Æâ‡Æ∞‡ØÅ‡Æµ‡Ææ‡Æï‡Øç‡Æï ‡ÆÆ‡ØÅ‡Æü‡Æø‡ÆØ‡Æµ‡Æø‡Æ≤‡Øç‡Æ≤‡Øà. ‡ÆÆ‡ØÄ‡Æ£‡Øç‡Æü‡ØÅ‡ÆÆ‡Øç ‡ÆÆ‡ØÅ‡ÆØ‡Æ±‡Øç‡Æö‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç.</p>`;
                }
            } catch (error) {
                console.error('Error generating local tip:', error);
                localTipOutput.innerHTML = `<p class="text-red-600">‡Æâ‡Æ≥‡Øç‡Æ≥‡ØÇ‡Æ∞‡Øç ‡Æâ‡Æ§‡Æµ‡Æø‡Æï‡Øç‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡Øà ‡Æâ‡Æ∞‡ØÅ‡Æµ‡Ææ‡Æï‡Øç‡Æï‡ØÅ‡Æµ‡Æ§‡Æø‡Æ≤‡Øç ‡Æ™‡Æø‡Æ¥‡Øà ‡Æè‡Æ±‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ: ${error.message}</p>`;
            } finally {
                hideLoading('loading');
            }
        }

        // Meal Plan (using Gemini AI)
        async function generateMealPlan() {
            const dietaryPreferences = document.getElementById('dietaryPreferences').value;
            const mealPlanOutput = document.getElementById('mealPlanOutput');
            const mealPlanLoading = document.getElementById('loading'); // Reusing main loading
            const mealPlanAiVoiceBtn = document.getElementById('mealPlanAiVoiceBtn');
            const mealPlanTtsVoiceSelect = document.getElementById('mealPlanTtsVoiceSelect');

            if (!dietaryPreferences.trim()) {
                mealPlanOutput.innerHTML = `<p class="text-red-600">‡Æâ‡Æ£‡Æµ‡ØÅ ‡Æµ‡Æø‡Æ∞‡ØÅ‡Æ™‡Øç‡Æ™‡Æô‡Øç‡Æï‡Æ≥‡Øà ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç!</p>`;
                return;
            }

            showLoading('loadingText', 'loading', translations[currentLanguage].symptomLoadingText); // Reusing symptom loading text
            mealPlanOutput.textContent = '';
            mealPlanAiVoiceBtn.style.display = 'none';
            mealPlanTtsVoiceSelect.style.display = 'none';

            try {
                const prompt = `Generate a simple one-day meal plan in ${currentLanguage === 'ta' ? 'Tamil' : 'English'} for a healthy adult, considering the following dietary preferences: "${dietaryPreferences}". Include breakfast, lunch, and dinner.`;
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = { contents: chatHistory };

                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    mealPlanOutput.textContent = text;
                    mealPlanAiVoiceBtn.style.display = 'inline-flex';
                    populateVoiceList(mealPlanTtsVoiceSelect, currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                } else {
                    mealPlanOutput.innerHTML = `<p class="text-red-600">‡Æâ‡Æ£‡Æµ‡ØÅ‡Æ§‡Øç ‡Æ§‡Æø‡Æü‡Øç‡Æü‡Æ§‡Øç‡Æ§‡Øà ‡Æâ‡Æ∞‡ØÅ‡Æµ‡Ææ‡Æï‡Øç‡Æï ‡ÆÆ‡ØÅ‡Æü‡Æø‡ÆØ‡Æµ‡Æø‡Æ≤‡Øç‡Æ≤‡Øà. ‡ÆÆ‡ØÄ‡Æ£‡Øç‡Æü‡ØÅ‡ÆÆ‡Øç ‡ÆÆ‡ØÅ‡ÆØ‡Æ±‡Øç‡Æö‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç.</p>`;
                }
            } catch (error) {
                console.error('Error generating meal plan:', error);
                mealPlanOutput.innerHTML = `<p class="text-red-600">‡Æâ‡Æ£‡Æµ‡ØÅ‡Æ§‡Øç ‡Æ§‡Æø‡Æü‡Øç‡Æü‡Æ§‡Øç‡Æ§‡Øà ‡Æâ‡Æ∞‡ØÅ‡Æµ‡Ææ‡Æï‡Øç‡Æï‡ØÅ‡Æµ‡Æ§‡Æø‡Æ≤‡Øç ‡Æ™‡Æø‡Æ¥‡Øà ‡Æè‡Æ±‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ: ${error.message}</p>`;
            } finally {
                hideLoading('loading');
            }
        }

        // Exercise & Yoga (using Gemini AI)
        async function generateExercisePlan() {
            const exerciseGoal = document.getElementById('exerciseGoalInput').value;
            const exercisePlanOutput = document.getElementById('exercisePlanOutput');
            const exercisePlanLoading = document.getElementById('loading'); // Reusing main loading
            const exercisePlanAiVoiceBtn = document.getElementById('exercisePlanAiVoiceBtn');
            const exercisePlanTtsVoiceSelect = document.getElementById('exercisePlanTtsVoiceSelect');

            if (!exerciseGoal.trim()) {
                exercisePlanOutput.innerHTML = `<p class="text-red-600">‡Æâ‡Æü‡Æ±‡Øç‡Æ™‡ÆØ‡Æø‡Æ±‡Øç‡Æö‡Æø ‡Æá‡Æ≤‡Æï‡Øç‡Æï‡Øà ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç!</p>`;
                return;
            }

            showLoading('loadingText', 'loading', translations[currentLanguage].symptomLoadingText); // Reusing symptom loading text
            exercisePlanOutput.textContent = '';
            exercisePlanAiVoiceBtn.style.display = 'none';
            exercisePlanTtsVoiceSelect.style.display = 'none';

            try {
                const prompt = `Generate a simple 15-minute exercise or yoga routine in ${currentLanguage === 'ta' ? 'Tamil' : 'English'} for a beginner, focusing on "${exerciseGoal}". Include 3-5 simple steps/poses.`;
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = { contents: chatHistory };

                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    exercisePlanOutput.textContent = text;
                    exercisePlanAiVoiceBtn.style.display = 'inline-flex';
                    populateVoiceList(exercisePlanTtsVoiceSelect, currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                } else {
                    exercisePlanOutput.innerHTML = `<p class="text-red-600">‡Æâ‡Æü‡Æ±‡Øç‡Æ™‡ÆØ‡Æø‡Æ±‡Øç‡Æö‡Æø ‡Æ§‡Æø‡Æü‡Øç‡Æü‡Æ§‡Øç‡Æ§‡Øà ‡Æâ‡Æ∞‡ØÅ‡Æµ‡Ææ‡Æï‡Øç‡Æï ‡ÆÆ‡ØÅ‡Æü‡Æø‡ÆØ‡Æµ‡Æø‡Æ≤‡Øç‡Æ≤‡Øà. ‡ÆÆ‡ØÄ‡Æ£‡Øç‡Æü‡ØÅ‡ÆÆ‡Øç ‡ÆÆ‡ØÅ‡ÆØ‡Æ±‡Øç‡Æö‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç.</p>`;
                }
            } catch (error) {
                console.error('Error generating exercise plan:', error);
                exercisePlanOutput.innerHTML = `<p class="text-red-600">‡Æâ‡Æü‡Æ±‡Øç‡Æ™‡ÆØ‡Æø‡Æ±‡Øç‡Æö‡Æø ‡Æ§‡Æø‡Æü‡Øç‡Æü‡Æ§‡Øç‡Æ§‡Øà ‡Æâ‡Æ∞‡ØÅ‡Æµ‡Ææ‡Æï‡Øç‡Æï‡ØÅ‡Æµ‡Æ§‡Æø‡Æ≤‡Øç ‡Æ™‡Æø‡Æ¥‡Øà ‡Æè‡Æ±‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ: ${error.message}</p>`;
            } finally {
                hideLoading('loading');
            }
        }

        // Disease Prevention (using Gemini AI)
        async function getPreventionInfo() {
            const diseaseQuery = document.getElementById('diseaseQueryInput').value;
            const preventionInfoOutput = document.getElementById('preventionInfoOutput');
            const preventionInfoLoading = document.getElementById('loading'); // Reusing main loading
            const preventionInfoAiVoiceBtn = document.getElementById('preventionInfoAiVoiceBtn');
            const preventionInfoTtsVoiceSelect = document.getElementById('preventionInfoTtsVoiceSelect');

            if (!diseaseQuery.trim()) {
                preventionInfoOutput.innerHTML = `<p class="text-red-600">‡Æ®‡Øã‡ÆØ‡Øç ‡ÆÖ‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ ‡Æ§‡Æü‡ØÅ‡Æ™‡Øç‡Æ™‡ØÅ ‡Æ™‡Æ±‡Øç‡Æ±‡Æø ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç!</p>`;
                return;
            }

            showLoading('loadingText', 'loading', translations[currentLanguage].symptomLoadingText); // Reusing symptom loading text
            preventionInfoOutput.textContent = '';
            preventionInfoAiVoiceBtn.style.display = 'none';
            preventionInfoTtsVoiceSelect.style.display = 'none';

            try {
                const prompt = `Provide general information in ${currentLanguage === 'ta' ? 'Tamil' : 'English'} about "${diseaseQuery}" prevention for a general audience. Keep it concise and easy to understand.`;
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = { contents: chatHistory };

                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    preventionInfoOutput.textContent = text;
                    preventionInfoAiVoiceBtn.style.display = 'inline-flex';
                    populateVoiceList(preventionInfoTtsVoiceSelect, currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                } else {
                    preventionInfoOutput.innerHTML = `<p class="text-red-600">‡Æ§‡Æï‡Æµ‡Æ≤‡Øà‡Æ™‡Øç ‡Æ™‡ØÜ‡Æ± ‡ÆÆ‡ØÅ‡Æü‡Æø‡ÆØ‡Æµ‡Æø‡Æ≤‡Øç‡Æ≤‡Øà. ‡ÆÆ‡ØÄ‡Æ£‡Øç‡Æü‡ØÅ‡ÆÆ‡Øç ‡ÆÆ‡ØÅ‡ÆØ‡Æ±‡Øç‡Æö‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç.</p>`;
                }
            } catch (error) {
                console.error('Error getting prevention info:', error);
                preventionInfoOutput.innerHTML = `<p class="text-red-600">‡Æ§‡Æï‡Æµ‡Æ≤‡Øà‡Æ™‡Øç ‡Æ™‡ØÜ‡Æ±‡ØÅ‡Æµ‡Æ§‡Æø‡Æ≤‡Øç ‡Æ™‡Æø‡Æ¥‡Øà ‡Æè‡Æ±‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ: ${error.message}</p>`;
            } finally {
                hideLoading('loading');
            }
        }

        // Wellness Challenge (using Gemini AI)
        async function generateWellnessChallenge() {
            const challengeGoal = document.getElementById('challengeGoalInput').value;
            const challengeOutput = document.getElementById('challengeOutput');
            const challengeLoading = document.getElementById('loading'); // Reusing main loading
            const challengeAiVoiceBtn = document.getElementById('challengeAiVoiceBtn');
            const challengeTtsVoiceSelect = document.getElementById('challengeTtsVoiceSelect');

            if (!challengeGoal.trim()) {
                challengeOutput.innerHTML = `<p class="text-red-600">‡Æö‡Æµ‡Ææ‡Æ≤‡Øç ‡Æá‡Æ≤‡Æï‡Øç‡Æï‡Øà ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç!</p>`;
                return;
            }

            showLoading('loadingText', 'loading', translations[currentLanguage].symptomLoadingText); // Reusing symptom loading text
            challengeOutput.textContent = '';
            challengeAiVoiceBtn.style.display = 'none';
            challengeTtsVoiceSelect.style.display = 'none';

            try {
                const prompt = `Create a simple 7-day wellness challenge in ${currentLanguage === 'ta' ? 'Tamil' : 'English'} focused on "${challengeGoal}". Provide a brief description and a daily task for each of the 7 days.`;
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = { contents: chatHistory };

                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    challengeOutput.textContent = text;
                    challengeAiVoiceBtn.style.display = 'inline-flex';
                    populateVoiceList(challengeTtsVoiceSelect, currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                } else {
                    challengeOutput.innerHTML = `<p class="text-red-600">‡Æö‡Æµ‡Ææ‡Æ≤‡Øà ‡Æâ‡Æ∞‡ØÅ‡Æµ‡Ææ‡Æï‡Øç‡Æï ‡ÆÆ‡ØÅ‡Æü‡Æø‡ÆØ‡Æµ‡Æø‡Æ≤‡Øç‡Æ≤‡Øà. ‡ÆÆ‡ØÄ‡Æ£‡Øç‡Æü‡ØÅ‡ÆÆ‡Øç ‡ÆÆ‡ØÅ‡ÆØ‡Æ±‡Øç‡Æö‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç.</p>`;
                }
            } catch (error) {
                console.error('Error generating challenge:', error);
                challengeOutput.innerHTML = `<p class="text-red-600">‡Æö‡Æµ‡Ææ‡Æ≤‡Øà ‡Æâ‡Æ∞‡ØÅ‡Æµ‡Ææ‡Æï‡Øç‡Æï‡ØÅ‡Æµ‡Æ§‡Æø‡Æ≤‡Øç ‡Æ™‡Æø‡Æ¥‡Øà ‡Æè‡Æ±‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ: ${error.message}</p>`;
            } finally {
                hideLoading('loading');
            }
        }

        // Medication Reminder
        let medicationReminders = [];
        let alarmTimeoutIds = {}; // To store timeout IDs for alarms

        function addMedicationReminder() {
            const name = document.getElementById('medicationName').value.trim();
            const time = document.getElementById('medicationTime').value.trim();
            const frequency = document.getElementById('medicationFrequency').value.trim();

            if (!name || !time) {
                document.getElementById('medicationRemindersList').innerHTML = `<p class="text-red-600">‡ÆÆ‡Æ∞‡ØÅ‡Æ®‡Øç‡Æ§‡Æø‡Æ©‡Øç ‡Æ™‡ØÜ‡ÆØ‡Æ∞‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æ®‡Øá‡Æ∞‡Æ§‡Øç‡Æ§‡Øà ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç.</p>`;
                return;
            }

            const reminder = {
                id: Date.now(), // Unique ID
                name,
                time,
                frequency,
                nextAlarm: calculateNextAlarmTime(time, frequency)
            };
            medicationReminders.push(reminder);
            medicationReminders.sort((a, b) => a.time.localeCompare(b.time)); // Sort by time
            renderMedicationReminders();
            scheduleAlarm(reminder);

            document.getElementById('medicationName').value = '';
            document.getElementById('medicationTime').value = '';
            document.getElementById('medicationFrequency').value = '';
        }

        function renderMedicationReminders() {
            const listDiv = document.getElementById('medicationRemindersList');
            listDiv.innerHTML = '';
            if (medicationReminders.length === 0) {
                listDiv.innerHTML = `<p class="text-gray-600">‡ÆÆ‡Æ∞‡ØÅ‡Æ®‡Øç‡Æ§‡ØÅ ‡Æ®‡Æø‡Æ©‡Øà‡Æµ‡ØÇ‡Æü‡Øç‡Æü‡Æ≤‡Øç‡Æï‡Æ≥‡Øç ‡Æé‡Æ§‡ØÅ‡Æµ‡ØÅ‡ÆÆ‡Øç ‡Æá‡Æ≤‡Øç‡Æ≤‡Øà.</p>`;
                return;
            }
            medicationReminders.forEach(reminder => {
                const reminderDiv = document.createElement('div');
                reminderDiv.className = 'p-3 bg-gray-50 rounded-md shadow-sm flex justify-between items-center mb-2';
                reminderDiv.innerHTML = `
                    <div>
                        <p class="text-gray-800"><strong>${reminder.name}</strong> - ${reminder.time} ${reminder.frequency ? `(${reminder.frequency})` : ''}</p>
                        <p class="text-sm text-gray-500 mt-1">‡ÆÖ‡Æü‡ØÅ‡Æ§‡Øç‡Æ§ ‡ÆÖ‡Æ≤‡Ææ‡Æ∞‡ÆÆ‡Øç: ${reminder.nextAlarm ? new Date(reminder.nextAlarm).toLocaleString() : 'N/A'}</p>
                    </div>
                    <button class="ml-4 text-red-500 hover:text-red-700 transition duration-200" onclick="deleteMedicationReminder(${reminder.id})">&times;</button>
                `;
                listDiv.appendChild(reminderDiv);
            });
        }

        function deleteMedicationReminder(id) {
            medicationReminders = medicationReminders.filter(r => r.id !== id);
            if (alarmTimeoutIds[id]) {
                clearTimeout(alarmTimeoutIds[id]);
                delete alarmTimeoutIds[id];
            }
            renderMedicationReminders();
        }

        function calculateNextAlarmTime(timeString, frequency) {
            const [hours, minutes] = timeString.split(':').map(Number);
            const now = new Date();
            let nextAlarm = new Date(now.getFullYear(), now.getMonth(), now.getDay(), hours, minutes, 0);

            if (nextAlarm.getTime() < now.getTime()) {
                // If the time has passed today, set for tomorrow
                nextAlarm.setDate(nextAlarm.getDate() + 1);
            }
            // Basic frequency handling (can be expanded)
            // For now, only handles daily or single reminders
            return nextAlarm.getTime();
        }

        function scheduleAlarm(reminder) {
            const now = Date.now();
            const delay = reminder.nextAlarm - now;

            if (delay > 0) {
                alarmTimeoutIds[reminder.id] = setTimeout(() => {
                    showAlarmModal(reminder.name);
                    // For daily reminders, reschedule for the next day
                    if (reminder.frequency.toLowerCase() === 'daily' || reminder.frequency.toLowerCase() === '‡Æ§‡Æø‡Æ©‡ÆÆ‡ØÅ‡ÆÆ‡Øç') {
                        reminder.nextAlarm = calculateNextAlarmTime(reminder.time, reminder.frequency);
                        renderMedicationReminders(); // Update display with next alarm time
                        scheduleAlarm(reminder); // Reschedule
                    } else {
                        // For one-time reminders, remove after sounding
                        deleteMedicationReminder(reminder.id);
                    }
                }, delay);
            } else if (reminder.frequency.toLowerCase() === 'daily' || reminder.frequency.toLowerCase() === '‡Æ§‡Æø‡Æ©‡ÆÆ‡ØÅ‡ÆÆ‡Øç') {
                // If delay is negative (missed today), schedule for tomorrow immediately
                reminder.nextAlarm = calculateNextAlarmTime(reminder.time, reminder.frequency);
                renderMedicationReminders();
                scheduleAlarm(reminder);
            }
        }

        function showAlarmModal(medicationName) {
            const modal = document.getElementById('alarmModal');
            document.getElementById('alarmModalMessage').textContent = `${translations[currentLanguage].alarmModalMessage} (${medicationName})`;
            modal.classList.add('show');
            // Play a sound
            const synth = new Tone.Synth().toDestination();
            synth.triggerAttackRelease("C4", "8n"); // Basic beep sound
        }

        function closeAlarmModal() {
            document.getElementById('alarmModal').classList.remove('show');
            Tone.context.resume(); // Ensure audio context is resumed if paused
        }

        // Body Pain Mapping
        let painPoints = []; // Stores {x, y, description}

        function addPainPoint(event) {
            const bodyMapContainer = document.getElementById('bodyMapContainer');
            const rect = bodyMapContainer.getBoundingClientRect();
            const x = event.clientX - rect.left; // x position within the element
            const y = event.clientY - rect.top;  // y position within the element

            const description = document.getElementById('painDescriptionInput').value.trim();
            if (!description) {
                alert('‡Æµ‡Æ≤‡Æø‡ÆØ‡Æø‡Æ©‡Øç ‡Æµ‡Æø‡Æ≥‡Æï‡Øç‡Æï‡Æ§‡Øç‡Æ§‡Øà ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç.'); // Using alert for simplicity, replace with custom modal
                return;
            }

            const pain = {
                x: (x / rect.width) * 100, // Percentage x
                y: (y / rect.height) * 100, // Percentage y
                description: description
            };
            painPoints.push(pain);
            renderPainPoints();
            document.getElementById('painDescriptionInput').value = '';
        }

        function renderPainPoints() {
            const bodyMapContainer = document.getElementById('bodyMapContainer');
            // Remove existing dots
            bodyMapContainer.querySelectorAll('.pain-dot').forEach(dot => dot.remove());

            painPoints.forEach((point, index) => {
                const dot = document.createElement('div');
                dot.className = 'pain-dot';
                dot.style.left = `${point.x}%`;
                dot.style.top = `${point.y}%`;
                dot.title = point.description; // Show description on hover
                dot.onclick = (e) => {
                    e.stopPropagation(); // Prevent adding new point when clicking existing dot
                    alert(`‡Æµ‡Æ≤‡Æø: ${point.description}\n‡Æ®‡ØÄ‡Æï‡Øç‡Æï ‡Æï‡Æø‡Æ≥‡Æø‡Æï‡Øç ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡Æµ‡ØÅ‡ÆÆ‡Øç.`); // Using alert for simplicity
                    // Optionally add logic to remove on second click or show a modal
                };
                bodyMapContainer.appendChild(dot);
            });

            const painPointsList = document.getElementById('painPointsList');
            painPointsList.innerHTML = '';
            if (painPoints.length === 0) {
                painPointsList.innerHTML = `<p class="text-gray-600">‡Æµ‡Æ≤‡Æø‡Æ™‡Øç ‡Æ™‡ØÅ‡Æ≥‡Øç‡Æ≥‡Æø‡Æï‡Æ≥‡Øç ‡Æé‡Æ§‡ØÅ‡Æµ‡ØÅ‡ÆÆ‡Øç ‡Æá‡Æ≤‡Øç‡Æ≤‡Øà.</p>`;
                return;
            }
            painPoints.forEach((point, index) => {
                const listItem = document.createElement('div');
                listItem.className = 'p-3 bg-gray-50 rounded-md shadow-sm flex justify-between items-center mb-2';
                listItem.innerHTML = `
                    <p class="text-gray-800">${index + 1}. ${point.description} (X: ${point.x.toFixed(1)}%, Y: ${point.y.toFixed(1)}%)</p>
                    <button class="ml-4 text-red-500 hover:text-red-700 transition duration-200" onclick="deletePainPoint(${index})">&times;</button>
                `;
                painPointsList.appendChild(listItem);
            });
        }

        function deletePainPoint(index) {
            painPoints.splice(index, 1);
            renderPainPoints();
        }

        function clearPainPoints() {
            painPoints = [];
            renderPainPoints();
        }

        // First Aid & Emergency (using Gemini AI)
        async function getEmergencyAdvice() {
            const emergencyQuery = document.getElementById('emergencyQueryInput').value;
            const emergencyAdviceOutput = document.getElementById('emergencyAdviceOutput');
            const emergencyAdviceLoading = document.getElementById('loading'); // Reusing main loading
            const emergencyAdviceAiVoiceBtn = document.getElementById('emergencyAdviceAiVoiceBtn');
            const emergencyAdviceTtsVoiceSelect = document.getElementById('emergencyAdviceTtsVoiceSelect');

            if (!emergencyQuery.trim()) {
                emergencyAdviceOutput.innerHTML = `<p class="text-red-600">‡ÆÖ‡Æµ‡Æö‡Æ∞ ‡Æï‡Øá‡Æ≥‡Øç‡Æµ‡Æø‡ÆØ‡Øà ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç!</p>`;
                return;
            }

            showLoading('loadingText', 'loading', translations[currentLanguage].symptomLoadingText); // Reusing symptom loading text
            emergencyAdviceOutput.textContent = '';
            emergencyAdviceAiVoiceBtn.style.display = 'none';
            emergencyAdviceTtsVoiceSelect.style.display = 'none';

            try {
                const prompt = `Provide concise and actionable first aid advice in ${currentLanguage === 'ta' ? 'Tamil' : 'English'} for the following emergency situation: "${emergencyQuery}". Emphasize that this is not a substitute for professional medical help.`;
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = { contents: chatHistory };

                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    emergencyAdviceOutput.textContent = text;
                    emergencyAdviceAiVoiceBtn.style.display = 'inline-flex';
                    populateVoiceList(emergencyAdviceTtsVoiceSelect, currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                } else {
                    emergencyAdviceOutput.innerHTML = `<p class="text-red-600">‡ÆÜ‡Æ≤‡Øã‡Æö‡Æ©‡Øà‡ÆØ‡Øà‡Æ™‡Øç ‡Æ™‡ØÜ‡Æ± ‡ÆÆ‡ØÅ‡Æü‡Æø‡ÆØ‡Æµ‡Æø‡Æ≤‡Øç‡Æ≤‡Øà. ‡ÆÆ‡ØÄ‡Æ£‡Øç‡Æü‡ØÅ‡ÆÆ‡Øç ‡ÆÆ‡ØÅ‡ÆØ‡Æ±‡Øç‡Æö‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç.</p>`;
                }
            } catch (error) {
                console.error('Error getting emergency advice:', error);
                emergencyAdviceOutput.innerHTML = `<p class="text-red-600">‡ÆÜ‡Æ≤‡Øã‡Æö‡Æ©‡Øà‡ÆØ‡Øà‡Æ™‡Øç ‡Æ™‡ØÜ‡Æ±‡ØÅ‡Æµ‡Æ§‡Æø‡Æ≤‡Øç ‡Æ™‡Æø‡Æ¥‡Øà ‡Æè‡Æ±‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ: ${error.message}</p>`;
            } finally {
                hideLoading('loading');
            }
        }

        // Symptom Checker (NEW FEATURE)
        async function generateSymptomAdvice() {
            const symptomInput = document.getElementById('symptomInput').value;
            const symptomResultOutput = document.getElementById('symptomResultOutput');
            const symptomLoading = document.getElementById('loading'); // Reusing main loading
            const symptomAiVoiceBtn = document.getElementById('symptomAiVoiceBtn');
            const symptomTtsVoiceSelect = document.getElementById('symptomTtsVoiceSelect');

            if (!symptomInput.trim()) {
                symptomResultOutput.innerHTML = `<p class="text-red-600">${translations[currentLanguage].symptomInputPlaceholder}</p>`;
                return;
            }

            showLoading('loadingText', 'loading', translations[currentLanguage].symptomLoadingText);
            symptomResultOutput.textContent = '';
            symptomAiVoiceBtn.style.display = 'none';
            symptomTtsVoiceSelect.style.display = 'none';

            try {
                const prompt = `As a general health information assistant, provide general information and potential common causes/advice for the following symptoms or health question in ${currentLanguage === 'ta' ? 'Tamil' : 'English'}: "${symptomInput}". Emphasize that this is not medical advice and a doctor should be consulted for diagnosis and treatment.`;
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = { contents: chatHistory };

                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    symptomResultOutput.textContent = text;
                    symptomAiVoiceBtn.style.display = 'inline-flex';
                    populateVoiceList(symptomTtsVoiceSelect, currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                } else {
                    symptomResultOutput.innerHTML = `<p class="text-red-600">‡ÆÜ‡Æ≤‡Øã‡Æö‡Æ©‡Øà‡ÆØ‡Øà‡Æ™‡Øç ‡Æ™‡ØÜ‡Æ± ‡ÆÆ‡ØÅ‡Æü‡Æø‡ÆØ‡Æµ‡Æø‡Æ≤‡Øç‡Æ≤‡Øà. ‡ÆÆ‡ØÄ‡Æ£‡Øç‡Æü‡ØÅ‡ÆÆ‡Øç ‡ÆÆ‡ØÅ‡ÆØ‡Æ±‡Øç‡Æö‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç.</p>`;
                }
            } catch (error) {
                console.error('Error generating symptom advice:', error);
                symptomResultOutput.innerHTML = `<p class="text-red-600">‡ÆÜ‡Æ≤‡Øã‡Æö‡Æ©‡Øà‡ÆØ‡Øà‡Æ™‡Øç ‡Æ™‡ØÜ‡Æ±‡ØÅ‡Æµ‡Æ§‡Æø‡Æ≤‡Øç ‡Æ™‡Æø‡Æ¥‡Øà ‡Æè‡Æ±‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ: ${error.message}</p>`;
            } finally {
                hideLoading('loading');
            }
        }


        // --- Event Listeners and Initialization ---

        document.addEventListener('DOMContentLoaded', () => {
            // Splash Screen
            const splashScreen = document.getElementById('splashScreen');
            const mainContent = document.getElementById('mainContent');

            // Add null checks for splashScreen and mainContent
            if (splashScreen && mainContent) {
                setTimeout(() => {
                    splashScreen.classList.add('fade-out');
                    splashScreen.addEventListener('transitionend', () => {
                        splashScreen.style.display = 'none';
                        mainContent.style.display = 'block';
                        document.body.classList.remove('splash-screen-active'); // Remove splash-screen-active if it was added
                        updateContent(); // Initial content update after splash screen
                    }, { once: true });
                }, 2000); // Show splash screen for 2 seconds
            } else {
                console.error("Splash screen or main content element not found. Displaying main content directly.");
                if (mainContent) {
                    mainContent.style.display = 'block';
                    document.body.classList.remove('splash-screen-active');
                    updateContent();
                } else {
                    console.error("Main content element also not found. Cannot display anything.");
                }
            }


            // Language Selection
            const languageSelect = document.getElementById('languageSelect');
            languageSelect.addEventListener('change', (event) => {
                currentLanguage = event.target.value;
                updateContent();
                // Repopulate TTS voices for the new language
                populateVoiceList(document.getElementById('ttsVoiceSelect'), currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                populateVoiceList(document.getElementById('stepTipTtsVoiceSelect'), currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                populateVoiceList(document.getElementById('moodAnalysisTtsVoiceSelect'), currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                populateVoiceList(document.getElementById('localTipTtsVoiceSelect'), currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                populateVoiceList(document.getElementById('mealPlanTtsVoiceSelect'), currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                populateVoiceList(document.getElementById('exercisePlanTtsVoiceSelect'), currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                populateVoiceList(document.getElementById('preventionInfoTtsVoiceSelect'), currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                populateVoiceList(document.getElementById('challengeTtsVoiceSelect'), currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                populateVoiceList(document.getElementById('emergencyAdviceTtsVoiceSelect'), currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                populateVoiceList(document.getElementById('symptomTtsVoiceSelect'), currentLanguage === 'ta' ? 'ta-IN' : 'en-US'); // New
            });

            // Populate voices initially
            synth.onvoiceschanged = () => {
                populateVoiceList(document.getElementById('ttsVoiceSelect'), currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                populateVoiceList(document.getElementById('stepTipTtsVoiceSelect'), currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                populateVoiceList(document.getElementById('moodAnalysisTtsVoiceSelect'), currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                populateVoiceList(document.getElementById('localTipTtsVoiceSelect'), currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                populateVoiceList(document.getElementById('mealPlanTtsVoiceSelect'), currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                populateVoiceList(document.getElementById('exercisePlanTtsVoiceSelect'), currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                populateVoiceList(document.getElementById('preventionInfoTtsVoiceSelect'), currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                populateVoiceList(document.getElementById('challengeTtsVoiceSelect'), currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                populateVoiceList(document.getElementById('emergencyAdviceTtsVoiceSelect'), currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                populateVoiceList(document.getElementById('symptomTtsVoiceSelect'), currentLanguage === 'ta' ? 'ta-IN' : 'en-US'); // New
            };
            // Call populateVoiceList immediately if voices are already loaded (e.g., on refresh)
            if (synth.getVoices().length > 0) {
                populateVoiceList(document.getElementById('ttsVoiceSelect'), currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                populateVoiceList(document.getElementById('stepTipTtsVoiceSelect'), currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                populateVoiceList(document.getElementById('moodAnalysisTtsVoiceSelect'), currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                populateVoiceList(document.getElementById('localTipTtsVoiceSelect'), currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                populateVoiceList(document.getElementById('mealPlanTtsVoiceSelect'), currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                populateVoiceList(document.getElementById('exercisePlanTtsVoiceSelect'), currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                populateVoiceList(document.getElementById('preventionInfoTtsVoiceSelect'), currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                populateVoiceList(document.getElementById('challengeTtsVoiceSelect'), currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                populateVoiceList(document.getElementById('emergencyAdviceTtsVoiceSelect'), currentLanguage === 'ta' ? 'ta-IN' : 'en-US');
                populateVoiceList(document.getElementById('symptomTtsVoiceSelect'), currentLanguage === 'ta' ? 'ta-IN' : 'en-US'); // New
            }


            // Main Generate Button
            document.getElementById('generateBtn').addEventListener('click', generateHealthTip);
            document.getElementById('aiVoiceBtn').addEventListener('click', () => {
                speakText(document.getElementById('tipOutput').textContent, document.getElementById('ttsVoiceSelect'), document.getElementById('aiVoiceBtn'));
            });

            // Speech Recognition (STT) setup
            if ('webkitSpeechRecognition' in window) {
                recognition = new webkitSpeechRecognition();
                recognition.continuous = false;
                recognition.interimResults = false;
                recognition.lang = currentLanguage === 'ta' ? 'ta-IN' : 'en-US';

                recognition.onresult = (event) => {
                    const transcript = event.results[0][0].transcript;
                    const activeInput = document.querySelector('.mic-button.recording').previousElementSibling;
                    if (activeInput) {
                        activeInput.value = transcript;
                    }
                    document.querySelectorAll('.mic-button').forEach(btn => btn.classList.remove('recording'));
                };

                recognition.onerror = (event) => {
                    console.error('Speech recognition error:', event.error);
                    document.querySelectorAll('.mic-button').forEach(btn => btn.classList.remove('recording'));
                };

                recognition.onend = () => {
                    document.querySelectorAll('.mic-button').forEach(btn => btn.classList.remove('recording'));
                };

                document.querySelectorAll('.mic-button').forEach(button => {
                    button.addEventListener('click', () => {
                        // Stop any ongoing recognition
                        if (recognition) {
                            recognition.stop();
                        }
                        // Remove recording class from all buttons
                        document.querySelectorAll('.mic-button').forEach(btn => btn.classList.remove('recording'));

                        // Add recording class to the clicked button
                        button.classList.add('recording');
                        recognition.lang = currentLanguage === 'ta' ? 'ta-IN' : 'en-US'; // Set language dynamically
                        recognition.start();
                    });
                });
            } else {
                console.warn('Web Speech Recognition is not supported in this browser.');
                document.querySelectorAll('.mic-button').forEach(button => button.style.display = 'none');
            }

            // --- Feature Navigation ---
            document.getElementById('toggleFeaturesBtn').addEventListener('click', () => {
                switchActiveSection('featuresContainer');
            });
            document.getElementById('backToMainFromFeaturesContainer').addEventListener('click', () => {
                switchActiveSection('initialView');
            });

            document.querySelectorAll('.feature-icon').forEach(icon => {
                icon.addEventListener('click', (event) => {
                    const targetSectionId = event.currentTarget.dataset.section;
                    switchActiveSection(targetSectionId);
                });
            });

            setupBackButtons(); // Setup back buttons for feature sections

            // --- Individual Feature Event Listeners ---

            // Step Tracker
            document.getElementById('addOneStepBtn').addEventListener('click', () => addSteps(1));
            document.getElementById('addSingleStepBtn').addEventListener('click', () => addSteps(1)); // This was already +1, keeping for consistency
            document.getElementById('toggleTrackingBtn').addEventListener('click', toggleStepTracking);
            document.getElementById('resetStepsBtn').addEventListener('click', resetSteps);
            document.getElementById('stepTipAiVoiceBtn').addEventListener('click', () => {
                speakText(document.getElementById('stepTipOutput').textContent, document.getElementById('stepTipTtsVoiceSelect'), document.getElementById('stepTipAiVoiceBtn'));
            });

            // Heart Rate Tracker
            document.getElementById('simulateHeartRateBtn').addEventListener('click', simulateHeartRate);
            document.getElementById('resetHeartRateBtn').addEventListener('click', resetHeartRate);
            // Add missing event listeners for Heart Rate AI Voice
            const heartRateTipAiVoiceBtn = document.getElementById('heartRateTipAiVoiceBtn');
            const heartRateTipTtsVoiceSelect = document.getElementById('heartRateTipTtsVoiceSelect');
            if (heartRateTipAiVoiceBtn && heartRateTipTtsVoiceSelect) {
                heartRateTipAiVoiceBtn.addEventListener('click', () => {
                    speakText(document.getElementById('heartRateTipOutput').textContent, heartRateTipTtsVoiceSelect, heartRateTipAiVoiceBtn);
                });
            }


            // Water Tracker
            document.getElementById('addWaterBtn').addEventListener('click', () => addWater(250));
            document.getElementById('resetWaterBtn').addEventListener('click', resetWater);
            // Add missing event listeners for Water Tracker AI Voice
            const waterTipAiVoiceBtn = document.getElementById('waterTipAiVoiceBtn');
            const waterTipTtsVoiceSelect = document.getElementById('waterTipTtsVoiceSelect');
            if (waterTipAiVoiceBtn && waterTipTtsVoiceSelect) {
                waterTipAiVoiceBtn.addEventListener('click', () => {
                    speakText(document.getElementById('waterTipOutput').textContent, waterTipTtsVoiceSelect, waterTipAiVoiceBtn);
                });
            }

            // Journal
            document.getElementById('saveJournalEntryBtn').addEventListener('click', saveJournalEntry);
            document.getElementById('analyzeMoodJournalBtn').addEventListener('click', analyzeMoodJournal);
            document.getElementById('moodAnalysisAiVoiceBtn').addEventListener('click', () => {
                speakText(document.getElementById('moodAnalysisOutput').textContent, document.getElementById('moodAnalysisTtsVoiceSelect'), document.getElementById('moodAnalysisAiVoiceBtn'));
            });
            renderJournalEntries(); // Initial render

            // Local Tips
            document.getElementById('getLocalTipBtn').addEventListener('click', getLocalTip);
            document.getElementById('localTipAiVoiceBtn').addEventListener('click', () => {
                speakText(document.getElementById('localTipOutput').textContent, document.getElementById('localTipTtsVoiceSelect'), document.getElementById('localTipAiVoiceBtn'));
            });

            // Meal Plan
            document.getElementById('generateMealPlanBtn').addEventListener('click', generateMealPlan);
            document.getElementById('mealPlanAiVoiceBtn').addEventListener('click', () => {
                speakText(document.getElementById('mealPlanOutput').textContent, document.getElementById('mealPlanTtsVoiceSelect'), document.getElementById('mealPlanAiVoiceBtn'));
            });

            // Exercise & Yoga
            document.getElementById('generateExercisePlanBtn').addEventListener('click', generateExercisePlan);
            document.getElementById('exercisePlanAiVoiceBtn').addEventListener('click', () => {
                speakText(document.getElementById('exercisePlanOutput').textContent, document.getElementById('exercisePlanTtsVoiceSelect'), document.getElementById('exercisePlanAiVoiceBtn'));
            });

            // Disease Prevention
            document.getElementById('getPreventionInfoBtn').addEventListener('click', getPreventionInfo);
            document.getElementById('preventionInfoAiVoiceBtn').addEventListener('click', () => {
                speakText(document.getElementById('preventionInfoOutput').textContent, document.getElementById('preventionInfoTtsVoiceSelect'), document.getElementById('preventionInfoAiVoiceBtn'));
            });

            // Wellness Challenge
            document.getElementById('generateChallengeBtn').addEventListener('click', generateWellnessChallenge);
            document.getElementById('challengeAiVoiceBtn').addEventListener('click', () => {
                speakText(document.getElementById('challengeOutput').textContent, document.getElementById('challengeTtsVoiceSelect'), document.getElementById('challengeAiVoiceBtn'));
            });

            // Medication Reminder
            document.getElementById('addMedicationReminderBtn').addEventListener('click', addMedicationReminder);
            document.getElementById('closeAlarmModalBtn').addEventListener('click', closeAlarmModal);
            // Re-schedule existing reminders on load (if any were persisted, though this HTML doesn't persist them yet)
            medicationReminders.forEach(scheduleAlarm);

            // Body Pain Mapping
            document.getElementById('bodyMapContainer').addEventListener('click', addPainPoint);
            document.getElementById('addPainPointBtn').addEventListener('click', addPainPoint); // Button to add with current input
            document.getElementById('clearPainPointsBtn').addEventListener('click', clearPainPoints);
            renderPainPoints(); // Initial render

            // First Aid & Emergency
            document.getElementById('getEmergencyAdviceBtn').addEventListener('click', getEmergencyAdvice);
            document.getElementById('emergencyAdviceAiVoiceBtn').addEventListener('click', () => {
                speakText(document.getElementById('emergencyAdviceOutput').textContent, document.getElementById('emergencyAdviceTtsVoiceSelect'), document.getElementById('emergencyAdviceAiVoiceBtn'));
            });

            // Symptom Checker (NEW)
            document.getElementById('generateSymptomAdviceBtn').addEventListener('click', generateSymptomAdvice);
            document.getElementById('symptomAiVoiceBtn').addEventListener('click', () => {
                speakText(document.getElementById('symptomResultOutput').textContent, document.getElementById('symptomTtsVoiceSelect'), document.getElementById('symptomAiVoiceBtn'));
            });

            // Initial content update
            updateContent();
        });
    </script>
</body>
</html>
