<!DOCTYPE html>
<html lang="ta">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡ÆÜ‡Æ∞‡Øã‡Æï‡Øç‡Æï‡Æø‡ÆØ ‡Æ™‡ÆØ‡Æ©‡Øç‡Æ™‡Ææ‡Æü‡ØÅ</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts for Tamil -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Tamil:wght@400;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Noto Sans Tamil', sans-serif;
            transition: background-color 0.5s ease;
        }
        .scrollable-content {
            max-height: 400px;
            overflow-y: auto;
        }
        .pain-map-svg .body-part:hover {
            fill: #4299e1;
            cursor: pointer;
        }
        .fixed-bottom-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 -4px 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }
        /* Style for the pain map SVG to make it responsive */
        .pain-map-container {
            width: 100%;
            max-width: 400px;
            height: auto;
            margin: 0 auto;
        }
        .pain-map-svg path {
            fill: #6b7280; /* Default gray color for body parts */
            transition: fill 0.3s ease;
        }
        .pain-map-svg path.pain {
            fill: #ef4444; /* Red color for a selected painful area */
        }
    </style>
</head>
<body class="bg-gray-100 antialiased text-gray-800">

<!-- Main application container -->
<div id="app" class="min-h-screen flex flex-col items-center justify-center p-4"></div>

<!-- Fixed bottom bar for navigation. The layout is centered now. -->
<div id="bottom-bar" class="fixed-bottom-bar flex justify-center items-center gap-4 p-4 hidden">
    <!-- Content for this bar will be dynamically updated by JavaScript -->
</div>

<script type="module">
    // Language translations in Tamil and English
    const translations = {
        'ta': {
            loginTitle: '‡Æâ‡Æ≥‡Øç‡Æ®‡ØÅ‡Æ¥‡Øà‡Æï',
            usernamePlaceholder: '‡Æ™‡ÆØ‡Æ©‡Æ∞‡Øç ‡Æ™‡ØÜ‡ÆØ‡Æ∞‡Øç',
            passwordPlaceholder: '‡Æï‡Æü‡Æµ‡ØÅ‡Æö‡Øç‡Æö‡Øä‡Æ≤‡Øç',
            loginButton: '‡Æâ‡Æ≥‡Øç‡Æ®‡ØÅ‡Æ¥‡Øà‡ÆØ',
            loginError: '‡Æ§‡ÆØ‡Æµ‡ØÅ‡Æö‡ØÜ‡ÆØ‡Øç‡Æ§‡ØÅ ‡Æ™‡ÆØ‡Æ©‡Æ∞‡Øç ‡Æ™‡ØÜ‡ÆØ‡Æ∞‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æï‡Æü‡Æµ‡ØÅ‡Æö‡Øç‡Æö‡Øä‡Æ≤‡Øç‡Æ≤‡Øà ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç.',
            allFeaturesTitle: '‡ÆÖ‡Æ©‡Øà‡Æ§‡Øç‡Æ§‡ØÅ ‡ÆÜ‡Æ∞‡Øã‡Æï‡Øç‡Æï‡Æø‡ÆØ ‡ÆÖ‡ÆÆ‡Øç‡Æö‡Æô‡Øç‡Æï‡Æ≥‡Øç',
            backToFeatures: '‡ÆÖ‡ÆÆ‡Øç‡Æö‡Æô‡Øç‡Æï‡Æ≥‡ØÅ‡Æï‡Øç‡Æï‡ØÅ ‡Æ§‡Æø‡Æ∞‡ØÅ‡ÆÆ‡Øç‡Æ™‡ØÅ',
            featureNotDeveloped: '‡Æá‡Æ®‡Øç‡Æ§ ‡ÆÖ‡ÆÆ‡Øç‡Æö‡ÆÆ‡Øç ‡Æá‡Æ©‡Øç‡Æ©‡ØÅ‡ÆÆ‡Øç ‡Æâ‡Æ∞‡ØÅ‡Æµ‡Ææ‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Æµ‡Æø‡Æ≤‡Øç‡Æ≤‡Øà.',
            mainMenuTitle: '‡ÆÆ‡ØÅ‡Æï‡Øç‡Æï‡Æø‡ÆØ ‡ÆÆ‡ØÜ‡Æ©‡ØÅ',
            stepTracker: '‡Æ™‡Æü‡Æø ‡Æï‡Æ£‡Øç‡Æï‡Ææ‡Æ£‡Æø‡Æ™‡Øç‡Æ™‡ØÅ',
            heartRate: '‡Æá‡Æ§‡ÆØ‡Æ§‡Øç ‡Æ§‡ØÅ‡Æü‡Æø‡Æ™‡Øç‡Æ™‡ØÅ',
            waterIntake: '‡Æ®‡ØÄ‡Æ∞‡Øç ‡Æâ‡Æü‡Øç‡Æï‡Øä‡Æ≥‡Øç‡Æ≥‡Æ≤‡Øç',
            moodJournal: '‡ÆÆ‡Æ©‡Æ®‡Æø‡Æ≤‡Øà & ‡Æ®‡Æ©‡Øç‡Æ±‡Æø‡ÆØ‡ØÅ‡Æ£‡Æ∞‡Øç‡Æµ‡ØÅ ‡Æ®‡Ææ‡Æü‡Øç‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡ØÅ',
            medicationReminder: '‡ÆÆ‡Æ∞‡ØÅ‡Æ®‡Øç‡Æ§‡ØÅ ‡Æ®‡Æø‡Æ©‡Øà‡Æµ‡ØÇ‡Æü‡Øç‡Æü‡Æ≤‡Øç',
            foodPlan: '‡Æâ‡Æ£‡Æµ‡ØÅ‡Æ§‡Øç ‡Æ§‡Æø‡Æü‡Øç‡Æü‡ÆÆ‡Øç',
            exerciseYoga: '‡Æâ‡Æü‡Æ±‡Øç‡Æ™‡ÆØ‡Æø‡Æ±‡Øç‡Æö‡Æø & ‡ÆØ‡Øã‡Æï‡Ææ',
            bodyPainMap: '‡Æâ‡Æü‡Æ≤‡Øç ‡Æµ‡Æ≤‡Æø ‡Æµ‡Æ∞‡Øà‡Æ™‡Æü‡ÆÆ‡Øç',
            generalTips: '‡Æ™‡Øä‡Æ§‡ØÅ‡Æµ‡Ææ‡Æ© ‡Æö‡ØÅ‡Æï‡Ææ‡Æ§‡Ææ‡Æ∞ ‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡ØÅ‡Æï‡Æ≥‡Øç',
            localTips: '‡Æâ‡Æ≥‡Øç‡Æ≥‡ØÇ‡Æ∞‡Øç ‡Æö‡ØÅ‡Æï‡Ææ‡Æ§‡Ææ‡Æ∞ ‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡ØÅ‡Æï‡Æ≥‡Øç',
            beautyTips: '‡Æµ‡ØÄ‡Æü‡Øç‡Æü‡ØÅ ‡ÆÖ‡Æ¥‡Æï‡ØÅ ‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡ØÅ‡Æï‡Æ≥‡Øç',
            symptomFinder: '‡ÆÖ‡Æ±‡Æø‡Æï‡ØÅ‡Æ±‡Æø‡Æï‡Æ≥‡Øç ‡Æï‡Æ£‡Øç‡Æü‡ØÅ‡Æ™‡Æø‡Æü‡Æø‡Æ™‡Øç‡Æ™‡ØÅ AI',
            firstAid: '‡ÆÆ‡ØÅ‡Æ§‡Æ≤‡ØÅ‡Æ§‡Æµ‡Æø & ‡ÆÖ‡Æµ‡Æö‡Æ∞‡ÆÆ‡Øç',
            foodRecipes: '‡Æâ‡Æ£‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆÆ‡ØÅ‡Æ±‡Øà‡Æï‡Æ≥‡Øç',
            search: '‡Æ§‡Øá‡Æü‡ØÅ',
            submit: '‡Æö‡ÆÆ‡Æ∞‡Øç‡Æ™‡Øç‡Æ™‡Æø',
            yourTipHere: '‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡ØÅ ‡Æá‡Æô‡Øç‡Æï‡Øá ‡Æ§‡Øã‡Æ©‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç.',
            noRecipe: '‡Æö‡ØÜ‡ÆØ‡Øç‡ÆÆ‡ØÅ‡Æ±‡Øà ‡Æé‡Æ§‡ØÅ‡Æµ‡ØÅ‡ÆÆ‡Øç ‡Æï‡Æø‡Æü‡Øà‡Æï‡Øç‡Æï‡Æµ‡Æø‡Æ≤‡Øç‡Æ≤‡Øà. ‡ÆÆ‡ØÄ‡Æ£‡Øç‡Æü‡ØÅ‡ÆÆ‡Øç ‡ÆÆ‡ØÅ‡ÆØ‡Æ±‡Øç‡Æö‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç.',
            loadingMessage: 'AI ‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡Øà ‡Æâ‡Æ∞‡ØÅ‡Æµ‡Ææ‡Æï‡Øç‡Æï‡ØÅ‡Æï‡Æø‡Æ±‡Æ§‡ØÅ...',
            inputPlaceholderGeneral: '‡Æ®‡ØÄ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æµ‡Æø‡Æ∞‡ØÅ‡ÆÆ‡Øç‡Æ™‡ØÅ‡ÆÆ‡Øç ‡Æ™‡Øä‡Æ§‡ØÅ‡Æµ‡Ææ‡Æ© ‡Æö‡ØÅ‡Æï‡Ææ‡Æ§‡Ææ‡Æ∞ ‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡ØÅ‡Æï‡Æ≥‡Øà‡Æ™‡Øç ‡Æ™‡ØÜ‡Æ±‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç.',
            inputPlaceholderBeauty: '‡Æ®‡ØÄ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æµ‡Æø‡Æ∞‡ØÅ‡ÆÆ‡Øç‡Æ™‡ØÅ‡ÆÆ‡Øç ‡ÆÖ‡Æ¥‡Æï‡ØÅ ‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡ØÅ‡Æï‡Æ≥‡Øà‡Æ™‡Øç ‡Æ™‡ØÜ‡Æ±‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç.',
            inputPlaceholderLocal: '‡Æ®‡ØÄ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æµ‡Æø‡Æ∞‡ØÅ‡ÆÆ‡Øç‡Æ™‡ØÅ‡ÆÆ‡Øç ‡Æâ‡Æ≥‡Øç‡Æ≥‡ØÇ‡Æ∞‡Øç ‡Æö‡ØÅ‡Æï‡Ææ‡Æ§‡Ææ‡Æ∞ ‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡ØÅ‡Æï‡Æ≥‡Øà‡Æ™‡Øç ‡Æ™‡ØÜ‡Æ±‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç.',
            inputPlaceholderSymptom: '‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÖ‡Æ±‡Æø‡Æï‡ØÅ‡Æ±‡Æø‡Æï‡Æ≥‡Øç ‡Æ™‡Æ±‡Øç‡Æ±‡Æø‡ÆØ ‡Æ§‡Æï‡Æµ‡Æ≤‡Øç‡Æï‡Æ≥‡Øà‡Æ™‡Øç ‡Æ™‡ØÜ‡Æ±‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç.',
            inputPlaceholderRecipes: '‡Æí‡Æ∞‡ØÅ ‡Æâ‡Æ£‡Æµ‡Æø‡Æ©‡Øç ‡Æ™‡ØÜ‡ÆØ‡Æ∞‡Øç ‡ÆÖ‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ ‡ÆÆ‡ØÇ‡Æ≤‡Æ™‡Øç‡Æ™‡Øä‡Æ∞‡ØÅ‡Æü‡Øç‡Æï‡Æ≥‡Øà ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Øç‡Æü‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆÆ‡ØÅ‡Æ±‡Øà‡ÆØ‡Øà‡Æ™‡Øç ‡Æ™‡ØÜ‡Æ±‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç.',
            getTip: '‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡Øà‡Æ™‡Øç ‡Æ™‡ØÜ‡Æ±‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç',
            stepsCount: '‡Æ™‡Æü‡Æø‡Æï‡Æ≥‡Øç: ',
            startTracking: '‡Æï‡Æ£‡Øç‡Æï‡Ææ‡Æ£‡Æø‡Æ™‡Øç‡Æ™‡Øà ‡Æ§‡Øä‡Æü‡Æô‡Øç‡Æï‡ØÅ',
            stopTracking: '‡Æï‡Æ£‡Øç‡Æï‡Ææ‡Æ£‡Æø‡Æ™‡Øç‡Æ™‡Øà ‡Æ®‡Æø‡Æ±‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ',
            reset: '‡Æ™‡Æü‡Æø‡Æï‡Æ≥‡Øà ‡ÆÆ‡ØÄ‡Æü‡Øç‡Æü‡ÆÆ‡Øà',
            stepMotivation: '‡Æí‡Æ∞‡ØÅ ‡Æ®‡Ææ‡Æ≥‡Øà‡Æï‡Øç‡Æï‡ØÅ 10,000 ‡Æ™‡Æü‡Æø‡Æï‡Æ≥‡Øç ‡Æ®‡Æü‡Æ™‡Øç‡Æ™‡Æ§‡ØÅ ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÜ‡Æ∞‡Øã‡Æï‡Øç‡Æï‡Æø‡ÆØ‡Æ§‡Øç‡Æ§‡Øà ‡Æï‡Æ£‡Æø‡Æö‡ÆÆ‡Ææ‡Æï ‡ÆÆ‡Øá‡ÆÆ‡Øç‡Æ™‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ‡ÆÆ‡Øç.',
            journalPrompt: '‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÆ‡Æ©‡Æ®‡Æø‡Æ≤‡Øà‡ÆØ‡Øà‡ÆØ‡ØÅ‡ÆÆ‡Øç, ‡Æ®‡ØÄ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ®‡Æ©‡Øç‡Æ±‡Æø‡ÆØ‡ØÅ‡Æ≥‡Øç‡Æ≥ ‡Æµ‡Æø‡Æ∑‡ÆØ‡Æô‡Øç‡Æï‡Æ≥‡Øà‡ÆØ‡ØÅ‡ÆÆ‡Øç ‡Æ§‡Æø‡Æ©‡ÆÆ‡ØÅ‡ÆÆ‡Øç ‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç.',
            moodSelect: '-- ‡ÆÆ‡Æ©‡Æ®‡Æø‡Æ≤‡Øà‡ÆØ‡Øà‡Æ§‡Øç ‡Æ§‡Øá‡Æ∞‡Øç‡Æµ‡ØÅ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡Æµ‡ØÅ‡ÆÆ‡Øç --',
            moodHappy: '‡ÆÆ‡Æï‡Æø‡Æ¥‡Øç‡Æö‡Øç‡Æö‡Æø',
            moodSad: '‡Æö‡Øã‡Æï‡ÆÆ‡Øç',
            moodNormal: '‡Æö‡Ææ‡Æ§‡Ææ‡Æ∞‡Æ£‡ÆÆ‡Øç',
            moodAnxious: '‡Æ™‡Æ§‡Æü‡Øç‡Æü‡ÆÆ‡Øç',
            moodGrateful: '‡Æ®‡Æ©‡Øç‡Æ±‡Æø‡ÆØ‡ØÅ‡Æ£‡Æ∞‡Øç‡Æµ‡ØÅ',
            saveEntry: '‡Æ™‡Æ§‡Æø‡Æµ‡Øà ‡Æö‡Øá‡ÆÆ‡Æø',
            analyzeMood: '‡ÆÆ‡Æ©‡Æ®‡Æø‡Æ≤‡Øà‡ÆØ‡Øà ‡Æ™‡Æï‡ØÅ‡Æ™‡Øç‡Æ™‡Ææ‡ÆØ‡Øç‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç',
            moodAnalysis: '‡ÆÆ‡Æ©‡Æ®‡Æø‡Æ≤‡Øà ‡Æ™‡Æï‡ØÅ‡Æ™‡Øç‡Æ™‡Ææ‡ÆØ‡Øç‡Æµ‡ØÅ',
            moodAnalysisPlaceholder: '‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÆ‡Æ©‡Æ®‡Æø‡Æ≤‡Øà ‡Æ™‡Æï‡ØÅ‡Æ™‡Øç‡Æ™‡Ææ‡ÆØ‡Øç‡Æµ‡ØÅ ‡Æá‡Æô‡Øç‡Æï‡Øá ‡Æ§‡Øã‡Æ©‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç.',
            yourEntries: '‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ‡Æï‡Æ≥‡Øç',
            entriesPlaceholder: '‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ®‡Ææ‡Æü‡Øç‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡ØÅ ‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ‡Æï‡Æ≥‡Øç ‡Æá‡Æô‡Øç‡Æï‡Øá ‡Æ§‡Øã‡Æ©‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç.',
            foodPlanPrompt: '‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æâ‡Æ£‡Æµ‡ØÅ, ‡Æâ‡Æü‡Æ≤‡Øç‡Æ®‡Æ≤‡ÆÆ‡Øç, ‡Æí‡Æµ‡Øç‡Æµ‡Ææ‡ÆÆ‡Øà ‡ÆÖ‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ ‡Æ™‡Æø‡Æ∞‡Æö‡Øç‡Æö‡Æ©‡Øà‡ÆØ‡Øà ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç.',
            painMapPrompt: '‡Æâ‡Æü‡Æ≤‡Æø‡Æ©‡Øç ‡Æé‡Æ®‡Øç‡Æ§‡Æ™‡Øç ‡Æ™‡Æï‡ØÅ‡Æ§‡Æø‡ÆØ‡Æø‡Æ≤‡Øç ‡Æµ‡Æ≤‡Æø ‡Æá‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡Æø‡Æ±‡Æ§‡Øã, ‡ÆÖ‡Æ§‡Øà‡Æ§‡Øç ‡Æ§‡Øä‡Æü‡Øç‡Æü‡ØÅ ‡Æµ‡Æ≤‡Æø ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡ÆÖ‡Æ§‡Æ©‡Øç ‡Æµ‡Æø‡Æ≥‡Æï‡Øç‡Æï‡Æ§‡Øç‡Æ§‡Øà ‡Æö‡Øá‡Æ∞‡Øç‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç.',
            removePain: '‡Æ®‡ØÄ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÖ‡Æ§‡Øà ‡ÆÆ‡ØÄ‡Æ£‡Øç‡Æü‡ØÅ‡ÆÆ‡Øç ‡ÆÖ‡Æ¥‡ØÅ‡Æ§‡Øç‡Æ§‡Æø‡Æ©‡Ææ‡Æ≤‡Øç ‡Æµ‡Æ≤‡Æø ‡Æ®‡ØÄ‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡ÆÆ‡Øç.',
            aiTipTitle: 'AI ‡Æâ‡Æ§‡Æµ‡Æø‡Æï‡Øç‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡ØÅ',
            firstAidPrompt: '‡ÆÖ‡Æµ‡Æö‡Æ∞ ‡Æï‡Ææ‡Æ≤‡Æô‡Øç‡Æï‡Æ≥‡Æø‡Æ≤‡Øç ‡Æâ‡Æ§‡Æµ‡Æø‡Æï‡Æ≥‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æ§‡Æï‡Æµ‡Æ≤‡Øç‡Æï‡Æ≥‡Øà ‡Æ™‡ØÜ‡Æ±‡Æµ‡ØÅ‡ÆÆ‡Øç.',
            emergencyContacts: '‡ÆÖ‡Æµ‡Æö‡Æ∞ ‡Æ§‡Øä‡Æü‡Æ∞‡Øç‡Æ™‡ØÅ‡Æï‡Æ≥‡Øç',
            addContact: '‡Æ§‡Øä‡Æü‡Æ∞‡Øç‡Æ™‡Øà ‡Æö‡Øá‡Æ∞‡Øç',
            noContacts: '‡ÆÖ‡Æµ‡Æö‡Æ∞ ‡Æ§‡Øä‡Æü‡Æ∞‡Øç‡Æ™‡ØÅ‡Æï‡Æ≥‡Øç ‡Æé‡Æ§‡ØÅ‡Æµ‡ØÅ‡ÆÆ‡Øç ‡Æá‡Æ≤‡Øç‡Æ≤‡Øà.',
            symptomPrompt: '‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÖ‡Æ±‡Æø‡Æï‡ØÅ‡Æ±‡Æø‡Æï‡Æ≥‡Øç ‡Æ™‡Æ±‡Øç‡Æ±‡Æø‡ÆØ ‡Æ§‡Æï‡Æµ‡Æ≤‡Øç‡Æï‡Æ≥‡Øà‡Æ™‡Øç ‡Æ™‡ØÜ‡Æ±‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç.',
            exercisePrompt: '‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æâ‡Æü‡Æ±‡Øç‡Æ™‡ÆØ‡Æø‡Æ±‡Øç‡Æö‡Æø, ‡Æµ‡Æ≤‡Æø ‡ÆÖ‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ ‡Æ™‡Æø‡Æ∞‡Æö‡Øç‡Æö‡Æ©‡Øà‡Æï‡Øç‡Æï‡Ææ‡Æ© ‡ÆØ‡Øã‡Æö‡Æ©‡Øà‡Æï‡Æ≥‡Øà ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç.',
            painPromptPrefix: '‡Æá‡Æ®‡Øç‡Æ§ ‡Æâ‡Æü‡Æ±‡Øç‡Æ™‡Æï‡ØÅ‡Æ§‡Æø ‡Æµ‡Æ≤‡Æø‡Æï‡Øç‡Æï‡ØÅ ‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡ØÅ‡Æï‡Æ≥‡Øç:',
            painMapTipInstructions: '‡Æµ‡Æ≤‡Æø ‡Æâ‡Æ≥‡Øç‡Æ≥ ‡Æ™‡Æï‡ØÅ‡Æ§‡Æø‡ÆØ‡Øà‡Æ§‡Øç ‡Æ§‡Øä‡Æü‡Øç‡Æü‡ØÅ, ‡ÆÖ‡Æ§‡Æ©‡Øç ‡Æ™‡Æ±‡Øç‡Æ±‡Æø‡ÆØ ‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡ØÅ‡Æï‡Æ≥‡Øà‡Æ™‡Øç ‡Æ™‡ØÜ‡Æ±‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç.',
            genericPainTip: 'Touch a body part to get tips for pain in that area.'
        },
        'en': {
            loginTitle: 'Login',
            usernamePlaceholder: 'Username',
            passwordPlaceholder: 'Password',
            loginButton: 'Log In',
            loginError: 'Please enter a username and password.',
            allFeaturesTitle: 'All Health Features',
            backToFeatures: 'Back to Features',
            featureNotDeveloped: 'This feature is not yet developed.',
            mainMenuTitle: 'Main Menu',
            stepTracker: 'Step Tracker',
            heartRate: 'Heart Rate',
            waterIntake: 'Water Intake',
            moodJournal: 'Mood & Gratitude Journal',
            medicationReminder: 'Medication Reminder',
            foodPlan: 'Food Plan',
            exerciseYoga: 'Exercise & Yoga',
            bodyPainMap: 'Body Pain Map',
            generalTips: 'General Health Tips',
            localTips: 'Local Health Tips',
            beautyTips: 'Home Beauty Tips',
            symptomFinder: 'Symptom Finder AI',
            firstAid: 'First Aid & Emergency',
            foodRecipes: 'Food Recipes',
            search: 'Search',
            submit: 'Submit',
            yourTipHere: 'Your tip will appear here.',
            noRecipe: 'No recipe available. Please try again.',
            loadingMessage: 'Generating AI tip...',
            inputPlaceholderGeneral: 'Get the general health tips you want.',
            inputPlaceholderBeauty: 'Get the beauty tips you want.',
            inputPlaceholderLocal: 'Get the local health tips you want.',
            inputPlaceholderSymptom: 'Get information about your symptoms.',
            inputPlaceholderRecipes: 'Enter a food name or ingredients to get the recipe.',
            getTip: 'Get Tips',
            stepsCount: 'Steps: ',
            startTracking: 'Start Tracking',
            stopTracking: 'Stop Tracking',
            reset: 'Reset Steps',
            stepMotivation: 'Walking 10,000 steps a day can significantly improve your health.',
            journalPrompt: 'Record your mood and things you are grateful for daily.',
            moodSelect: '-- Select a mood --',
            moodHappy: 'Happy',
            moodSad: 'Sad',
            moodNormal: 'Normal',
            moodAnxious: 'Anxious',
            moodGrateful: 'Grateful',
            saveEntry: 'Save Entry',
            analyzeMood: 'Analyze Mood',
            moodAnalysis: 'Mood Analysis',
            moodAnalysisPlaceholder: 'Your mood analysis will appear here.',
            yourEntries: 'Your Entries',
            entriesPlaceholder: 'Your journal entries will appear here.',
            foodPlanPrompt: 'Enter your diet, health, allergy or problem.',
            painMapPrompt: 'Touch the area of your body where you have pain to add the pain and its description.',
            removePain: 'You can touch it again to remove the pain.',
            aiTipTitle: 'AI Tip',
            firstAidPrompt: 'Get help and information in emergencies.',
            emergencyContacts: 'Emergency Contacts',
            addContact: 'Add Contact',
            noContacts: 'No emergency contacts added.',
            symptomPrompt: 'Get information about your symptoms.',
            exercisePrompt: 'Enter your exercise, pain or problem for ideas.',
            painPromptPrefix: 'Tips for this body part pain:',
            painMapTipInstructions: 'Touch a painful area to get tips about it.',
            genericPainTip: 'Touch a body part to get tips for pain in that area.'
        }
    };

    let currentPage = 'login';
    let currentLang = 'ta';
    let steps = 0;
    let stepTrackerInterval = null;
    const moodEntries = [];
    const foodPlan = [];
    const emergencyContacts = [];
    const painMapState = {};

    const getTranslation = (key) => translations[currentLang][key] || key;
    const appContainer = document.getElementById('app');
    const bottomBar = document.getElementById('bottom-bar');

    // Speech Recognition and Synthesis APIs
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    const synth = window.speechSynthesis;

    const startSpeechRecognition = (inputElementId) => {
        if (!SpeechRecognition) {
            document.getElementById('aiTip').textContent = 'Your browser does not support Speech Recognition.';
            return;
        }

        const recognition = new SpeechRecognition();
        recognition.lang = currentLang === 'ta' ? 'ta-IN' : 'en-US';
        recognition.interimResults = false;
        recognition.maxAlternatives = 1;

        const input = document.getElementById(inputElementId);
        if (input) {
            recognition.start();
            document.getElementById('aiTip').textContent = 'Listening...';
        }

        recognition.onresult = (event) => {
            const speechResult = event.results[0][0].transcript;
            if (input) {
                input.value = speechResult;
            }
            document.getElementById('aiTip').textContent = '';
        };

        recognition.onerror = (event) => {
            console.error('Speech recognition error', event.error);
            document.getElementById('aiTip').textContent = `Speech recognition error: ${event.error}`;
        };
    };

    const speakText = (text) => {
        if (synth.speaking) {
            synth.cancel();
        }
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = currentLang === 'ta' ? 'ta-IN' : 'en-US';
        synth.speak(utterance);
    };

    // AI Tip Generation using Gemini API
    const getAiTipFromPrompt = async (prompt, type, outputId) => {
        const outputElement = document.getElementById(outputId);
        outputElement.innerHTML = `<i class="fas fa-spinner fa-spin mr-2"></i> ${getTranslation('loadingMessage')}`;

        // Add instructions to the prompt to get a point-by-point list
        const finalPrompt = `${prompt}
Please provide a response in ${currentLang === 'ta' ? 'Tamil' : 'English'}. Format the response as a detailed, point-by-point list. Do not include any introductory or concluding sentences outside of the list.`;

        try {
            const chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: finalPrompt }] });
            const payload = { contents: chatHistory };
            
            // ---------------------------------------------------------------------------------------------------
            // IMPORTANT: You need to replace "YOUR_API_KEY_HERE" with your actual Gemini API key.
            // Get your key from here: https://ai.google.dev/
            // ---------------------------------------------------------------------------------------------------
            const apiKey = "AIzaSyA5Kji5739tmhOPFJi0De2Pl_io2Jmo-V0";
            
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });
            if (!response.ok) {
                throw new Error(`API call failed with status: ${response.status}`);
            }
            const result = await response.json();
            
            let tipText = getTranslation('yourTipHere');
            if (result.candidates && result.candidates.length > 0 &&
                result.candidates[0].content && result.candidates[0].content.parts &&
                result.candidates[0].content.parts.length > 0) {
                tipText = result.candidates[0].content.parts[0].text;
            } else {
                tipText = `Failed to get a tip. Please try again.`;
            }

            outputElement.textContent = tipText;
        } catch (error) {
            console.error('Error generating AI tip:', error);
            outputElement.textContent = 'Failed to generate a tip. Please check your network and try again.';
        }
    };

    // Main render function to control page views
    const render = () => {
        // Clear all event listeners by clearing innerHTML, then re-render
        appContainer.innerHTML = '';
        bottomBar.innerHTML = '';

        // Hide bottom bar by default and show it only when needed
        bottomBar.classList.add('hidden');

        switch(currentPage) {
            case 'login':
                renderLoginPage();
                break;
            case 'main':
                renderMainPage();
                break;
            case 'stepTracker':
                renderStepTrackerPage();
                renderBottomBar();
                break;
            case 'moodJournal':
                renderMoodJournalPage();
                renderBottomBar();
                break;
            case 'foodRecipes':
                renderFoodRecipesPage();
                renderBottomBar();
                break;
            case 'bodyPainMap':
                renderBodyPainMapPage();
                renderBottomBar();
                break;
            case 'firstAid':
                renderFirstAidPage();
                renderBottomBar();
                break;
            case 'exerciseYoga':
            case 'beautyTips':
            case 'generalTips':
            case 'localTips':
            case 'symptomFinder':
            case 'foodPlan':
                const featureTitle = getTranslation(currentPage);
                let placeholderKey = currentPage === 'foodPlan' ? 'foodPlanPrompt' : (currentPage === 'exerciseYoga' ? 'exercisePrompt' : `inputPlaceholder${currentPage.charAt(0).toUpperCase() + currentPage.slice(1)}`);
                if (!translations[currentLang][placeholderKey]) {
                    placeholderKey = 'yourTipHere'; // fallback to a generic placeholder
                }
                renderAiTipsPage(featureTitle, getTranslation(placeholderKey), currentPage);
                renderBottomBar();
                break;
            default:
                renderSimplePage(getTranslation('featureNotDeveloped'), 'üö´', '');
                break;
        }
    };

    // Navigation function
    const navigateTo = (page) => {
        if (stepTrackerInterval) {
            clearInterval(stepTrackerInterval);
            stepTrackerInterval = null;
        }
        currentPage = page;
        render();
    };
    
    // Function to toggle language
    const toggleLanguage = () => {
        currentLang = currentLang === 'ta' ? 'en' : 'ta';
        render();
    };
    
    // Renders the bottom bar with the new centered layout
    const renderBottomBar = () => {
        bottomBar.innerHTML = `
            <button id="backButton" class="bg-gray-200 text-gray-800 p-3 rounded-full shadow-lg hover:bg-gray-300 transition-colors flex items-center justify-center">
                <i class="fa fa-arrow-left"></i>
                <span class="ml-2 font-bold">${getTranslation('backToFeatures')}</span>
            </button>
            <button id="langToggleBottom" class="bg-gray-200 text-gray-800 text-xl p-3 rounded-full shadow-lg hover:bg-gray-300 transition-colors flex items-center justify-center">
                <i class="fa fa-globe"></i>
            </button>
        `;
        bottomBar.classList.remove('hidden');
        document.getElementById('backButton').addEventListener('click', () => navigateTo('main'));
        document.getElementById('langToggleBottom').addEventListener('click', toggleLanguage);
    };

    // Renders the login page
    const renderLoginPage = () => {
        appContainer.innerHTML = `
            <div class="flex items-center justify-center min-h-screen bg-gradient-to-br from-green-500 to-blue-500 p-4">
                <div class="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-sm transform transition-transform hover:scale-105">
                    <h1 class="text-3xl font-extrabold text-center text-gray-800 mb-6">${getTranslation('loginTitle')}</h1>
                    <form id="loginForm" class="flex flex-col space-y-4">
                        <input type="text" id="username" placeholder="${getTranslation('usernamePlaceholder')}" class="p-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-400">
                        <input type="password" id="password" placeholder="${getTranslation('passwordPlaceholder')}" class="p-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-400">
                        <p id="errorMsg" class="text-red-500 text-sm text-center hidden"></p>
                        <button type="submit" class="bg-green-500 text-white font-bold p-3 rounded-lg shadow-md hover:bg-green-600 transition-colors">${getTranslation('loginButton')}</button>
                    </form>
                </div>
            </div>
        `;

        document.getElementById('loginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const errorMsg = document.getElementById('errorMsg');
            if (username && password) {
                navigateTo('main');
            } else {
                errorMsg.textContent = getTranslation('loginError');
                errorMsg.classList.remove('hidden');
            }
        });
    };

    // Renders the main menu page
    const renderMainPage = () => {
        const mainPageHtml = `
            <div class="flex flex-col items-center min-h-screen bg-gradient-to-br from-blue-500 to-green-500 p-8 text-gray-800 relative">
                <h1 class="text-4xl font-extrabold mb-8 text-center text-white drop-shadow-lg">${getTranslation('allFeaturesTitle')}</h1>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-6 w-full max-w-5xl">
                    ${renderFeatureCardHtml('stepTracker', 'üö∂', getTranslation('stepTracker'))}
                    ${renderFeatureCardHtml('generalTips', 'üß†', getTranslation('generalTips'))}
                    ${renderFeatureCardHtml('localTips', 'üå±', getTranslation('localTips'))}
                    ${renderFeatureCardHtml('beautyTips', '‚ú®', getTranslation('beautyTips'))}
                    ${renderFeatureCardHtml('symptomFinder', 'ü©∫', getTranslation('symptomFinder'))}
                    ${renderFeatureCardHtml('foodPlan', 'üçé', getTranslation('foodPlan'))}
                    ${renderFeatureCardHtml('exerciseYoga', 'üßò', getTranslation('exerciseYoga'))}
                    ${renderFeatureCardHtml('firstAid', '‚õëÔ∏è', getTranslation('firstAid'))}
                    ${renderFeatureCardHtml('bodyPainMap', 'üó∫Ô∏è', getTranslation('bodyPainMap'))}
                    ${renderFeatureCardHtml('moodJournal', 'üòä', getTranslation('moodJournal'))}
                    ${renderFeatureCardHtml('foodRecipes', 'üç≤', getTranslation('foodRecipes'))}
                </div>
            </div>
        `;
        appContainer.innerHTML = mainPageHtml;
        
        // Add event listeners after the HTML is rendered
        document.querySelectorAll('[data-page]').forEach(button => {
            button.addEventListener('click', () => navigateTo(button.dataset.page));
        });
    };

    // Helper function to generate feature card HTML
    const renderFeatureCardHtml = (page, icon, title) => {
        return `
            <button data-page="${page}" class="flex flex-col items-center justify-center p-6 bg-white rounded-2xl shadow-xl hover:shadow-2xl transition-all transform hover:scale-105 border border-gray-200">
                <div class="text-5xl mb-3">${icon}</div>
                <div class="text-md font-semibold text-center text-gray-800">${title}</div>
            </button>
        `;
    };

    // Implemented feature pages below
    const renderStepTrackerPage = () => {
        appContainer.innerHTML = `
            <div class="min-h-screen flex flex-col items-center p-8 bg-gray-100 text-gray-800">
                <div class="max-w-2xl w-full text-center bg-white rounded-2xl shadow-2xl p-8 relative">
                    <h1 class="text-4xl font-extrabold mb-4">${getTranslation('stepTracker')}</h1>
                    <div class="flex flex-col items-center justify-center space-y-4">
                        <div id="stepsDisplay" class="text-5xl font-bold text-green-600">${steps}</div>
                        <p class="text-lg">${getTranslation('stepMotivation')}</p>
                        <div class="flex space-x-4">
                            <button id="startTrackingBtn" class="bg-blue-500 text-white font-bold py-2 px-6 rounded-full shadow-lg hover:bg-blue-600 transition-colors">${getTranslation('startTracking')}</button>
                            <button id="stopTrackingBtn" class="bg-red-500 text-white font-bold py-2 px-6 rounded-full shadow-lg hover:bg-red-600 transition-colors">${getTranslation('stopTracking')}</button>
                        </div>
                        <button id="resetStepsBtn" class="bg-gray-400 text-white font-bold py-2 px-6 rounded-full shadow-lg hover:bg-gray-500 transition-colors">${getTranslation('reset')}</button>
                    </div>
                </div>
            </div>
        `;

        document.getElementById('startTrackingBtn').addEventListener('click', () => {
            if (!stepTrackerInterval) {
                stepTrackerInterval = setInterval(() => {
                    steps++;
                    document.getElementById('stepsDisplay').textContent = steps;
                }, 1500);
            }
        });
        document.getElementById('stopTrackingBtn').addEventListener('click', () => {
            if (stepTrackerInterval) {
                clearInterval(stepTrackerInterval);
                stepTrackerInterval = null;
            }
        });
        document.getElementById('resetStepsBtn').addEventListener('click', () => {
            steps = 0;
            if (stepTrackerInterval) {
                clearInterval(stepTrackerInterval);
                stepTrackerInterval = null;
            }
            document.getElementById('stepsDisplay').textContent = steps;
        });
    };

    const renderMoodJournalPage = () => {
        appContainer.innerHTML = `
            <div class="min-h-screen flex flex-col items-center p-8 bg-gray-100 text-gray-800">
                <div class="max-w-2xl w-full bg-white rounded-2xl shadow-2xl p-8 relative">
                    <h1 class="text-4xl font-extrabold mb-4 text-center">${getTranslation('moodJournal')}</h1>
                    <p class="text-center mb-4">${getTranslation('journalPrompt')}</p>
                    <div class="flex flex-col space-y-4">
                        <select id="moodSelect" class="p-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-400">
                            <option value="">${getTranslation('moodSelect')}</option>
                            <option value="Happy">${getTranslation('moodHappy')}</option>
                            <option value="Sad">${getTranslation('moodSad')}</option>
                            <option value="Normal">${getTranslation('moodNormal')}</option>
                            <option value="Anxious">${getTranslation('moodAnxious')}</option>
                            <option value="Grateful">${getTranslation('moodGrateful')}</option>
                        </select>
                        <div class="flex items-center space-x-2">
                            <textarea id="moodEntry" placeholder="${getTranslation('journalPrompt')}" rows="5" class="flex-grow p-4 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-400"></textarea>
                            <button class="mic-btn text-xl text-gray-600 hover:text-blue-500 transition-colors p-2" data-input-id="moodEntry">üé§</button>
                        </div>
                        <button id="saveEntryBtn" class="bg-green-500 text-white font-bold p-3 rounded-lg shadow-md hover:bg-green-600 transition-colors">${getTranslation('saveEntry')}</button>
                    </div>
                    <div class="mt-8">
                        <h2 class="text-2xl font-bold mb-4">${getTranslation('yourEntries')}</h2>
                        <ul id="entriesList" class="space-y-4 scrollable-content">
                            ${moodEntries.map(entry => `<li class="p-4 bg-gray-100 rounded-lg shadow-inner">${entry}</li>`).join('')}
                            ${moodEntries.length === 0 ? `<li class="p-4 text-gray-500">${getTranslation('entriesPlaceholder')}</li>` : ''}
                        </ul>
                    </div>
                    <div class="mt-8">
                        <h2 class="text-2xl font-bold mb-4">${getTranslation('moodAnalysis')}</h2>
                        <div class="flex items-center space-x-2">
                            <div id="moodAnalysisResult" class="flex-grow p-4 bg-gray-100 rounded-lg whitespace-pre-wrap min-h-[100px] text-gray-800">
                                ${getTranslation('moodAnalysisPlaceholder')}
                            </div>
                            <button id="speakAnalysisBtn" class="text-xl text-gray-600 hover:text-green-500 transition-colors p-2">üîä</button>
                        </div>
                        <button id="analyzeMoodBtn" class="bg-blue-500 text-white font-bold p-3 rounded-lg shadow-md hover:bg-blue-600 transition-colors mt-4">${getTranslation('analyzeMood')}</button>
                    </div>
                </div>
            </div>
        `;
        document.querySelector('#speakAnalysisBtn').addEventListener('click', () => {
            const text = document.querySelector('#moodAnalysisResult').textContent;
            speakText(text);
        });
        document.querySelectorAll('.mic-btn').forEach(btn => {
            btn.addEventListener('click', () => startSpeechRecognition(btn.dataset.inputId));
        });
        document.getElementById('saveEntryBtn').addEventListener('click', () => {
            const mood = document.getElementById('moodSelect').value;
            const entryText = document.getElementById('moodEntry').value.trim();
            if (mood && entryText) {
                const timestamp = new Date().toLocaleString(currentLang === 'ta' ? 'ta-IN' : 'en-US');
                moodEntries.push(`${timestamp} - ${getTranslation(`mood${mood}`)}: ${entryText}`);
                document.getElementById('moodEntry').value = '';
                render(); // Re-render to show new entry
            }
        });
        document.getElementById('analyzeMoodBtn').addEventListener('click', () => {
            const analysisContainer = document.getElementById('moodAnalysisResult');
            analysisContainer.textContent = getTranslation('loadingMessage');
            const prompt = `‡Æ§‡ÆÆ‡Æø‡Æ¥‡Æø‡Æ≤‡Øç, ‡Æá‡Æ®‡Øç‡Æ§ ‡Æ®‡Ææ‡Æü‡Øç‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡ØÅ ‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ‡Æï‡Æ≥‡Æø‡Æ©‡Øç ‡ÆÖ‡Æü‡Æø‡Æ™‡Øç‡Æ™‡Æü‡Øà‡ÆØ‡Æø‡Æ≤‡Øç ‡ÆÆ‡Æ©‡Æ®‡Æø‡Æ≤‡Øà ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æâ‡Æ£‡Æ∞‡Øç‡Æö‡Øç‡Æö‡Æø ‡Æ™‡Æï‡ØÅ‡Æ™‡Øç‡Æ™‡Ææ‡ÆØ‡Øç‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡Æµ‡ØÅ‡ÆÆ‡Øç: ${moodEntries.join(', ')}. ‡Æá‡Æ§‡ØÅ ‡Æí‡Æ∞‡ØÅ ‡Æ™‡Øä‡Æ§‡ØÅ‡Æµ‡Ææ‡Æ© ‡Æ™‡Æï‡ØÅ‡Æ™‡Øç‡Æ™‡Ææ‡ÆØ‡Øç‡Æµ‡ØÅ ‡Æé‡Æ©‡Øç‡Æ™‡Æ§‡Øà ‡Æ®‡Æø‡Æ©‡Øà‡Æµ‡Æø‡Æ≤‡Øç ‡Æï‡Øä‡Æ≥‡Øç‡Æ≥‡Æµ‡ØÅ‡ÆÆ‡Øç. ‡Æµ‡Øá‡Æ±‡ØÅ ‡Æé‡Æ®‡Øç‡Æ§ ‡Æµ‡Æø‡Æ≥‡Æï‡Øç‡Æï‡ÆÆ‡ØÅ‡ÆÆ‡Øç ‡Æµ‡Øá‡Æ£‡Øç‡Æü‡Ææ‡ÆÆ‡Øç.`;
            getAiTipFromPrompt(prompt, 'mood-analysis', 'moodAnalysisResult');
        });
    };

    const renderFoodRecipesPage = () => {
        appContainer.innerHTML = `
            <div class="min-h-screen flex flex-col items-center p-8 bg-gray-100 text-gray-800">
                <div class="max-w-2xl w-full bg-white rounded-2xl shadow-2xl p-8 relative">
                    <h1 class="text-4xl font-extrabold mb-4 text-center">${getTranslation('foodRecipes')}</h1>
                    <p class="text-lg text-center mb-6">${getTranslation('inputPlaceholderRecipes')}</p>
                    <div class="flex items-center w-full mb-4">
                        <input type="text" id="aiQuery" placeholder="${getTranslation('search')}" class="flex-grow p-3 border-2 border-gray-200 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-green-400 text-gray-800" />
                        <button class="mic-btn text-xl text-gray-600 hover:text-blue-500 transition-colors p-2" data-input-id="aiQuery">üé§</button>
                        <button id="aiSearchBtn" class="bg-green-500 text-white p-3 rounded-r-lg shadow-sm hover:bg-green-600 transition-colors">
                            ${getTranslation('search')}
                        </button>
                    </div>
                    <div class="flex items-center space-x-2">
                        <div id="aiTip" class="flex-grow p-4 bg-gray-100 rounded-lg whitespace-pre-wrap min-h-[100px] text-gray-800">
                            ${getTranslation('noRecipe')}
                        </div>
                        <button id="speakTipBtn" class="text-xl text-gray-600 hover:text-green-500 transition-colors p-2">üîä</button>
                    </div>
                </div>
            </div>
        `;
        document.querySelector('#speakTipBtn').addEventListener('click', () => {
            const text = document.querySelector('#aiTip').textContent;
            speakText(text);
        });
        document.querySelectorAll('.mic-btn').forEach(btn => {
            btn.addEventListener('click', () => startSpeechRecognition(btn.dataset.inputId));
        });
        document.getElementById('aiSearchBtn').addEventListener('click', () => {
            const query = document.getElementById('aiQuery').value;
            if (query) {
                const prompt = `Create a recipe for ${query} in ${currentLang === 'ta' ? 'Tamil' : 'English'}. Include ingredients and step-by-step instructions.`;
                getAiTipFromPrompt(prompt, 'recipe', 'aiTip');
            }
        });
    };

    const renderAiTipsPage = (title, placeholderText, tipType) => {
        appContainer.innerHTML = `
            <div class="min-h-screen flex flex-col items-center p-8 bg-gray-100 text-gray-800">
                <div class="max-w-2xl w-full bg-white rounded-2xl shadow-2xl p-8 relative">
                    <h1 class="text-4xl font-extrabold mb-4 text-center">${title}</h1>
                    <p class="text-lg text-center mb-6">${placeholderText}</p>
                    <div class="flex items-center w-full mb-4">
                        <input type="text" id="aiQuery" placeholder="${getTranslation('search')}" class="flex-grow p-3 border-2 border-gray-200 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-green-400 text-gray-800" />
                        <button class="mic-btn text-xl text-gray-600 hover:text-blue-500 transition-colors p-2" data-input-id="aiQuery">üé§</button>
                        <button id="aiSearchBtn" class="bg-green-500 text-white p-3 rounded-r-lg shadow-sm hover:bg-green-600 transition-colors">
                            ${getTranslation('submit')}
                        </button>
                    </div>
                    <div class="flex items-center space-x-2">
                        <div id="aiTip" class="flex-grow p-4 bg-gray-100 rounded-lg whitespace-pre-wrap min-h-[100px] text-gray-800">
                            ${getTranslation('yourTipHere')}
                        </div>
                        <button id="speakTipBtn" class="text-xl text-gray-600 hover:text-green-500 transition-colors p-2">üîä</button>
                    </div>
                </div>
            </div>
        `;
        document.querySelector('#speakTipBtn').addEventListener('click', () => {
            const text = document.querySelector('#aiTip').textContent;
            speakText(text);
        });
        document.querySelectorAll('.mic-btn').forEach(btn => {
            btn.addEventListener('click', () => startSpeechRecognition(btn.dataset.inputId));
        });
        document.getElementById('aiSearchBtn').addEventListener('click', () => {
            const query = document.getElementById('aiQuery').value;
            if (query) {
                getAiTipFromPrompt(query, tipType, 'aiTip');
            }
        });
    };

    const renderBodyPainMapPage = () => {
        appContainer.innerHTML = `
            <div class="min-h-screen flex flex-col items-center p-8 bg-gray-100 text-gray-800">
                <div class="max-w-2xl w-full bg-white rounded-2xl shadow-2xl p-8 relative">
                    <h1 class="text-4xl font-extrabold mb-4 text-center">${getTranslation('bodyPainMap')}</h1>
                    <p class="text-lg text-center mb-6">${getTranslation('painMapPrompt')}</p>
                    
                    <div class="pain-map-container">
                        <svg class="pain-map-svg w-full h-auto" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 600" fill="#6b7280">
                            <!-- Male body outline - front view -->
                            <g class="body-parts-group" data-title="Body">
                                <path id="head" class="body-part" d="M200 50c-27.6 0-50 22.4-50 50v50h100v-50c0-27.6-22.4-50-50-50z"/>
                                <path id="neck" class="body-part" d="M190 150h20v30h-20z"/>
                                <path id="shoulder_right" class="body-part" d="M210 160h60c11 0 20 9 20 20v40c0 11-9 20-20 20h-60z"/>
                                <path id="shoulder_left" class="body-part" d="M190 160h-60c-11 0-20 9-20 20v40c0 11 9 20 20 20h60z"/>
                                <path id="chest" class="body-part" d="M180 180h40v60h-40z"/>
                                <path id="stomach" class="body-part" d="M170 240h60v60h-60z"/>
                                <path id="arm_right" class="body-part" d="M270 180c11 0 20 9 20 20v100c0 11-9 20-20 20h-10c-11 0-20-9-20-20v-100c0-11 9-20 20-20z"/>
                                <path id="arm_left" class="body-part" d="M130 180c-11 0-20 9-20 20v100c0 11 9 20 20 20h10c11 0 20-9 20-20v-100c0-11-9-20-20-20z"/>
                                <path id="hip" class="body-part" d="M160 300h80v60h-80z"/>
                                <path id="thigh_right" class="body-part" d="M210 360h30c11 0 20 9 20 20v100c0 11-9 20-20 20h-30c-11 0-20-9-20-20v-100c0-11 9-20 20-20z"/>
                                <path id="thigh_left" class="body-part" d="M160 360h-30c-11 0-20 9-20 20v100c0 11 9 20 20 20h30c11 0 20-9 20-20v-100c0-11-9-20-20-20z"/>
                                <path id="calf_right" class="body-part" d="M215 480h20c11 0 20 9 20 20v80c0 11-9 20-20 20h-20c-11 0-20-9-20-20v-80c0-11 9-20 20-20z"/>
                                <path id="calf_left" class="body-part" d="M165 480h-20c-11 0-20 9-20 20v80c0 11 9 20 20 20h20c11 0 20-9 20-20v-80c0-11-9-20-20-20z"/>
                                <path id="foot_right" class="body-part" d="M220 580h30v20h-30z"/>
                                <path id="foot_left" class="body-part" d="M150 580h30v20h-30z"/>
                            </g>
                        </svg>
                    </div>

                    <div class="mt-8 text-center">
                        <p class="text-sm text-gray-500 mb-2">${getTranslation('painMapTipInstructions')}</p>
                        <div id="painTip" class="p-4 bg-gray-100 rounded-lg whitespace-pre-wrap min-h-[100px] text-gray-800">
                            ${getTranslation('genericPainTip')}
                        </div>
                        <button id="speakPainTipBtn" class="text-xl text-gray-600 hover:text-green-500 transition-colors p-2 mt-2">üîä</button>
                    </div>
                </div>
            </div>
        `;
        document.querySelectorAll('.pain-map-svg .body-part').forEach(path => {
            path.addEventListener('click', (event) => {
                const partId = event.target.id;
                const partTitle = translations[currentLang][partId] || partId;

                const hasPain = event.target.classList.toggle('pain');
                if (hasPain) {
                    const prompt = `‡Æ§‡ÆÆ‡Æø‡Æ¥‡Æø‡Æ≤‡Øç, ${partTitle} ‡Æ™‡Æï‡ØÅ‡Æ§‡Æø‡ÆØ‡Æø‡Æ≤‡Øç ‡Æâ‡Æ≥‡Øç‡Æ≥ ‡Æµ‡Æ≤‡Æø‡Æï‡Øç‡Æï‡ØÅ ‡Æé‡Æ©‡Øç‡Æ©‡ØÜ‡Æ©‡Øç‡Æ© ‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡ØÅ‡Æï‡Æ≥‡Øç ‡Æµ‡Æ¥‡Æô‡Øç‡Æï‡Æ≤‡Ææ‡ÆÆ‡Øç? ‡Æï‡Ææ‡Æ∞‡Æ£‡Æô‡Øç‡Æï‡Æ≥‡Øç, ‡Æö‡Æø‡Æï‡Æø‡Æö‡Øç‡Æö‡Øà ‡ÆÆ‡ØÅ‡Æ±‡Øà‡Æï‡Æ≥‡Øç, ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æ§‡Æü‡ØÅ‡Æ™‡Øç‡Æ™‡ØÅ ‡Æ®‡Æü‡Æµ‡Æü‡Æø‡Æï‡Øç‡Æï‡Øà‡Æï‡Æ≥‡Øç ‡Æ™‡Æ±‡Øç‡Æ±‡Æø ‡Æµ‡Æø‡Æ≥‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç.`;
                    getAiTipFromPrompt(prompt, 'pain-tip', 'painTip');
                } else {
                    document.getElementById('painTip').textContent = getTranslation('genericPainTip');
                }
            });
        });
        document.querySelector('#speakPainTipBtn').addEventListener('click', () => {
            const text = document.querySelector('#painTip').textContent;
            speakText(text);
        });
    };

    const renderFirstAidPage = () => {
        appContainer.innerHTML = `
            <div class="min-h-screen flex flex-col items-center p-8 bg-gray-100 text-gray-800">
                <div class="max-w-2xl w-full bg-white rounded-2xl shadow-2xl p-8 relative">
                    <h1 class="text-4xl font-extrabold mb-4 text-center">${getTranslation('firstAid')}</h1>
                    <p class="text-lg text-center mb-6">${getTranslation('firstAidPrompt')}</p>
                    <div class="flex flex-col space-y-4">
                        <div class="flex items-center w-full">
                            <input type="text" id="aiQuery" placeholder="${getTranslation('search')}" class="flex-grow p-3 border-2 border-gray-200 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-green-400 text-gray-800" />
                            <button class="mic-btn text-xl text-gray-600 hover:text-blue-500 transition-colors p-2" data-input-id="aiQuery">üé§</button>
                            <button id="aiSearchBtn" class="bg-green-500 text-white p-3 rounded-r-lg shadow-sm hover:bg-green-600 transition-colors">
                                ${getTranslation('submit')}
                            </button>
                        </div>
                        <div id="aiTip" class="p-4 bg-gray-100 rounded-lg whitespace-pre-wrap min-h-[100px] text-gray-800">
                            ${getTranslation('yourTipHere')}
                        </div>
                        <button id="speakTipBtn" class="text-xl text-gray-600 hover:text-green-500 transition-colors p-2 self-start">üîä</button>
                    </div>
                    <div class="mt-8">
                        <h2 class="text-2xl font-bold mb-4">${getTranslation('emergencyContacts')}</h2>
                        <ul id="contactsList" class="space-y-2 scrollable-content">
                            ${emergencyContacts.map(contact => `<li class="p-3 bg-gray-100 rounded-lg flex items-center justify-between shadow-inner"><span>${contact.name}: ${contact.number}</span> <button class="text-red-500 delete-contact" data-number="${contact.number}">‚ùå</button></li>`).join('')}
                            ${emergencyContacts.length === 0 ? `<li class="p-3 text-gray-500">${getTranslation('noContacts')}</li>` : ''}
                        </ul>
                        <div class="flex items-center space-x-2 mt-4">
                            <input type="text" id="contactName" placeholder="‡Æ™‡ØÜ‡ÆØ‡Æ∞‡Øç" class="p-2 border-2 border-gray-200 rounded-lg w-1/2">
                            <input type="text" id="contactNumber" placeholder="‡Æé‡Æ£‡Øç" class="p-2 border-2 border-gray-200 rounded-lg w-1/2">
                            <button id="addContactBtn" class="bg-blue-500 text-white p-2 rounded-lg hover:bg-blue-600">${getTranslation('addContact')}</button>
                        </div>
                    </div>
                </div>
            </div>
        `;
        document.querySelector('#speakTipBtn').addEventListener('click', () => {
            const text = document.querySelector('#aiTip').textContent;
            speakText(text);
        });
        document.querySelectorAll('.mic-btn').forEach(btn => {
            btn.addEventListener('click', () => startSpeechRecognition(btn.dataset.inputId));
        });
        document.getElementById('aiSearchBtn').addEventListener('click', () => {
            const query = document.getElementById('aiQuery').value;
            if (query) {
                const prompt = `‡Æ§‡ÆÆ‡Æø‡Æ¥‡Æø‡Æ≤‡Øç, ‡ÆÖ‡Æµ‡Æö‡Æ∞ ‡Æï‡Ææ‡Æ≤‡Æô‡Øç‡Æï‡Æ≥‡Æø‡Æ≤‡Øç ${query} ‡Æ®‡Æø‡Æ≤‡Øà‡Æï‡Øç‡Æï‡ØÅ ‡Æâ‡Æ§‡Æµ ‡ÆÆ‡ØÅ‡Æ§‡Æ≤‡Øç ‡Æâ‡Æ§‡Æµ‡Æø ‡Æ§‡Æï‡Æµ‡Æ≤‡Øç‡Æï‡Æ≥‡Øà ‡Æµ‡Æ¥‡Æô‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç.`;
                getAiTipFromPrompt(prompt, 'first-aid', 'aiTip');
            }
        });
        document.getElementById('addContactBtn').addEventListener('click', () => {
            const name = document.getElementById('contactName').value;
            const number = document.getElementById('contactNumber').value;
            if (name && number) {
                emergencyContacts.push({ name, number });
                document.getElementById('contactName').value = '';
                document.getElementById('contactNumber').value = '';
                render();
            }
        });
        document.querySelectorAll('.delete-contact').forEach(btn => {
            btn.addEventListener('click', () => {
                const contactNumber = btn.dataset.number;
                const index = emergencyContacts.findIndex(c => c.number === contactNumber);
                if (index !== -1) {
                    emergencyContacts.splice(index, 1);
                    render();
                }
            });
        });
    };

    // Initial render
    window.onload = function() {
        render();
    };
</script>

</body>
</html>

